var ku=Object.defineProperty;var Uu=(l,e,t)=>e in l?ku(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var Y=(l,e,t)=>Uu(l,typeof e!="symbol"?e+"":e,t);import{I as we,aW as Nu,aX as Hu,ag as Ju,ah as pa,ai as ic,O as ro,m as zu,e as _n,L as ki,aj as os,y as Cn,ab as Ln,Q as be,al as sc,a as ga,D as rc,am as ze,V as Qe,an as Ku,ao as Zi,ap as Yu,aq as Ys,T as oo,ar as qu,d as qs,as as Vu,at as Va,au as Xu,av as ju,aw as Wu,ax as Rn,ay as ir,R as qn,az as Zu,aA as sr,g as Hs,aB as Vs,aC as Xs,aD as oc,ac as $u,n as $i,aE as rr,f as ui,aF as Xa,aG as ma,aH as ac,aI as ed,h as Pr,G as Si,P as Fi,r as Gt,aJ as Ac,aK as lc,aL as Ba,aM as td,aN as cc,aO as nd,aP as or,aQ as Ca,aR as _a,aS as Ea,aT as id,aU as sd,w as rd,aV as od,z as si,aY as ao,aZ as ad,a_ as An,a$ as wA,b0 as es,b1 as Js,b2 as Qi,K as St,b3 as Fn,b4 as Ad,b5 as ld,b6 as cd,b7 as hd,b8 as ud,b9 as dd,ba as fd,bb as pd,bc as gd,bd as md,be as hc,bf as ts,bg as xi,bh as Bd,bi as Cd,bj as _d,bk as go,s as Dt,l as kr,j as Vr,bl as uc,ae as Ed,H as Ao,ad as Id,bm as bn,bn as yd,M as vd,bo as wd,A as xd,bp as Md,bq as oi,br as Td,J as dc,U as Qd,bs as Dd,bt as bd,bu as Sd,a7 as Fd,x as Rd,S as fc,W as Od,bv as Ld,bw as Gd,bx as Pd,by as kd,aa as Ud,a0 as Nd,bz as Hd,ak as ys,k as Jd,i as zd}from"./three.module-Dp6ZLe64.js";import{d as Kd,o as Yd,c as qd,g as Vd,f as Xd}from"./index-D_RN05-O.js";var xA=class{constructor(e,t){Y(this,"target");Y(this,"name");Y(this,"intersected");Y(this,"wasIntersected",!1);Y(this,"wasIntersectedOnMouseDown",!1);Y(this,"distance");this.target=e,this.name=t,this.intersected=!1,this.distance=0}},Ft=class{constructor(e,t=null){Y(this,"type");Y(this,"cancelBubble");Y(this,"originalEvent");Y(this,"coords",new we(0,0));Y(this,"distance",0);Y(this,"intersected",!1);Y(this,"wasIntersected",!1);Y(this,"wasIntersectedOnMouseDown",!1);this.cancelBubble=!1,this.type=e,this.originalEvent=t}stopPropagation(){this.cancelBubble=!0}},jd=class{constructor(l,e,t,n){Y(this,"renderer");Y(this,"camera");Y(this,"domElement");Y(this,"bindEventsOnBodyElement");Y(this,"autoAdd");Y(this,"scene");Y(this,"mouse");Y(this,"supportsPointerEvents");Y(this,"interactiveObjects");Y(this,"closestObject");Y(this,"raycaster");Y(this,"treatTouchEventsAsMouseEvents");Y(this,"dispose",()=>{this.domElement.removeEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("pointermove",this.onDocumentPointerMove):this.domElement.removeEventListener("pointermove",this.onDocumentPointerMove),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("mousemove",this.onDocumentMouseMove):this.domElement.removeEventListener("mousemove",this.onDocumentMouseMove),this.domElement.removeEventListener("mousedown",this.onMouseDown),this.domElement.removeEventListener("mouseup",this.onMouseUp),this.domElement.removeEventListener("touchstart",this.onTouchStart),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd)});Y(this,"add",(l,e=[])=>{if(l&&!this.interactiveObjects.find(t=>t.target===l))if(e.length>0)e.forEach(t=>{let n=l.getObjectByName(t);if(n){let i=new xA(n,t);this.interactiveObjects.push(i)}});else{let t=new xA(l,l.name);this.interactiveObjects.push(t)}});Y(this,"remove",(l,e=[])=>{!l||(e.length>0?e.forEach(t=>{let n=l.getObjectByName(t);n&&(this.interactiveObjects=this.interactiveObjects.filter(i=>i.target!==n))}):this.interactiveObjects=this.interactiveObjects.filter(t=>t.target!==l))});Y(this,"update",()=>{this.raycaster.setFromCamera(this.mouse,this.camera),this.interactiveObjects.forEach(n=>{n.target&&this.checkIntersection(n)}),this.interactiveObjects.sort(function(n,i){return n.distance-i.distance});let l=this.interactiveObjects.find(n=>n.intersected)??null;if(l!=this.closestObject){if(this.closestObject){let n=new Ft("mouseout");this.dispatch(this.closestObject,n)}if(l){let n=new Ft("mouseover");this.dispatch(l,n)}this.closestObject=l}let e;this.interactiveObjects.forEach(n=>{!n.intersected&&n.wasIntersected&&(e||(e=new Ft("mouseleave")),this.dispatch(n,e))});let t;this.interactiveObjects.forEach(n=>{n.intersected&&!n.wasIntersected&&(t||(t=new Ft("mouseenter")),this.dispatch(n,t))})});Y(this,"checkIntersection",l=>{let e=this.raycaster.intersectObjects([l.target],!0);if(l.wasIntersected=l.intersected,e.length>0){let t=e[0].distance;e.forEach(n=>{n.distance<t&&(t=n.distance)}),l.intersected=!0,l.distance=t}else l.intersected=!1});Y(this,"onDocumentMouseMove",l=>{this.mapPositionToPoint(this.mouse,l.clientX,l.clientY);let e=new Ft("mousemove",l);this.interactiveObjects.forEach(t=>{this.dispatch(t,e)})});Y(this,"onDocumentPointerMove",l=>{this.mapPositionToPoint(this.mouse,l.clientX,l.clientY);let e=new Ft("pointermove",l);this.interactiveObjects.forEach(t=>{this.dispatch(t,e)})});Y(this,"onTouchMove",l=>{l.touches.length>0&&this.mapPositionToPoint(this.mouse,l.touches[0].clientX,l.touches[0].clientY);let e=new Ft(this.treatTouchEventsAsMouseEvents?"mousemove":"touchmove",l);this.interactiveObjects.forEach(t=>{this.dispatch(t,e)})});Y(this,"onMouseClick",l=>{this.update();let e=new Ft("click",l);this.interactiveObjects.forEach(t=>{t.intersected&&this.dispatch(t,e)})});Y(this,"onMouseDown",l=>{this.mapPositionToPoint(this.mouse,l.clientX,l.clientY),this.update();let e=new Ft("mousedown",l);this.interactiveObjects.forEach(t=>{t.intersected?(t.wasIntersectedOnMouseDown=!0,this.dispatch(t,e)):t.wasIntersectedOnMouseDown=!1})});Y(this,"onPointerDown",l=>{this.mapPositionToPoint(this.mouse,l.clientX,l.clientY),this.update();let e=new Ft("pointerdown",l);this.interactiveObjects.forEach(t=>{t.intersected&&this.dispatch(t,e)})});Y(this,"onTouchStart",l=>{l.touches.length>0&&this.mapPositionToPoint(this.mouse,l.touches[0].clientX,l.touches[0].clientY),this.update();let e=new Ft(this.treatTouchEventsAsMouseEvents?"mousedown":"touchstart",l);this.interactiveObjects.forEach(t=>{t.intersected&&this.dispatch(t,e)})});Y(this,"onMouseUp",l=>{let e=new Ft("mouseup",l);this.interactiveObjects.forEach(t=>{this.dispatch(t,e)})});Y(this,"onPointerUp",l=>{let e=new Ft("pointerup",l);this.interactiveObjects.forEach(t=>{this.dispatch(t,e)})});Y(this,"onTouchEnd",l=>{l.touches.length>0&&this.mapPositionToPoint(this.mouse,l.touches[0].clientX,l.touches[0].clientY),this.update();let e=new Ft(this.treatTouchEventsAsMouseEvents?"mouseup":"touchend",l);this.interactiveObjects.forEach(t=>{this.dispatch(t,e)})});Y(this,"dispatch",(l,e)=>{l.target&&!e.cancelBubble&&(e.coords=this.mouse,e.distance=l.distance,e.intersected=l.intersected,e.wasIntersected=l.wasIntersected,e.wasIntersectedOnMouseDown=l.wasIntersectedOnMouseDown,l.target.dispatchEvent(e))});Y(this,"mapPositionToPoint",(l,e,t)=>{let n=this.renderer.domElement.getBoundingClientRect();l.x=(e-n.left)/n.width*2-1,l.y=-((t-n.top)/n.height)*2+1});this.renderer=l,this.camera=e,this.domElement=t,this.bindEventsOnBodyElement=n&&typeof n.bindEventsOnBodyElement<"u"?n.bindEventsOnBodyElement:!0,this.scene=n&&typeof n.scene<"u"?n.scene:null,this.scene&&(this.scene.onBeforeRender=()=>{this.autoAdd&&this.scene!==null&&this.scene.traverse(i=>{this.add(i),i.addEventListener("removed",s=>{this.remove(s.target)})}),this.update()}),this.autoAdd=n&&typeof n.autoAdd<"u"?n.autoAdd:!1,this.autoAdd&&this.scene===null&&console.error("Attention: Options.scene needs to be set when using options.autoAdd"),this.mouse=new we(-1,1),this.supportsPointerEvents=!!window.PointerEvent,this.interactiveObjects=[],this.closestObject=null,this.raycaster=new Nu,t.addEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?t.ownerDocument.addEventListener("pointermove",this.onDocumentPointerMove):t.addEventListener("pointermove",this.onDocumentPointerMove),t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?t.ownerDocument.addEventListener("mousemove",this.onDocumentMouseMove):t.addEventListener("mousemove",this.onDocumentMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),t.addEventListener("touchmove",this.onTouchMove,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd,{passive:!0}),this.treatTouchEventsAsMouseEvents=!0}};function pc(l){return{all:l=l||new Map,on:function(e,t){var n=l.get(e);n?n.push(t):l.set(e,[t])},off:function(e,t){var n=l.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):l.set(e,[]))},emit:function(e,t){var n=l.get(e);n&&n.slice().map(function(i){i(t)}),(n=l.get("*"))&&n.slice().map(function(i){i(e,t)})}}}class Jt{constructor(e){Y(this,"base");Y(this,"emitter");Y(this,"container");this.base=e,this.base.update(t=>this.update(t)),this.emitter=pc(),this.container=this.base.scene}addExisting(){}update(e){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}emit(e,t={}){this.emitter.emit(e,t)}}class Wd{constructor(e,t={}){Y(this,"base");Y(this,"tasks");Y(this,"autoRender");const{autoRender:n=!0}=t;this.autoRender=n,this.base=e,this.tasks=[]}add(e){this.tasks.push(e)}update(){this.base.renderer.setAnimationLoop(e=>{this.tick(e)})}tick(e=0){this.tasks.forEach(t=>{t(e)}),this.autoRender&&this.base.render()}}const gc=parseInt(Hu.replace(/\D+/g,""));function MA(l,e){if(e===Ju)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),l;if(e===pa||e===ic){let t=l.getIndex();if(t===null){const r=[],o=l.getAttribute("position");if(o!==void 0){for(let A=0;A<o.count;A++)r.push(A);l.setIndex(r),t=l.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l}const n=t.count-2,i=[];if(t)if(e===pa)for(let r=1;r<=n;r++)i.push(t.getX(0)),i.push(t.getX(r)),i.push(t.getX(r+1));else for(let r=0;r<n;r++)r%2===0?(i.push(t.getX(r)),i.push(t.getX(r+1)),i.push(t.getX(r+2))):(i.push(t.getX(r+2)),i.push(t.getX(r+1)),i.push(t.getX(r)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=l.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),l}var ln=Uint8Array,ai=Uint16Array,Ia=Uint32Array,mc=new ln([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bc=new ln([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zd=new ln([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cc=function(l,e){for(var t=new ai(31),n=0;n<31;++n)t[n]=e+=1<<l[n-1];for(var i=new Ia(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},_c=Cc(mc,2),Ec=_c[0],$d=_c[1];Ec[28]=258,$d[258]=28;var ef=Cc(Bc,0),tf=ef[0],ya=new ai(32768);for(var Ze=0;Ze<32768;++Ze){var ei=(Ze&43690)>>>1|(Ze&21845)<<1;ei=(ei&52428)>>>2|(ei&13107)<<2,ei=(ei&61680)>>>4|(ei&3855)<<4,ya[Ze]=((ei&65280)>>>8|(ei&255)<<8)>>>1}var js=function(l,e,t){for(var n=l.length,i=0,s=new ai(e);i<n;++i)++s[l[i]-1];var r=new ai(e);for(i=0;i<e;++i)r[i]=r[i-1]+s[i-1]<<1;var o;if(t){o=new ai(1<<e);var A=15-e;for(i=0;i<n;++i)if(l[i])for(var h=i<<4|l[i],d=e-l[i],a=r[l[i]-1]++<<d,c=a|(1<<d)-1;a<=c;++a)o[ya[a]>>>A]=h}else for(o=new ai(n),i=0;i<n;++i)l[i]&&(o[i]=ya[r[l[i]-1]++]>>>15-l[i]);return o},gr=new ln(288);for(var Ze=0;Ze<144;++Ze)gr[Ze]=8;for(var Ze=144;Ze<256;++Ze)gr[Ze]=9;for(var Ze=256;Ze<280;++Ze)gr[Ze]=7;for(var Ze=280;Ze<288;++Ze)gr[Ze]=8;var Ic=new ln(32);for(var Ze=0;Ze<32;++Ze)Ic[Ze]=5;var nf=js(gr,9,1),sf=js(Ic,5,1),mo=function(l){for(var e=l[0],t=1;t<l.length;++t)l[t]>e&&(e=l[t]);return e},fn=function(l,e,t){var n=e/8|0;return(l[n]|l[n+1]<<8)>>(e&7)&t},Bo=function(l,e){var t=e/8|0;return(l[t]|l[t+1]<<8|l[t+2]<<16)>>(e&7)},rf=function(l){return(l/8|0)+(l&7&&1)},of=function(l,e,t){(t==null||t>l.length)&&(t=l.length);var n=new(l instanceof ai?ai:l instanceof Ia?Ia:ln)(t-e);return n.set(l.subarray(e,t)),n},af=function(l,e,t){var n=l.length;if(!n||t&&!t.l&&n<5)return e||new ln(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new ln(n*3));var r=function(P){var R=e.length;if(P>R){var S=new ln(Math.max(R*2,P));S.set(e),e=S}},o=t.f||0,A=t.p||0,h=t.b||0,d=t.l,a=t.d,c=t.m,u=t.n,f=n*8;do{if(!d){t.f=o=fn(l,A,1);var p=fn(l,A+1,3);if(A+=3,p)if(p==1)d=nf,a=sf,c=9,u=5;else if(p==2){var I=fn(l,A,31)+257,_=fn(l,A+10,15)+4,C=I+fn(l,A+5,31)+1;A+=14;for(var E=new ln(C),v=new ln(19),x=0;x<_;++x)v[Zd[x]]=fn(l,A+x*3,7);A+=_*3;for(var w=mo(v),D=(1<<w)-1,G=js(v,w,1),x=0;x<C;){var O=G[fn(l,A,D)];A+=O&15;var m=O>>>4;if(m<16)E[x++]=m;else{var T=0,b=0;for(m==16?(b=3+fn(l,A,3),A+=2,T=E[x-1]):m==17?(b=3+fn(l,A,7),A+=3):m==18&&(b=11+fn(l,A,127),A+=7);b--;)E[x++]=T}}var F=E.subarray(0,I),U=E.subarray(I);c=mo(F),u=mo(U),d=js(F,c,1),a=js(U,u,1)}else throw"invalid block type";else{var m=rf(A)+4,g=l[m-4]|l[m-3]<<8,B=m+g;if(B>n){if(s)throw"unexpected EOF";break}i&&r(h+g),e.set(l.subarray(m,B),h),t.b=h+=g,t.p=A=B*8;continue}if(A>f){if(s)throw"unexpected EOF";break}}i&&r(h+131072);for(var te=(1<<c)-1,j=(1<<u)-1,J=A;;J=A){var T=d[Bo(l,A)&te],ee=T>>>4;if(A+=T&15,A>f){if(s)throw"unexpected EOF";break}if(!T)throw"invalid length/literal";if(ee<256)e[h++]=ee;else if(ee==256){J=A,d=null;break}else{var ae=ee-254;if(ee>264){var x=ee-257,W=mc[x];ae=fn(l,A,(1<<W)-1)+Ec[x],A+=W}var _e=a[Bo(l,A)&j],Ee=_e>>>4;if(!_e)throw"invalid distance";A+=_e&15;var U=tf[Ee];if(Ee>3){var W=Bc[Ee];U+=Bo(l,A)&(1<<W)-1,A+=W}if(A>f){if(s)throw"unexpected EOF";break}i&&r(h+131072);for(var N=h+ae;h<N;h+=4)e[h]=e[h-U],e[h+1]=e[h+1-U],e[h+2]=e[h+2-U],e[h+3]=e[h+3-U];h=N}}t.l=d,t.p=J,t.b=h,d&&(o=1,t.m=c,t.d=a,t.n=u)}while(!o);return h==e.length?e:of(e,0,h)},Af=new ln(0),lf=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function vr(l,e){return af((lf(l),l.subarray(2,-4)),e)}var cf=typeof TextDecoder<"u"&&new TextDecoder,hf=0;try{cf.decode(Af,{stream:!0}),hf=1}catch{}var uf=Object.defineProperty,df=(l,e,t)=>e in l?uf(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Co=(l,e,t)=>(df(l,typeof e!="symbol"?e+"":e,t),t);class ff{constructor(e){Co(this,"camera",new ro(-1,1,1,-1,0,1)),Co(this,"geometry",new zu(2,2)),Co(this,"mesh"),this.mesh=new _n(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}function Xr(l){if(typeof TextDecoder<"u")return new TextDecoder().decode(l);let e="";for(let t=0,n=l.length;t<n;t++)e+=String.fromCharCode(l[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Di="srgb",Vn="srgb-linear",TA=3001,pf=3e3;class gf extends ki{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ef(t)}),this.register(function(t){return new If(t)}),this.register(function(t){return new bf(t)}),this.register(function(t){return new Sf(t)}),this.register(function(t){return new Ff(t)}),this.register(function(t){return new vf(t)}),this.register(function(t){return new wf(t)}),this.register(function(t){return new xf(t)}),this.register(function(t){return new Mf(t)}),this.register(function(t){return new _f(t)}),this.register(function(t){return new Tf(t)}),this.register(function(t){return new yf(t)}),this.register(function(t){return new Df(t)}),this.register(function(t){return new Qf(t)}),this.register(function(t){return new Bf(t)}),this.register(function(t){return new Rf(t)}),this.register(function(t){return new Of(t)})}load(e,t,n,i){const s=this;let r;if(this.resourcePath!=="")r=this.resourcePath;else if(this.path!==""){const h=os.extractUrlBase(e);r=os.resolveURL(h,this.path)}else r=os.extractUrlBase(e);this.manager.itemStart(e);const o=function(h){i?i(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},A=new Cn(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(h){try{s.parse(h,r,function(d){t(d),s.manager.itemEnd(e)},o)}catch(d){o(d)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const r={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Xr(new Uint8Array(e.slice(0,4)))===yc){try{r[Se.KHR_BINARY_GLTF]=new Lf(e)}catch(d){i&&i(d);return}s=JSON.parse(r[Se.KHR_BINARY_GLTF].content)}else s=JSON.parse(Xr(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const A=new Xf(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const d=this.pluginCallbacks[h](A);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[d.name]=d,r[d.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const d=s.extensionsUsed[h],a=s.extensionsRequired||[];switch(d){case Se.KHR_MATERIALS_UNLIT:r[d]=new Cf;break;case Se.KHR_DRACO_MESH_COMPRESSION:r[d]=new Gf(s,this.dracoLoader);break;case Se.KHR_TEXTURE_TRANSFORM:r[d]=new Pf;break;case Se.KHR_MESH_QUANTIZATION:r[d]=new kf;break;default:a.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}A.setExtensions(r),A.setPlugins(o),A.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function mf(){let l={};return{get:function(e){return l[e]},add:function(e,t){l[e]=t},remove:function(e){delete l[e]},removeAll:function(){l={}}}}const Se={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Bf{constructor(e){this.parser=e,this.name=Se.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,A=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const d=new be(16777215);A.color!==void 0&&d.setRGB(A.color[0],A.color[1],A.color[2],Vn);const a=A.range!==void 0?A.range:0;switch(A.type){case"directional":h=new rc(d),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new ga(d),h.distance=a;break;case"spot":h=new sc(d),h.distance=a,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,h.angle=A.spot.outerConeAngle,h.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return h.position.set(0,0,0),h.decay=2,zn(h,A),A.intensity!==void 0&&(h.intensity=A.intensity),h.name=t.createUniqueName(A.name||"light_"+e),i=Promise.resolve(h),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(A){return n._getNodeRef(t.cache,o,A)})}}class Cf{constructor(){this.name=Se.KHR_MATERIALS_UNLIT}getMaterialType(){return $i}extendParams(e,t,n){const i=[];e.color=new be(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const r=s.baseColorFactor;e.color.setRGB(r[0],r[1],r[2],Vn),e.opacity=r[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,Di))}return Promise.all(i)}}class _f{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Ef{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];if(r.clearcoatFactor!==void 0&&(t.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const o=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new we(o,o)}return Promise.all(s)}}class If{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class yf{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return r.iridescenceFactor!==void 0&&(t.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(t.iridescenceIOR=r.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(s)}}class vf{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new be(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=i.extensions[this.name];if(r.sheenColorFactor!==void 0){const o=r.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Vn)}return r.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",r.sheenColorTexture,Di)),r.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(s)}}class wf{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return r.transmissionFactor!==void 0&&(t.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(s)}}class xf{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];t.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const o=r.attenuationColor||[1,1,1];return t.attenuationColor=new be().setRGB(o[0],o[1],o[2],Vn),Promise.all(s)}}class Mf{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Tf{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];t.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",r.specularTexture));const o=r.specularColorFactor||[1,1,1];return t.specularColor=new be().setRGB(o[0],o[1],o[2],Vn),r.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",r.specularColorTexture,Di)),Promise.all(s)}}class Qf{constructor(e){this.parser=e,this.name=Se.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return t.bumpScale=r.bumpFactor!==void 0?r.bumpFactor:1,r.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",r.bumpTexture)),Promise.all(s)}}class Df{constructor(e){this.parser=e,this.name=Se.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ln}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return r.anisotropyStrength!==void 0&&(t.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(t.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",r.anisotropyTexture)),Promise.all(s)}}class bf{constructor(e){this.parser=e,this.name=Se.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,r)}}class Sf{constructor(e){this.parser=e,this.name=Se.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const r=s.extensions[t],o=i.images[r.source];let A=n.textureLoader;if(o.uri){const h=n.options.manager.getHandler(o.uri);h!==null&&(A=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,r.source,A);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Ff{constructor(e){this.parser=e,this.name=Se.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const r=s.extensions[t],o=i.images[r.source];let A=n.textureLoader;if(o.uri){const h=n.options.manager.getHandler(o.uri);h!==null&&(A=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,r.source,A);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Rf{constructor(e){this.name=Se.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const A=i.byteOffset||0,h=i.byteLength||0,d=i.count,a=i.byteStride,c=new Uint8Array(o,A,h);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(d,a,c,i.mode,i.filter).then(function(u){return u.buffer}):r.ready.then(function(){const u=new ArrayBuffer(d*a);return r.decodeGltfBuffer(new Uint8Array(u),d,a,c,i.mode,i.filter),u})})}else return null}}class Of{constructor(e){this.name=Se.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const h of i.primitives)if(h.mode!==on.TRIANGLES&&h.mode!==on.TRIANGLE_STRIP&&h.mode!==on.TRIANGLE_FAN&&h.mode!==void 0)return null;const r=n.extensions[this.name].attributes,o=[],A={};for(const h in r)o.push(this.parser.getDependency("accessor",r[h]).then(d=>(A[h]=d,A[h])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(h=>{const d=h.pop(),a=d.isGroup?d.children:[d],c=h[0].count,u=[];for(const f of a){const p=new ze,m=new Qe,g=new Zi,B=new Qe(1,1,1),I=new Ku(f.geometry,f.material,c);for(let _=0;_<c;_++)A.TRANSLATION&&m.fromBufferAttribute(A.TRANSLATION,_),A.ROTATION&&g.fromBufferAttribute(A.ROTATION,_),A.SCALE&&B.fromBufferAttribute(A.SCALE,_),I.setMatrixAt(_,p.compose(m,g,B));for(const _ in A)if(_==="_COLOR_0"){const C=A[_];I.instanceColor=new Yu(C.array,C.itemSize,C.normalized)}else _!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&f.geometry.setAttribute(_,A[_]);Ys.prototype.copy.call(I,f),this.parser.assignFinalMaterial(I),u.push(I)}return d.isGroup?(d.clear(),d.add(...u),d):u[0]}))}}const yc="glTF",vs=12,QA={JSON:1313821514,BIN:5130562};class Lf{constructor(e){this.name=Se.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,vs);if(this.header={magic:Xr(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==yc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-vs,i=new DataView(e,vs);let s=0;for(;s<n;){const r=i.getUint32(s,!0);s+=4;const o=i.getUint32(s,!0);if(s+=4,o===QA.JSON){const A=new Uint8Array(e,vs+s,r);this.content=Xr(A)}else if(o===QA.BIN){const A=vs+s;this.body=e.slice(A,A+r)}s+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Gf{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Se.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,o={},A={},h={};for(const d in r){const a=va[d]||d.toLowerCase();o[a]=r[d]}for(const d in e.attributes){const a=va[d]||d.toLowerCase();if(r[d]!==void 0){const c=n.accessors[e.attributes[d]],u=as[c.componentType];h[a]=u.name,A[a]=c.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(a,c){i.decodeDracoFile(d,function(u){for(const f in u.attributes){const p=u.attributes[f],m=A[f];m!==void 0&&(p.normalized=m)}a(u)},o,h,Vn,c)})})}}class Pf{constructor(){this.name=Se.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class kf{constructor(){this.name=Se.KHR_MESH_QUANTIZATION}}class vc extends sd{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let r=0;r!==i;r++)t[r]=n[s+r];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,A=o*2,h=o*3,d=i-t,a=(n-t)/d,c=a*a,u=c*a,f=e*h,p=f-h,m=-2*u+3*c,g=u-c,B=1-m,I=g-c+a;for(let _=0;_!==o;_++){const C=r[p+_+o],E=r[p+_+A]*d,v=r[f+_+o],x=r[f+_]*d;s[_]=B*C+I*E+m*v+g*x}return s}}const Uf=new Zi;class Nf extends vc{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return Uf.fromArray(s).normalize().toArray(s),s}}const on={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},as={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},DA={9728:ir,9729:Rn,9984:Wu,9985:ju,9986:Xu,9987:Va},bA={33071:sr,33648:Zu,10497:qn},_o={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},va={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...gc>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ti={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hf={CUBICSPLINE:void 0,LINEAR:cc,STEP:td},Eo={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Jf(l){return l.DefaultMaterial===void 0&&(l.DefaultMaterial=new oc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:id})),l.DefaultMaterial}function _i(l,e,t){for(const n in t.extensions)l[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function zn(l,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(l.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function zf(l,e,t){let n=!1,i=!1,s=!1;for(let h=0,d=e.length;h<d;h++){const a=e[h];if(a.POSITION!==void 0&&(n=!0),a.NORMAL!==void 0&&(i=!0),a.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(l);const r=[],o=[],A=[];for(let h=0,d=e.length;h<d;h++){const a=e[h];if(n){const c=a.POSITION!==void 0?t.getDependency("accessor",a.POSITION):l.attributes.position;r.push(c)}if(i){const c=a.NORMAL!==void 0?t.getDependency("accessor",a.NORMAL):l.attributes.normal;o.push(c)}if(s){const c=a.COLOR_0!==void 0?t.getDependency("accessor",a.COLOR_0):l.attributes.color;A.push(c)}}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(A)]).then(function(h){const d=h[0],a=h[1],c=h[2];return n&&(l.morphAttributes.position=d),i&&(l.morphAttributes.normal=a),s&&(l.morphAttributes.color=c),l.morphTargetsRelative=!0,l})}function Kf(l,e){if(l.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)l.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(l.morphTargetInfluences.length===t.length){l.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)l.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Yf(l){let e;const t=l.extensions&&l.extensions[Se.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Io(t.attributes):e=l.indices+":"+Io(l.attributes)+":"+l.mode,l.targets!==void 0)for(let n=0,i=l.targets.length;n<i;n++)e+=":"+Io(l.targets[n]);return e}function Io(l){let e="";const t=Object.keys(l).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+l[t[n]]+";";return e}function wa(l){switch(l){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function qf(l){return l.search(/\.jpe?g($|\?)/i)>0||l.search(/^data\:image\/jpeg/)===0?"image/jpeg":l.search(/\.webp($|\?)/i)>0||l.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Vf=new ze;class Xf{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new mf,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new oo(this.options.manager):this.textureLoader=new qu(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Cn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){const o={scene:r[0][i.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:i.asset,parser:n,userData:{}};return _i(s,o,i),zn(o,i),Promise.all(n._invokeAll(function(A){return A.afterRoot&&A.afterRoot(o)})).then(function(){for(const A of o.scenes)A.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i].joints;for(let o=0,A=r.length;o<A;o++)e[r[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const r=e[i];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(n[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(r,o)=>{const A=this.associations.get(r);A!=null&&this.associations.set(o,A);for(const[h,d]of r.children.entries())s(d,o.children[h])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Se.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,r){n.load(os.resolveURL(t.uri,i.path),s,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const r=_o[i.type],o=as[i.componentType],A=i.normalized===!0,h=new o(i.count*r);return Promise.resolve(new qs(h,r,A))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(r){const o=r[0],A=_o[i.type],h=as[i.componentType],d=h.BYTES_PER_ELEMENT,a=d*A,c=i.byteOffset||0,u=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,f=i.normalized===!0;let p,m;if(u&&u!==a){const g=Math.floor(c/u),B="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let I=t.cache.get(B);I||(p=new h(o,g*u,i.count*u/d),I=new Vu(p,u/d),t.cache.add(B,I)),m=new nd(I,A,c%u/d,f)}else o===null?p=new h(i.count*A):p=new h(o,c,i.count*A),m=new qs(p,A,f);if(i.sparse!==void 0){const g=_o.SCALAR,B=as[i.sparse.indices.componentType],I=i.sparse.indices.byteOffset||0,_=i.sparse.values.byteOffset||0,C=new B(r[1],I,i.sparse.count*g),E=new h(r[2],_,i.sparse.count*A);o!==null&&(m=new qs(m.array.slice(),m.itemSize,m.normalized));for(let v=0,x=C.length;v<x;v++){const w=C[v];if(m.setX(w,E[v*A]),A>=2&&m.setY(w,E[v*A+1]),A>=3&&m.setZ(w,E[v*A+2]),A>=4&&m.setW(w,E[v*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,r=t.images[s];let o=this.textureLoader;if(r.uri){const A=n.manager.getHandler(r.uri);A!==null&&(o=A)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const i=this,s=this.json,r=s.textures[e],o=s.images[t],A=(o.uri||o.bufferView)+":"+r.sampler;if(this.textureCache[A])return this.textureCache[A];const h=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=r.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const c=(s.samplers||{})[r.sampler]||{};return d.magFilter=DA[c.magFilter]||Rn,d.minFilter=DA[c.minFilter]||Va,d.wrapS=bA[c.wrapS]||qn,d.wrapT=bA[c.wrapT]||qn,i.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[A]=h,h}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(a=>a.clone());const r=i.images[e],o=self.URL||self.webkitURL;let A=r.uri||"",h=!1;if(r.bufferView!==void 0)A=n.getDependency("bufferView",r.bufferView).then(function(a){h=!0;const c=new Blob([a],{type:r.mimeType});return A=o.createObjectURL(c),A});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(A).then(function(a){return new Promise(function(c,u){let f=c;t.isImageBitmapLoader===!0&&(f=function(p){const m=new or(p);m.needsUpdate=!0,c(m)}),t.load(os.resolveURL(a,s.path),f,void 0,u)})}).then(function(a){return h===!0&&o.revokeObjectURL(A),zn(a,r),a.userData.mimeType=r.mimeType||qf(r.uri),a}).catch(function(a){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),a});return this.sourceCache[e]=d,d}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(r){if(!r)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(r=r.clone(),r.channel=n.texCoord),s.extensions[Se.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Se.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const A=s.associations.get(r);r=s.extensions[Se.KHR_TEXTURE_TRANSFORM].extendTexture(r,o),s.associations.set(r,A)}}return i!==void 0&&(typeof i=="number"&&(i=i===TA?Di:Vn),"colorSpace"in r?r.colorSpace=i:r.encoding=i===Di?TA:pf),e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,r=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let A=this.cache.get(o);A||(A=new Hs,Vs.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,A.sizeAttenuation=!1,this.cache.add(o,A)),n=A}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let A=this.cache.get(o);A||(A=new Xs,Vs.prototype.copy.call(A,n),A.color.copy(n.color),A.map=n.map,this.cache.add(o,A)),n=A}if(i||s||r){let o="ClonedMaterial:"+n.uuid+":";i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),r&&(o+="flat-shading:");let A=this.cache.get(o);A||(A=n.clone(),s&&(A.vertexColors=!0),r&&(A.flatShading=!0),i&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(o,A),this.associations.set(A,this.associations.get(n))),n=A}e.material=n}getMaterialType(){return oc}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let r;const o={},A=s.extensions||{},h=[];if(A[Se.KHR_MATERIALS_UNLIT]){const a=i[Se.KHR_MATERIALS_UNLIT];r=a.getMaterialType(),h.push(a.extendParams(o,s,t))}else{const a=s.pbrMetallicRoughness||{};if(o.color=new be(1,1,1),o.opacity=1,Array.isArray(a.baseColorFactor)){const c=a.baseColorFactor;o.color.setRGB(c[0],c[1],c[2],Vn),o.opacity=c[3]}a.baseColorTexture!==void 0&&h.push(t.assignTexture(o,"map",a.baseColorTexture,Di)),o.metalness=a.metallicFactor!==void 0?a.metallicFactor:1,o.roughness=a.roughnessFactor!==void 0?a.roughnessFactor:1,a.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(o,"metalnessMap",a.metallicRoughnessTexture)),h.push(t.assignTexture(o,"roughnessMap",a.metallicRoughnessTexture))),r=this._invokeOne(function(c){return c.getMaterialType&&c.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(c){return c.extendMaterialParams&&c.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=$u);const d=s.alphaMode||Eo.OPAQUE;if(d===Eo.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===Eo.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&r!==$i&&(h.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new we(1,1),s.normalTexture.scale!==void 0)){const a=s.normalTexture.scale;o.normalScale.set(a,a)}if(s.occlusionTexture!==void 0&&r!==$i&&(h.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&r!==$i){const a=s.emissiveFactor;o.emissive=new be().setRGB(a[0],a[1],a[2],Vn)}return s.emissiveTexture!==void 0&&r!==$i&&h.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Di)),Promise.all(h).then(function(){const a=new r(o);return s.name&&(a.name=s.name),zn(a,s),t.associations.set(a,{materials:e}),s.extensions&&_i(i,a,s),a})}createUniqueName(e){const t=rr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(o){return n[Se.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(A){return SA(A,o,t)})}const r=[];for(let o=0,A=e.length;o<A;o++){const h=e[o],d=Yf(h),a=i[d];if(a)r.push(a.promise);else{let c;h.extensions&&h.extensions[Se.KHR_DRACO_MESH_COMPRESSION]?c=s(h):c=SA(new ui,h,t),i[d]={primitive:h,promise:c},r.push(c)}}return Promise.all(r)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],r=s.primitives,o=[];for(let A=0,h=r.length;A<h;A++){const d=r[A].material===void 0?Jf(this.cache):this.getDependency("material",r[A].material);o.push(d)}return o.push(t.loadGeometries(r)),Promise.all(o).then(function(A){const h=A.slice(0,A.length-1),d=A[A.length-1],a=[];for(let u=0,f=d.length;u<f;u++){const p=d[u],m=r[u];let g;const B=h[u];if(m.mode===on.TRIANGLES||m.mode===on.TRIANGLE_STRIP||m.mode===on.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new Xa(p,B):new _n(p,B),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),m.mode===on.TRIANGLE_STRIP?g.geometry=MA(g.geometry,ic):m.mode===on.TRIANGLE_FAN&&(g.geometry=MA(g.geometry,pa));else if(m.mode===on.LINES)g=new ma(p,B);else if(m.mode===on.LINE_STRIP)g=new ac(p,B);else if(m.mode===on.LINE_LOOP)g=new ed(p,B);else if(m.mode===on.POINTS)g=new Pr(p,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&Kf(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),zn(g,s),m.extensions&&_i(i,g,m),t.assignFinalMaterial(g),a.push(g)}for(let u=0,f=a.length;u<f;u++)t.associations.set(a[u],{meshes:e,primitives:u});if(a.length===1)return s.extensions&&_i(i,a[0],s),a[0];const c=new Si;s.extensions&&_i(i,c,s),t.associations.set(c,{meshes:e});for(let u=0,f=a.length;u<f;u++)c.add(a[u]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Fi(Gt.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new ro(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),zn(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),r=i,o=[],A=[];for(let h=0,d=r.length;h<d;h++){const a=r[h];if(a){o.push(a);const c=new ze;s!==null&&c.fromArray(s.array,h*16),A.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new Ac(o,A)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,r=[],o=[],A=[],h=[],d=[];for(let a=0,c=i.channels.length;a<c;a++){const u=i.channels[a],f=i.samplers[u.sampler],p=u.target,m=p.node,g=i.parameters!==void 0?i.parameters[f.input]:f.input,B=i.parameters!==void 0?i.parameters[f.output]:f.output;p.node!==void 0&&(r.push(this.getDependency("node",m)),o.push(this.getDependency("accessor",g)),A.push(this.getDependency("accessor",B)),h.push(f),d.push(p))}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(A),Promise.all(h),Promise.all(d)]).then(function(a){const c=a[0],u=a[1],f=a[2],p=a[3],m=a[4],g=[];for(let B=0,I=c.length;B<I;B++){const _=c[B],C=u[B],E=f[B],v=p[B],x=m[B];if(_===void 0)continue;_.updateMatrix&&_.updateMatrix();const w=n._createAnimationTracks(_,C,E,v,x);if(w)for(let D=0;D<w.length;D++)g.push(w[D])}return new lc(s,void 0,g)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const r=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&r.traverse(function(o){if(o.isMesh)for(let A=0,h=i.weights.length;A<h;A++)o.morphTargetInfluences[A]=i.weights[A]}),r})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),r=[],o=i.children||[];for(let h=0,d=o.length;h<d;h++)r.push(n.getDependency("node",o[h]));const A=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(r),A]).then(function(h){const d=h[0],a=h[1],c=h[2];c!==null&&d.traverse(function(u){u.isSkinnedMesh&&u.bind(c,Vf)});for(let u=0,f=a.length;u<f;u++)d.add(a[u]);return d})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],r=s.name?i.createUniqueName(s.name):"",o=[],A=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return A&&o.push(A),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(h){return i._getNodeRef(i.cameraCache,s.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){o.push(h)}),this.nodeCache[e]=Promise.all(o).then(function(h){let d;if(s.isBone===!0?d=new Ba:h.length>1?d=new Si:h.length===1?d=h[0]:d=new Ys,d!==h[0])for(let a=0,c=h.length;a<c;a++)d.add(h[a]);if(s.name&&(d.userData.name=s.name,d.name=r),zn(d,s),s.extensions&&_i(n,d,s),s.matrix!==void 0){const a=new ze;a.fromArray(s.matrix),d.applyMatrix4(a)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return i.associations.has(d)||i.associations.set(d,{}),i.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new Si;n.name&&(s.name=i.createUniqueName(n.name)),zn(s,n),n.extensions&&_i(t,s,n);const r=n.nodes||[],o=[];for(let A=0,h=r.length;A<h;A++)o.push(i.getDependency("node",r[A]));return Promise.all(o).then(function(A){for(let d=0,a=A.length;d<a;d++)s.add(A[d]);const h=d=>{const a=new Map;for(const[c,u]of i.associations)(c instanceof Vs||c instanceof or)&&a.set(c,u);return d.traverse(c=>{const u=i.associations.get(c);u!=null&&a.set(c,u)}),a};return i.associations=h(s),s})}_createAnimationTracks(e,t,n,i,s){const r=[],o=e.name?e.name:e.uuid,A=[];ti[s.path]===ti.weights?e.traverse(function(c){c.morphTargetInfluences&&A.push(c.name?c.name:c.uuid)}):A.push(o);let h;switch(ti[s.path]){case ti.weights:h=_a;break;case ti.rotation:h=Ea;break;case ti.position:case ti.scale:h=Ca;break;default:switch(n.itemSize){case 1:h=_a;break;case 2:case 3:default:h=Ca;break}break}const d=i.interpolation!==void 0?Hf[i.interpolation]:cc,a=this._getArrayFromAccessor(n);for(let c=0,u=A.length;c<u;c++){const f=new h(A[c]+"."+ti[s.path],t.array,a,d);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),r.push(f)}return r}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=wa(t.constructor),i=new Float32Array(t.length);for(let s=0,r=t.length;s<r;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Ea?Nf:vc;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function jf(l,e,t){const n=e.attributes,i=new rd;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],A=o.min,h=o.max;if(A!==void 0&&h!==void 0){if(i.set(new Qe(A[0],A[1],A[2]),new Qe(h[0],h[1],h[2])),o.normalized){const d=wa(as[o.componentType]);i.min.multiplyScalar(d),i.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new Qe,A=new Qe;for(let h=0,d=s.length;h<d;h++){const a=s[h];if(a.POSITION!==void 0){const c=t.json.accessors[a.POSITION],u=c.min,f=c.max;if(u!==void 0&&f!==void 0){if(A.setX(Math.max(Math.abs(u[0]),Math.abs(f[0]))),A.setY(Math.max(Math.abs(u[1]),Math.abs(f[1]))),A.setZ(Math.max(Math.abs(u[2]),Math.abs(f[2]))),c.normalized){const p=wa(as[c.componentType]);A.multiplyScalar(p)}o.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}l.boundingBox=i;const r=new od;i.getCenter(r.center),r.radius=i.min.distanceTo(i.max)/2,l.boundingSphere=r}function SA(l,e,t){const n=e.attributes,i=[];function s(r,o){return t.getDependency("accessor",r).then(function(A){l.setAttribute(o,A)})}for(const r in n){const o=va[r]||r.toLowerCase();o in l.attributes||i.push(s(n[r],o))}if(e.indices!==void 0&&!l.index){const r=t.getDependency("accessor",e.indices).then(function(o){l.setIndex(o)});i.push(r)}return zn(l,e),jf(l,e,t),Promise.all(i).then(function(){return e.targets!==void 0?zf(l,e.targets,t):l})}var Wf=Object.defineProperty,Zf=(l,e,t)=>e in l?Wf(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,yo=(l,e,t)=>(Zf(l,typeof e!="symbol"?e+"":e,t),t);class $f extends ki{constructor(e){super(e)}load(e,t,n,i){const s=new Cn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,r=>{if(typeof r!="string")throw new Error("unsupported data type");const o=JSON.parse(r),A=this.parse(o);t&&t(A)},n,i)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new ep(e)}}class ep{constructor(e){yo(this,"data"),yo(this,"isFont",!0),yo(this,"type","Font"),this.data=e}generateShapes(e,t=100,n){const i=[],s={letterSpacing:0,lineHeight:1,...n},r=tp(e,t,this.data,s);for(let o=0,A=r.length;o<A;o++)Array.prototype.push.apply(i,r[o].toShapes(!1));return i}}function tp(l,e,t,n){const i=Array.from(l),s=e/t.resolution,r=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,o=[];let A=0,h=0;for(let d=0;d<i.length;d++){const a=i[d];if(a===`
`)A=0,h-=r*n.lineHeight;else{const c=np(a,s,A,h,t);c&&(A+=c.offsetX+n.letterSpacing,o.push(c.path))}}return o}function np(l,e,t,n,i){const s=i.glyphs[l]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+l+'" does not exists in font family '+i.familyName+".");return}const r=new si;let o,A,h,d,a,c,u,f;if(s.o){const p=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let m=0,g=p.length;m<g;)switch(p[m++]){case"m":o=parseInt(p[m++])*e+t,A=parseInt(p[m++])*e+n,r.moveTo(o,A);break;case"l":o=parseInt(p[m++])*e+t,A=parseInt(p[m++])*e+n,r.lineTo(o,A);break;case"q":h=parseInt(p[m++])*e+t,d=parseInt(p[m++])*e+n,a=parseInt(p[m++])*e+t,c=parseInt(p[m++])*e+n,r.quadraticCurveTo(a,c,h,d);break;case"b":h=parseInt(p[m++])*e+t,d=parseInt(p[m++])*e+n,a=parseInt(p[m++])*e+t,c=parseInt(p[m++])*e+n,u=parseInt(p[m++])*e+t,f=parseInt(p[m++])*e+n,r.bezierCurveTo(a,c,u,f,h,d);break}}return{offsetX:s.ha*e,path:r}}class ip extends or{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ir,this.minFilter=ir,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sp{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:i,msg:s,transfer:r}=this.queue.shift();this.workersResolve[e]=i,this.workers[e].postMessage(s,r)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const i=this._getIdleWorker();i!==-1?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=n,this.workers[i].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const wc=0,FA=2,rp=0,op=0,ap=2,Ap=0,lp=0,cp=1,xa=2,hp=0,xc=1,up=10,dp=64,Mc=0,Tc=9,Qc=15,Dc=16,bc=22,Sc=37,Fc=43,Rc=76,Oc=83,Lc=97,Gc=100,Pc=103,kc=109,Uc=165,Nc=166;class fp{constructor(){this.vkFormat=Mc,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=wc,this.levels=[],this.dataFormatDescriptor=[{vendorId:op,descriptorType:rp,descriptorBlockSize:0,versionNumber:ap,colorModel:Ap,colorPrimaries:xc,transferFunction:xa,flags:lp,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ws{constructor(e,t,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=i,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),n=e+2**32*t;return this._offset+=8,n}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}const Qt=[171,75,84,88,32,50,48,187,13,10,26,10];function RA(l){return typeof TextDecoder<"u"?new TextDecoder().decode(l):Buffer.from(l).toString("utf8")}function pp(l){const e=new Uint8Array(l.buffer,l.byteOffset,Qt.length);if(e[0]!==Qt[0]||e[1]!==Qt[1]||e[2]!==Qt[2]||e[3]!==Qt[3]||e[4]!==Qt[4]||e[5]!==Qt[5]||e[6]!==Qt[6]||e[7]!==Qt[7]||e[8]!==Qt[8]||e[9]!==Qt[9]||e[10]!==Qt[10]||e[11]!==Qt[11])throw new Error("Missing KTX 2.0 identifier.");const t=new fp,n=17*Uint32Array.BYTES_PER_ELEMENT,i=new ws(l,Qt.length,n,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32();const s=i._nextUint32();t.supercompressionScheme=i._nextUint32();const r=i._nextUint32(),o=i._nextUint32(),A=i._nextUint32(),h=i._nextUint32(),d=i._nextUint64(),a=i._nextUint64(),c=s*3*8,u=new ws(l,Qt.length+n,c,!0);for(let ee=0;ee<s;ee++)t.levels.push({levelData:new Uint8Array(l.buffer,l.byteOffset+u._nextUint64(),u._nextUint64()),uncompressedByteLength:u._nextUint64()});const f=new ws(l,r,o,!0),p={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},B=(p.descriptorBlockSize/4-6)/4;for(let ee=0;ee<B;ee++){const ae={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};ae.channelType&dp?(ae.sampleLower=f._nextInt32(),ae.sampleUpper=f._nextInt32()):(ae.sampleLower=f._nextUint32(),ae.sampleUpper=f._nextUint32()),p.samples[ee]=ae}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(p);const I=new ws(l,A,h,!0);for(;I._offset<h;){const ee=I._nextUint32(),ae=I._scan(ee),W=RA(ae);if(t.keyValue[W]=I._nextUint8Array(ee-ae.byteLength-1),W.match(/^ktx/i)){const Ee=RA(t.keyValue[W]);t.keyValue[W]=Ee.substring(0,Ee.lastIndexOf("\0"))}const _e=ee%4?4-ee%4:0;I._skip(_e)}if(a<=0)return t;const _=new ws(l,d,a,!0),C=_._nextUint16(),E=_._nextUint16(),v=_._nextUint32(),x=_._nextUint32(),w=_._nextUint32(),D=_._nextUint32(),G=[];for(let ee=0;ee<s;ee++)G.push({imageFlags:_._nextUint32(),rgbSliceByteOffset:_._nextUint32(),rgbSliceByteLength:_._nextUint32(),alphaSliceByteOffset:_._nextUint32(),alphaSliceByteLength:_._nextUint32()});const O=d+_._offset,T=O+v,b=T+x,F=b+w,U=new Uint8Array(l.buffer,l.byteOffset+O,v),te=new Uint8Array(l.buffer,l.byteOffset+T,x),j=new Uint8Array(l.buffer,l.byteOffset+b,w),J=new Uint8Array(l.buffer,l.byteOffset+F,D);return t.globalData={endpointCount:C,selectorCount:E,imageDescs:G,endpointsData:U,selectorsData:te,tablesData:j,extendedData:J},t}let xs,Jn,Ma;const vo={env:{emscripten_notify_memory_growth:function(l){Ma=new Uint8Array(Jn.exports.memory.buffer)}}};class gp{init(){return xs||(typeof fetch<"u"?xs=fetch("data:application/wasm;base64,"+OA).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,vo)).then(this._init):xs=WebAssembly.instantiate(Buffer.from(OA,"base64"),vo).then(this._init),xs)}_init(e){Jn=e.instance,vo.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Jn)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,i=Jn.exports.malloc(n);Ma.set(e,i),t=t||Number(Jn.exports.ZSTD_findDecompressedSize(i,n));const s=Jn.exports.malloc(t),r=Jn.exports.ZSTD_decompress(s,t,i,n),o=Ma.slice(s,s+r);return Jn.exports.free(i),Jn.exports.free(s),o}}const OA="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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";class mp extends ao{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ad),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bp extends ao{constructor(e,t,n,i,s,r){super(e,t,n,s,r),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=sr}}var Cp=Object.defineProperty,_p=(l,e,t)=>e in l?Cp(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,wr=(l,e,t)=>(_p(l,typeof e!="symbol"?e+"":e,t),t);const Hc=3e3,Jc=3001,LA="",Ep="display-p3",Ip="display-p3-linear",yp="srgb-linear",ja="srgb",wo=new WeakMap;let xo=0,Mo;const vp=(()=>{const l=class extends ki{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new sp,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new Cn(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const n=t.loadAsync("basis_transcoder.js"),i=new Cn(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const s=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,s]).then(([r,o])=>{const A=l.BasisWorker.toString(),h=["/* constants */","let _EngineFormat = "+JSON.stringify(l.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(l.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(l.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",A.substring(A.indexOf("{")+1,A.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h])),this.transcoderBinary=o,this.workerPool.setWorkerCreator(()=>{const d=new Worker(this.workerSourceURL),a=this.transcoderBinary.slice(0);return d.postMessage({type:"init",config:this.workerConfig,transcoderBinary:a},[a]),d})}),xo>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),xo++}return this.transcoderPending}load(t,n,i,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new Cn(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(t,o=>{if(wo.has(o))return wo.get(o).promise.then(n).catch(s);this._createTexture(o).then(A=>n?n(A):null).catch(s)},i,s)}_createTextureFrom(t,n){const{faces:i,width:s,height:r,format:o,type:A,error:h,dfdFlags:d}=t;if(A==="error")return Promise.reject(h);let a;if(n.faceCount===6)a=new mp(i,o,An);else{const u=i[0].mipmaps;a=n.layerCount>1?new Bp(u,s,r,n.layerCount,o,An):new ao(u,s,r,o,An)}a.minFilter=i[0].mipmaps.length===1?Rn:Va,a.magFilter=Rn,a.generateMipmaps=!1,a.needsUpdate=!0;const c=zc(n);return"colorSpace"in a?a.colorSpace=c:a.encoding=c===ja?Jc:Hc,a.premultiplyAlpha=!!(d&cp),a}async _createTexture(t,n={}){const i=pp(new Uint8Array(t));if(i.vkFormat!==Mc)return xp(i);const s=n,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:s},[t])).then(o=>this._createTextureFrom(o.data,i));return wo.set(t,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),xo--,this}};let e=l;return wr(e,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),wr(e,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),wr(e,"EngineFormat",{RGBAFormat:Qi,RGBA_ASTC_4x4_Format:md,RGBA_BPTC_Format:gd,RGBA_ETC2_EAC_Format:pd,RGBA_PVRTC_4BPPV1_Format:fd,RGBA_S3TC_DXT5_Format:dd,RGB_ETC1_Format:ud,RGB_ETC2_Format:hd,RGB_PVRTC_4BPPV1_Format:cd,RGB_S3TC_DXT1_Format:ld}),wr(e,"BasisWorker",function(){let t,n,i;const s=_EngineFormat,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",function(m){const g=m.data;switch(g.type){case"init":t=g.config,A(g.transcoderBinary);break;case"transcode":n.then(()=>{try{const{faces:B,buffers:I,width:_,height:C,hasAlpha:E,format:v,dfdFlags:x}=h(g.buffer);self.postMessage({type:"transcode",id:g.id,faces:B,width:_,height:C,hasAlpha:E,format:v,dfdFlags:x},I)}catch(B){console.error(B),self.postMessage({type:"error",id:g.id,error:B.message})}});break}});function A(m){n=new Promise(g=>{i={wasmBinary:m,onRuntimeInitialized:g},BASIS(i)}).then(()=>{i.initializeBasis(),i.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function h(m){const g=new i.KTX2File(new Uint8Array(m));function B(){g.close(),g.delete()}if(!g.isValid())throw B(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const I=g.isUASTC()?o.UASTC_4x4:o.ETC1S,_=g.getWidth(),C=g.getHeight(),E=g.getLayers()||1,v=g.getLevels(),x=g.getFaces(),w=g.getHasAlpha(),D=g.getDFDFlags(),{transcoderFormat:G,engineFormat:O}=u(I,_,C,w);if(!_||!C||!v)throw B(),new Error("THREE.KTX2Loader:	Invalid texture");if(!g.startTranscoding())throw B(),new Error("THREE.KTX2Loader: .startTranscoding failed");const T=[],b=[];for(let F=0;F<x;F++){const U=[];for(let te=0;te<v;te++){const j=[];let J,ee;for(let W=0;W<E;W++){const _e=g.getImageLevelInfo(te,W,F);F===0&&te===0&&W===0&&(_e.origWidth%4!==0||_e.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),v>1?(J=_e.origWidth,ee=_e.origHeight):(J=_e.width,ee=_e.height);const Ee=new Uint8Array(g.getImageTranscodedSizeInBytes(te,W,0,G));if(!g.transcodeImage(Ee,te,W,F,G,0,-1,-1))throw B(),new Error("THREE.KTX2Loader: .transcodeImage failed.");j.push(Ee)}const ae=p(j);U.push({data:ae,width:J,height:ee}),b.push(ae.buffer)}T.push({mipmaps:U,width:_,height:C,format:O})}return B(),{faces:T,buffers:b,width:_,height:C,hasAlpha:w,format:O,dfdFlags:D}}const d=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[s.RGB_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],a=d.sort(function(m,g){return m.priorityETC1S-g.priorityETC1S}),c=d.sort(function(m,g){return m.priorityUASTC-g.priorityUASTC});function u(m,g,B,I){let _,C;const E=m===o.ETC1S?a:c;for(let v=0;v<E.length;v++){const x=E[v];if(t[x.if]&&x.basisFormat.includes(m)&&!(I&&x.transcoderFormat.length<2)&&!(x.needsPowerOfTwo&&!(f(g)&&f(B))))return _=x.transcoderFormat[I?1:0],C=x.engineFormat[I?1:0],{transcoderFormat:_,engineFormat:C}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),_=r.RGBA32,C=s.RGBAFormat,{transcoderFormat:_,engineFormat:C}}function f(m){return m<=2?!0:(m&m-1)===0&&m!==0}function p(m){if(m.length===1)return m[0];let g=0;for(let _=0;_<m.length;_++){const C=m[_];g+=C.byteLength}const B=new Uint8Array(g);let I=0;for(let _=0;_<m.length;_++){const C=m[_];B.set(C,I),I+=C.byteLength}return B}}),e})(),wp=new Set([Qi,Js,es]),To={[kc]:Qi,[Lc]:Qi,[Sc]:Qi,[Fc]:Qi,[Pc]:Js,[Oc]:Js,[Dc]:Js,[bc]:Js,[Gc]:es,[Rc]:es,[Qc]:es,[Tc]:es,[Nc]:wA,[Uc]:wA},Qo={[kc]:Fn,[Lc]:St,[Sc]:An,[Fc]:An,[Pc]:Fn,[Oc]:St,[Dc]:An,[bc]:An,[Gc]:Fn,[Rc]:St,[Qc]:An,[Tc]:An,[Nc]:An,[Uc]:An};async function xp(l){const{vkFormat:e}=l;if(To[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;l.supercompressionScheme===FA&&(Mo||(Mo=new Promise(async r=>{const o=new gp;await o.init(),r(o)})),t=await Mo);const n=[];for(let r=0;r<l.levels.length;r++){const o=Math.max(1,l.pixelWidth>>r),A=Math.max(1,l.pixelHeight>>r),h=l.pixelDepth?Math.max(1,l.pixelDepth>>r):0,d=l.levels[r];let a;if(l.supercompressionScheme===wc)a=d.levelData;else if(l.supercompressionScheme===FA)a=t.decode(d.levelData,d.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let c;Qo[e]===Fn?c=new Float32Array(a.buffer,a.byteOffset,a.byteLength/Float32Array.BYTES_PER_ELEMENT):Qo[e]===St?c=new Uint16Array(a.buffer,a.byteOffset,a.byteLength/Uint16Array.BYTES_PER_ELEMENT):c=a,n.push({data:c,width:o,height:A,depth:h})}let i;if(wp.has(To[e]))i=l.pixelDepth===0?new Ad(n[0].data,l.pixelWidth,l.pixelHeight):new ip(n[0].data,l.pixelWidth,l.pixelHeight,l.pixelDepth);else{if(l.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");i=new ao(n,l.pixelWidth,l.pixelHeight)}i.mipmaps=n,i.type=Qo[e],i.format=To[e],i.needsUpdate=!0;const s=zc(l);return"colorSpace"in i?i.colorSpace=s:i.encoding=s===ja?Jc:Hc,Promise.resolve(i)}function zc(l){const e=l.dataFormatDescriptor[0];return e.colorPrimaries===xc?e.transferFunction===xa?ja:yp:e.colorPrimaries===up?e.transferFunction===xa?Ep:Ip:(e.colorPrimaries===hp||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),LA)}class Mp extends hc{constructor(e){super(e),this.type=St}parse(e){const r=function(x,w){switch(x){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(w||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(w||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(w||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(w||""))}},d=`
`,a=function(x,w,D){w=w||1024;let O=x.pos,T=-1,b=0,F="",U=String.fromCharCode.apply(null,new Uint16Array(x.subarray(O,O+128)));for(;0>(T=U.indexOf(d))&&b<w&&O<x.byteLength;)F+=U,b+=U.length,O+=128,U+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(O,O+128)));return-1<T?(x.pos+=b+T+1,F+U.slice(0,T)):!1},c=function(x){const w=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*FORMAT=(\S+)\s*$/,T=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,b={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let F,U;for((x.pos>=x.byteLength||!(F=a(x)))&&r(1,"no header found"),(U=F.match(w))||r(3,"bad initial token"),b.valid|=1,b.programtype=U[1],b.string+=F+`
`;F=a(x),F!==!1;){if(b.string+=F+`
`,F.charAt(0)==="#"){b.comments+=F+`
`;continue}if((U=F.match(D))&&(b.gamma=parseFloat(U[1])),(U=F.match(G))&&(b.exposure=parseFloat(U[1])),(U=F.match(O))&&(b.valid|=2,b.format=U[1]),(U=F.match(T))&&(b.valid|=4,b.height=parseInt(U[1],10),b.width=parseInt(U[2],10)),b.valid&2&&b.valid&4)break}return b.valid&2||r(3,"missing format specifier"),b.valid&4||r(3,"missing image size specifier"),b},u=function(x,w,D){const G=w;if(G<8||G>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);G!==(x[2]<<8|x[3])&&r(3,"wrong scanline width");const O=new Uint8Array(4*w*D);O.length||r(4,"unable to allocate buffer space");let T=0,b=0;const F=4*G,U=new Uint8Array(4),te=new Uint8Array(F);let j=D;for(;j>0&&b<x.byteLength;){b+4>x.byteLength&&r(1),U[0]=x[b++],U[1]=x[b++],U[2]=x[b++],U[3]=x[b++],(U[0]!=2||U[1]!=2||(U[2]<<8|U[3])!=G)&&r(3,"bad rgbe scanline format");let J=0,ee;for(;J<F&&b<x.byteLength;){ee=x[b++];const W=ee>128;if(W&&(ee-=128),(ee===0||J+ee>F)&&r(3,"bad scanline data"),W){const _e=x[b++];for(let Ee=0;Ee<ee;Ee++)te[J++]=_e}else te.set(x.subarray(b,b+ee),J),J+=ee,b+=ee}const ae=G;for(let W=0;W<ae;W++){let _e=0;O[T]=te[W+_e],_e+=G,O[T+1]=te[W+_e],_e+=G,O[T+2]=te[W+_e],_e+=G,O[T+3]=te[W+_e],T+=4}j--}return O},f=function(x,w,D,G){const O=x[w+3],T=Math.pow(2,O-128)/255;D[G+0]=x[w+0]*T,D[G+1]=x[w+1]*T,D[G+2]=x[w+2]*T,D[G+3]=1},p=function(x,w,D,G){const O=x[w+3],T=Math.pow(2,O-128)/255;D[G+0]=ts.toHalfFloat(Math.min(x[w+0]*T,65504)),D[G+1]=ts.toHalfFloat(Math.min(x[w+1]*T,65504)),D[G+2]=ts.toHalfFloat(Math.min(x[w+2]*T,65504)),D[G+3]=ts.toHalfFloat(1)},m=new Uint8Array(e);m.pos=0;const g=c(m),B=g.width,I=g.height,_=u(m.subarray(m.pos),B,I);let C,E,v;switch(this.type){case Fn:v=_.length/4;const x=new Float32Array(v*4);for(let D=0;D<v;D++)f(_,D*4,x,D*4);C=x,E=Fn;break;case St:v=_.length/4;const w=new Uint16Array(v*4);for(let D=0;D<v;D++)p(_,D*4,w,D*4);C=w,E=St;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:B,height:I,data:C,header:g.string,gamma:g.gamma,exposure:g.exposure,type:E}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(r,o){switch(r.type){case Fn:case St:"colorSpace"in r?r.colorSpace="srgb-linear":r.encoding=3e3,r.minFilter=Rn,r.magFilter=Rn,r.generateMipmaps=!1,r.flipY=!0;break}t&&t(r,o)}return super.load(e,s,n,i)}}const Ms=gc>=152;class Tp extends hc{constructor(e){super(e),this.type=St}parse(e){const w=Math.pow(2.7182818,2.2);function D(y,Q){for(var k=0,K=0;K<65536;++K)(K==0||y[K>>3]&1<<(K&7))&&(Q[k++]=K);for(var q=k-1;k<65536;)Q[k++]=0;return q}function G(y){for(var Q=0;Q<16384;Q++)y[Q]={},y[Q].len=0,y[Q].lit=0,y[Q].p=null}const O={l:0,c:0,lc:0};function T(y,Q,k,K,q){for(;k<y;)Q=Q<<8|Ir(K,q),k+=8;k-=y,O.l=Q>>k&(1<<y)-1,O.c=Q,O.lc=k}const b=new Array(59);function F(y){for(var Q=0;Q<=58;++Q)b[Q]=0;for(var Q=0;Q<65537;++Q)b[y[Q]]+=1;for(var k=0,Q=58;Q>0;--Q){var K=k+b[Q]>>1;b[Q]=k,k=K}for(var Q=0;Q<65537;++Q){var q=y[Q];q>0&&(y[Q]=q|b[q]++<<6)}}function U(y,Q,k,K,q,V,se){for(var ne=k,ce=0,Ae=0;q<=V;q++){if(ne.value-k.value>K)return!1;T(6,ce,Ae,y,ne);var he=O.l;if(ce=O.c,Ae=O.lc,se[q]=he,he==63){if(ne.value-k.value>K)throw"Something wrong with hufUnpackEncTable";T(8,ce,Ae,y,ne);var oe=O.l+6;if(ce=O.c,Ae=O.lc,q+oe>V+1)throw"Something wrong with hufUnpackEncTable";for(;oe--;)se[q++]=0;q--}else if(he>=59){var oe=he-59+2;if(q+oe>V+1)throw"Something wrong with hufUnpackEncTable";for(;oe--;)se[q++]=0;q--}}F(se)}function te(y){return y&63}function j(y){return y>>6}function J(y,Q,k,K){for(;Q<=k;Q++){var q=j(y[Q]),V=te(y[Q]);if(q>>V)throw"Invalid table entry";if(V>14){var se=K[q>>V-14];if(se.len)throw"Invalid table entry";if(se.lit++,se.p){var ne=se.p;se.p=new Array(se.lit);for(var ce=0;ce<se.lit-1;++ce)se.p[ce]=ne[ce]}else se.p=new Array(1);se.p[se.lit-1]=Q}else if(V)for(var Ae=0,ce=1<<14-V;ce>0;ce--){var se=K[(q<<14-V)+Ae];if(se.len||se.p)throw"Invalid table entry";se.len=V,se.lit=Q,Ae++}}return!0}const ee={c:0,lc:0};function ae(y,Q,k,K){y=y<<8|Ir(k,K),Q+=8,ee.c=y,ee.lc=Q}const W={c:0,lc:0};function _e(y,Q,k,K,q,V,se,ne,ce,Ae){if(y==Q){K<8&&(ae(k,K,q,se),k=ee.c,K=ee.lc),K-=8;var he=k>>K,he=new Uint8Array([he])[0];if(ce.value+he>Ae)return!1;for(var oe=ne[ce.value-1];he-- >0;)ne[ce.value++]=oe}else if(ce.value<Ae)ne[ce.value++]=y;else return!1;W.c=k,W.lc=K}function Ee(y){return y&65535}function N(y){var Q=Ee(y);return Q>32767?Q-65536:Q}const P={a:0,b:0};function R(y,Q){var k=N(y),K=N(Q),q=K,V=k+(q&1)+(q>>1),se=V,ne=V-q;P.a=se,P.b=ne}function S(y,Q){var k=Ee(y),K=Ee(Q),q=k-(K>>1)&65535,V=K+q-32768&65535;P.a=V,P.b=q}function Z(y,Q,k,K,q,V,se){for(var ne=se<16384,ce=k>q?q:k,Ae=1,he;Ae<=ce;)Ae<<=1;for(Ae>>=1,he=Ae,Ae>>=1;Ae>=1;){for(var oe=0,nt=oe+V*(q-he),Ie=V*Ae,ye=V*he,xe=K*Ae,Te=K*he,He,qe,pt,Tt;oe<=nt;oe+=ye){for(var Ve=oe,In=oe+K*(k-he);Ve<=In;Ve+=Te){var je=Ve+xe,Bt=Ve+Ie,Pn=Bt+xe;ne?(R(y[Ve+Q],y[Bt+Q]),He=P.a,pt=P.b,R(y[je+Q],y[Pn+Q]),qe=P.a,Tt=P.b,R(He,qe),y[Ve+Q]=P.a,y[je+Q]=P.b,R(pt,Tt),y[Bt+Q]=P.a,y[Pn+Q]=P.b):(S(y[Ve+Q],y[Bt+Q]),He=P.a,pt=P.b,S(y[je+Q],y[Pn+Q]),qe=P.a,Tt=P.b,S(He,qe),y[Ve+Q]=P.a,y[je+Q]=P.b,S(pt,Tt),y[Bt+Q]=P.a,y[Pn+Q]=P.b)}if(k&Ae){var Bt=Ve+Ie;ne?R(y[Ve+Q],y[Bt+Q]):S(y[Ve+Q],y[Bt+Q]),He=P.a,y[Bt+Q]=P.b,y[Ve+Q]=He}}if(q&Ae)for(var Ve=oe,In=oe+K*(k-he);Ve<=In;Ve+=Te){var je=Ve+xe;ne?R(y[Ve+Q],y[je+Q]):S(y[Ve+Q],y[je+Q]),He=P.a,y[je+Q]=P.b,y[Ve+Q]=He}he=Ae,Ae>>=1}return oe}function ie(y,Q,k,K,q,V,se,ne,ce,Ae){for(var he=0,oe=0,nt=ne,Ie=Math.trunc(q.value+(V+7)/8);q.value<Ie;)for(ae(he,oe,k,q),he=ee.c,oe=ee.lc;oe>=14;){var ye=he>>oe-14&16383,xe=Q[ye];if(xe.len)oe-=xe.len,_e(xe.lit,se,he,oe,k,K,q,ce,Ae,nt),he=W.c,oe=W.lc;else{if(!xe.p)throw"hufDecode issues";var Te;for(Te=0;Te<xe.lit;Te++){for(var He=te(y[xe.p[Te]]);oe<He&&q.value<Ie;)ae(he,oe,k,q),he=ee.c,oe=ee.lc;if(oe>=He&&j(y[xe.p[Te]])==(he>>oe-He&(1<<He)-1)){oe-=He,_e(xe.p[Te],se,he,oe,k,K,q,ce,Ae,nt),he=W.c,oe=W.lc;break}}if(Te==xe.lit)throw"hufDecode issues"}}var qe=8-V&7;for(he>>=qe,oe-=qe;oe>0;){var xe=Q[he<<14-oe&16383];if(xe.len)oe-=xe.len,_e(xe.lit,se,he,oe,k,K,q,ce,Ae,nt),he=W.c,oe=W.lc;else throw"hufDecode issues"}return!0}function X(y,Q,k,K,q,V){var se={value:0},ne=k.value,ce=It(Q,k),Ae=It(Q,k);k.value+=4;var he=It(Q,k);if(k.value+=4,ce<0||ce>=65537||Ae<0||Ae>=65537)throw"Something wrong with HUF_ENCSIZE";var oe=new Array(65537),nt=new Array(16384);G(nt);var Ie=K-(k.value-ne);if(U(y,Q,k,Ie,ce,Ae,oe),he>8*(K-(k.value-ne)))throw"Something wrong with hufUncompress";J(oe,ce,Ae,nt),ie(oe,nt,y,Q,k,he,Ae,V,q,se)}function ue(y,Q,k){for(var K=0;K<k;++K)Q[K]=y[Q[K]]}function de(y){for(var Q=1;Q<y.length;Q++){var k=y[Q-1]+y[Q]-128;y[Q]=k}}function pe(y,Q){for(var k=0,K=Math.floor((y.length+1)/2),q=0,V=y.length-1;!(q>V||(Q[q++]=y[k++],q>V));)Q[q++]=y[K++]}function $(y){for(var Q=y.byteLength,k=new Array,K=0,q=new DataView(y);Q>0;){var V=q.getInt8(K++);if(V<0){var se=-V;Q-=se+1;for(var ne=0;ne<se;ne++)k.push(q.getUint8(K++))}else{var se=V;Q-=2;for(var ce=q.getUint8(K++),ne=0;ne<se+1;ne++)k.push(ce)}}return k}function re(y,Q,k,K,q,V){var je=new DataView(V.buffer),se=k[y.idx[0]].width,ne=k[y.idx[0]].height,ce=3,Ae=Math.floor(se/8),he=Math.ceil(se/8),oe=Math.ceil(ne/8),nt=se-(he-1)*8,Ie=ne-(oe-1)*8,ye={value:0},xe=new Array(ce),Te=new Array(ce),He=new Array(ce),qe=new Array(ce),pt=new Array(ce);for(let Je=0;Je<ce;++Je)pt[Je]=Q[y.idx[Je]],xe[Je]=Je<1?0:xe[Je-1]+he*oe,Te[Je]=new Float32Array(64),He[Je]=new Uint16Array(64),qe[Je]=new Uint16Array(he*64);for(let Je=0;Je<oe;++Je){var Tt=8;Je==oe-1&&(Tt=Ie);var Ve=8;for(let et=0;et<he;++et){et==he-1&&(Ve=nt);for(let Ue=0;Ue<ce;++Ue)He[Ue].fill(0),He[Ue][0]=q[xe[Ue]++],Ce(ye,K,He[Ue]),le(He[Ue],Te[Ue]),H(Te[Ue]);L(Te);for(let Ue=0;Ue<ce;++Ue)ge(Te[Ue],qe[Ue],et*64)}let vt=0;for(let et=0;et<ce;++et){const Ue=k[y.idx[et]].type;for(let tn=8*Je;tn<8*Je+Tt;++tn){vt=pt[et][tn];for(let Ci=0;Ci<Ae;++Ci){const zt=Ci*64+(tn&7)*8;je.setUint16(vt+0*2*Ue,qe[et][zt+0],!0),je.setUint16(vt+1*2*Ue,qe[et][zt+1],!0),je.setUint16(vt+2*2*Ue,qe[et][zt+2],!0),je.setUint16(vt+3*2*Ue,qe[et][zt+3],!0),je.setUint16(vt+4*2*Ue,qe[et][zt+4],!0),je.setUint16(vt+5*2*Ue,qe[et][zt+5],!0),je.setUint16(vt+6*2*Ue,qe[et][zt+6],!0),je.setUint16(vt+7*2*Ue,qe[et][zt+7],!0),vt+=8*2*Ue}}if(Ae!=he)for(let tn=8*Je;tn<8*Je+Tt;++tn){const Ci=pt[et][tn]+8*Ae*2*Ue,zt=Ae*64+(tn&7)*8;for(let $n=0;$n<Ve;++$n)je.setUint16(Ci+$n*2*Ue,qe[et][zt+$n],!0)}}}for(var In=new Uint16Array(se),je=new DataView(V.buffer),Bt=0;Bt<ce;++Bt){k[y.idx[Bt]].decoded=!0;var Pn=k[y.idx[Bt]].type;if(k[Bt].type==2)for(var Is=0;Is<ne;++Is){const Je=pt[Bt][Is];for(var en=0;en<se;++en)In[en]=je.getUint16(Je+en*2*Pn,!0);for(var en=0;en<se;++en)je.setFloat32(Je+en*2*Pn,fe(In[en]),!0)}}}function Ce(y,Q,k){for(var K,q=1;q<64;)K=Q[y.value],K==65280?q=64:K>>8==255?q+=K&255:(k[q]=K,q++),y.value++}function le(y,Q){Q[0]=fe(y[0]),Q[1]=fe(y[1]),Q[2]=fe(y[5]),Q[3]=fe(y[6]),Q[4]=fe(y[14]),Q[5]=fe(y[15]),Q[6]=fe(y[27]),Q[7]=fe(y[28]),Q[8]=fe(y[2]),Q[9]=fe(y[4]),Q[10]=fe(y[7]),Q[11]=fe(y[13]),Q[12]=fe(y[16]),Q[13]=fe(y[26]),Q[14]=fe(y[29]),Q[15]=fe(y[42]),Q[16]=fe(y[3]),Q[17]=fe(y[8]),Q[18]=fe(y[12]),Q[19]=fe(y[17]),Q[20]=fe(y[25]),Q[21]=fe(y[30]),Q[22]=fe(y[41]),Q[23]=fe(y[43]),Q[24]=fe(y[9]),Q[25]=fe(y[11]),Q[26]=fe(y[18]),Q[27]=fe(y[24]),Q[28]=fe(y[31]),Q[29]=fe(y[40]),Q[30]=fe(y[44]),Q[31]=fe(y[53]),Q[32]=fe(y[10]),Q[33]=fe(y[19]),Q[34]=fe(y[23]),Q[35]=fe(y[32]),Q[36]=fe(y[39]),Q[37]=fe(y[45]),Q[38]=fe(y[52]),Q[39]=fe(y[54]),Q[40]=fe(y[20]),Q[41]=fe(y[22]),Q[42]=fe(y[33]),Q[43]=fe(y[38]),Q[44]=fe(y[46]),Q[45]=fe(y[51]),Q[46]=fe(y[55]),Q[47]=fe(y[60]),Q[48]=fe(y[21]),Q[49]=fe(y[34]),Q[50]=fe(y[37]),Q[51]=fe(y[47]),Q[52]=fe(y[50]),Q[53]=fe(y[56]),Q[54]=fe(y[59]),Q[55]=fe(y[61]),Q[56]=fe(y[35]),Q[57]=fe(y[36]),Q[58]=fe(y[48]),Q[59]=fe(y[49]),Q[60]=fe(y[57]),Q[61]=fe(y[58]),Q[62]=fe(y[62]),Q[63]=fe(y[63])}function H(y){const Q=.5*Math.cos(.7853975),k=.5*Math.cos(3.14159/16),K=.5*Math.cos(3.14159/8),q=.5*Math.cos(3*3.14159/16),V=.5*Math.cos(5*3.14159/16),se=.5*Math.cos(3*3.14159/8),ne=.5*Math.cos(7*3.14159/16);for(var ce=new Array(4),Ae=new Array(4),he=new Array(4),oe=new Array(4),nt=0;nt<8;++nt){var Ie=nt*8;ce[0]=K*y[Ie+2],ce[1]=se*y[Ie+2],ce[2]=K*y[Ie+6],ce[3]=se*y[Ie+6],Ae[0]=k*y[Ie+1]+q*y[Ie+3]+V*y[Ie+5]+ne*y[Ie+7],Ae[1]=q*y[Ie+1]-ne*y[Ie+3]-k*y[Ie+5]-V*y[Ie+7],Ae[2]=V*y[Ie+1]-k*y[Ie+3]+ne*y[Ie+5]+q*y[Ie+7],Ae[3]=ne*y[Ie+1]-V*y[Ie+3]+q*y[Ie+5]-k*y[Ie+7],he[0]=Q*(y[Ie+0]+y[Ie+4]),he[3]=Q*(y[Ie+0]-y[Ie+4]),he[1]=ce[0]+ce[3],he[2]=ce[1]-ce[2],oe[0]=he[0]+he[1],oe[1]=he[3]+he[2],oe[2]=he[3]-he[2],oe[3]=he[0]-he[1],y[Ie+0]=oe[0]+Ae[0],y[Ie+1]=oe[1]+Ae[1],y[Ie+2]=oe[2]+Ae[2],y[Ie+3]=oe[3]+Ae[3],y[Ie+4]=oe[3]-Ae[3],y[Ie+5]=oe[2]-Ae[2],y[Ie+6]=oe[1]-Ae[1],y[Ie+7]=oe[0]-Ae[0]}for(var ye=0;ye<8;++ye)ce[0]=K*y[16+ye],ce[1]=se*y[16+ye],ce[2]=K*y[48+ye],ce[3]=se*y[48+ye],Ae[0]=k*y[8+ye]+q*y[24+ye]+V*y[40+ye]+ne*y[56+ye],Ae[1]=q*y[8+ye]-ne*y[24+ye]-k*y[40+ye]-V*y[56+ye],Ae[2]=V*y[8+ye]-k*y[24+ye]+ne*y[40+ye]+q*y[56+ye],Ae[3]=ne*y[8+ye]-V*y[24+ye]+q*y[40+ye]-k*y[56+ye],he[0]=Q*(y[ye]+y[32+ye]),he[3]=Q*(y[ye]-y[32+ye]),he[1]=ce[0]+ce[3],he[2]=ce[1]-ce[2],oe[0]=he[0]+he[1],oe[1]=he[3]+he[2],oe[2]=he[3]-he[2],oe[3]=he[0]-he[1],y[0+ye]=oe[0]+Ae[0],y[8+ye]=oe[1]+Ae[1],y[16+ye]=oe[2]+Ae[2],y[24+ye]=oe[3]+Ae[3],y[32+ye]=oe[3]-Ae[3],y[40+ye]=oe[2]-Ae[2],y[48+ye]=oe[1]-Ae[1],y[56+ye]=oe[0]-Ae[0]}function L(y){for(var Q=0;Q<64;++Q){var k=y[0][Q],K=y[1][Q],q=y[2][Q];y[0][Q]=k+1.5747*q,y[1][Q]=k-.1873*K-.4682*q,y[2][Q]=k+1.8556*K}}function ge(y,Q,k){for(var K=0;K<64;++K)Q[k+K]=ts.toHalfFloat(Fe(y[K]))}function Fe(y){return y<=1?Math.sign(y)*Math.pow(Math.abs(y),2.2):Math.sign(y)*Math.pow(w,Math.abs(y)-1)}function Mt(y){return new DataView(y.array.buffer,y.offset.value,y.size)}function Zt(y){var Q=y.viewer.buffer.slice(y.offset.value,y.offset.value+y.size),k=new Uint8Array($(Q)),K=new Uint8Array(k.length);return de(k),pe(k,K),new DataView(K.buffer)}function at(y){var Q=y.array.slice(y.offset.value,y.offset.value+y.size),k=vr(Q),K=new Uint8Array(k.length);return de(k),pe(k,K),new DataView(K.buffer)}function En(y){for(var Q=y.viewer,k={value:y.offset.value},K=new Uint16Array(y.width*y.scanlineBlockSize*(y.channels*y.type)),q=new Uint8Array(8192),V=0,se=new Array(y.channels),ne=0;ne<y.channels;ne++)se[ne]={},se[ne].start=V,se[ne].end=se[ne].start,se[ne].nx=y.width,se[ne].ny=y.lines,se[ne].size=y.type,V+=se[ne].nx*se[ne].ny*se[ne].size;var ce=Cs(Q,k),Ae=Cs(Q,k);if(Ae>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ce<=Ae)for(var ne=0;ne<Ae-ce+1;ne++)q[ne+ce]=Ji(Q,k);var he=new Uint16Array(65536),oe=D(q,he),nt=It(Q,k);X(y.array,Q,k,nt,K,V);for(var ne=0;ne<y.channels;++ne)for(var Ie=se[ne],ye=0;ye<se[ne].size;++ye)Z(K,Ie.start+ye,Ie.nx,Ie.size,Ie.ny,Ie.nx*Ie.size,oe);ue(he,K,V);for(var xe=0,Te=new Uint8Array(K.buffer.byteLength),He=0;He<y.lines;He++)for(var qe=0;qe<y.channels;qe++){var Ie=se[qe],pt=Ie.nx*Ie.size,Tt=new Uint8Array(K.buffer,Ie.end*2,pt*2);Te.set(Tt,xe),xe+=pt*2,Ie.end+=pt}return new DataView(Te.buffer)}function Ni(y){var Q=y.array.slice(y.offset.value,y.offset.value+y.size),k=vr(Q);const K=y.lines*y.channels*y.width,q=y.type==1?new Uint16Array(K):new Uint32Array(K);let V=0,se=0;const ne=new Array(4);for(let ce=0;ce<y.lines;ce++)for(let Ae=0;Ae<y.channels;Ae++){let he=0;switch(y.type){case 1:ne[0]=V,ne[1]=ne[0]+y.width,V=ne[1]+y.width;for(let oe=0;oe<y.width;++oe){const nt=k[ne[0]++]<<8|k[ne[1]++];he+=nt,q[se]=he,se++}break;case 2:ne[0]=V,ne[1]=ne[0]+y.width,ne[2]=ne[1]+y.width,V=ne[2]+y.width;for(let oe=0;oe<y.width;++oe){const nt=k[ne[0]++]<<24|k[ne[1]++]<<16|k[ne[2]++]<<8;he+=nt,q[se]=he,se++}break}}return new DataView(q.buffer)}function ms(y){var Q=y.viewer,k={value:y.offset.value},K=new Uint8Array(y.width*y.lines*(y.channels*y.type*2)),q={version:$t(Q,k),unknownUncompressedSize:$t(Q,k),unknownCompressedSize:$t(Q,k),acCompressedSize:$t(Q,k),dcCompressedSize:$t(Q,k),rleCompressedSize:$t(Q,k),rleUncompressedSize:$t(Q,k),rleRawSize:$t(Q,k),totalAcUncompressedCount:$t(Q,k),totalDcUncompressedCount:$t(Q,k),acCompression:$t(Q,k)};if(q.version<2)throw"EXRLoader.parse: "+Es.compression+" version "+q.version+" is unsupported";for(var V=new Array,se=Cs(Q,k)-2;se>0;){var ne=Gn(Q.buffer,k),ce=Ji(Q,k),Ae=ce>>2&3,he=(ce>>4)-1,oe=new Int8Array([he])[0],nt=Ji(Q,k);V.push({name:ne,index:oe,type:nt,compression:Ae}),se-=ne.length+3}for(var Ie=Es.channels,ye=new Array(y.channels),xe=0;xe<y.channels;++xe){var Te=ye[xe]={},He=Ie[xe];Te.name=He.name,Te.compression=0,Te.decoded=!1,Te.type=He.pixelType,Te.pLinear=He.pLinear,Te.width=y.width,Te.height=y.lines}for(var qe={idx:new Array(3)},pt=0;pt<y.channels;++pt)for(var Te=ye[pt],xe=0;xe<V.length;++xe){var Tt=V[xe];Te.name==Tt.name&&(Te.compression=Tt.compression,Tt.index>=0&&(qe.idx[Tt.index]=pt),Te.offset=pt)}if(q.acCompressedSize>0)switch(q.acCompression){case 0:var je=new Uint16Array(q.totalAcUncompressedCount);X(y.array,Q,k,q.acCompressedSize,je,q.totalAcUncompressedCount);break;case 1:var Ve=y.array.slice(k.value,k.value+q.totalAcUncompressedCount),In=vr(Ve),je=new Uint16Array(In.buffer);k.value+=q.totalAcUncompressedCount;break}if(q.dcCompressedSize>0){var Bt={array:y.array,offset:k,size:q.dcCompressedSize},Pn=new Uint16Array(at(Bt).buffer);k.value+=q.dcCompressedSize}if(q.rleRawSize>0){var Ve=y.array.slice(k.value,k.value+q.rleCompressedSize),In=vr(Ve),Is=$(In.buffer);k.value+=q.rleCompressedSize}for(var en=0,Je=new Array(ye.length),xe=0;xe<Je.length;++xe)Je[xe]=new Array;for(var vt=0;vt<y.lines;++vt)for(var et=0;et<ye.length;++et)Je[et].push(en),en+=ye[et].width*y.type*2;re(qe,Je,ye,je,Pn,K);for(var xe=0;xe<ye.length;++xe){var Te=ye[xe];if(!Te.decoded)switch(Te.compression){case 2:for(var Ue=0,tn=0,vt=0;vt<y.lines;++vt){for(var Ci=Je[xe][Ue],zt=0;zt<Te.width;++zt){for(var $n=0;$n<2*Te.type;++$n)K[Ci++]=Is[tn+$n*Te.width*Te.height];tn++}Ue++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(K.buffer)}function Gn(y,Q){for(var k=new Uint8Array(y),K=0;k[Q.value+K]!=0;)K+=1;var q=new TextDecoder().decode(k.slice(Q.value,Q.value+K));return Q.value=Q.value+K+1,q}function Bs(y,Q,k){var K=new TextDecoder().decode(new Uint8Array(y).slice(Q.value,Q.value+k));return Q.value=Q.value+k,K}function Hi(y,Q){var k=Zn(y,Q),K=It(y,Q);return[k,K]}function Er(y,Q){var k=It(y,Q),K=It(y,Q);return[k,K]}function Zn(y,Q){var k=y.getInt32(Q.value,!0);return Q.value=Q.value+4,k}function It(y,Q){var k=y.getUint32(Q.value,!0);return Q.value=Q.value+4,k}function Ir(y,Q){var k=y[Q.value];return Q.value=Q.value+1,k}function Ji(y,Q){var k=y.getUint8(Q.value);return Q.value=Q.value+1,k}const $t=function(y,Q){let k;return"getBigInt64"in DataView.prototype?k=Number(y.getBigInt64(Q.value,!0)):k=y.getUint32(Q.value+4,!0)+Number(y.getUint32(Q.value,!0)<<32),Q.value+=8,k};function yt(y,Q){var k=y.getFloat32(Q.value,!0);return Q.value+=4,k}function wu(y,Q){return ts.toHalfFloat(yt(y,Q))}function fe(y){var Q=(y&31744)>>10,k=y&1023;return(y>>15?-1:1)*(Q?Q===31?k?NaN:1/0:Math.pow(2,Q-15)*(1+k/1024):6103515625e-14*(k/1024))}function Cs(y,Q){var k=y.getUint16(Q.value,!0);return Q.value+=2,k}function xu(y,Q){return fe(Cs(y,Q))}function Mu(y,Q,k,K){for(var q=k.value,V=[];k.value<q+K-1;){var se=Gn(Q,k),ne=Zn(y,k),ce=Ji(y,k);k.value+=3;var Ae=Zn(y,k),he=Zn(y,k);V.push({name:se,pixelType:ne,pLinear:ce,xSampling:Ae,ySampling:he})}return k.value+=1,V}function Tu(y,Q){var k=yt(y,Q),K=yt(y,Q),q=yt(y,Q),V=yt(y,Q),se=yt(y,Q),ne=yt(y,Q),ce=yt(y,Q),Ae=yt(y,Q);return{redX:k,redY:K,greenX:q,greenY:V,blueX:se,blueY:ne,whiteX:ce,whiteY:Ae}}function Qu(y,Q){var k=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],K=Ji(y,Q);return k[K]}function Du(y,Q){var k=It(y,Q),K=It(y,Q),q=It(y,Q),V=It(y,Q);return{xMin:k,yMin:K,xMax:q,yMax:V}}function bu(y,Q){var k=["INCREASING_Y"],K=Ji(y,Q);return k[K]}function Su(y,Q){var k=yt(y,Q),K=yt(y,Q);return[k,K]}function Fu(y,Q){var k=yt(y,Q),K=yt(y,Q),q=yt(y,Q);return[k,K,q]}function Ru(y,Q,k,K,q){if(K==="string"||K==="stringvector"||K==="iccProfile")return Bs(Q,k,q);if(K==="chlist")return Mu(y,Q,k,q);if(K==="chromaticities")return Tu(y,k);if(K==="compression")return Qu(y,k);if(K==="box2i")return Du(y,k);if(K==="lineOrder")return bu(y,k);if(K==="float")return yt(y,k);if(K==="v2f")return Su(y,k);if(K==="v3f")return Fu(y,k);if(K==="int")return Zn(y,k);if(K==="rational")return Hi(y,k);if(K==="timecode")return Er(y,k);if(K==="preview")return k.value+=q,"skipped";k.value+=q}function Ou(y,Q,k){const K={};if(y.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";K.version=y.getUint8(4);const q=y.getUint8(5);K.spec={singleTile:!!(q&2),longName:!!(q&4),deepFormat:!!(q&8),multiPart:!!(q&16)},k.value=8;for(var V=!0;V;){var se=Gn(Q,k);if(se==0)V=!1;else{var ne=Gn(Q,k),ce=It(y,k),Ae=Ru(y,Q,k,ne,ce);Ae===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ne}'.`):K[se]=Ae}}if((q&-5)!=0)throw console.error("EXRHeader:",K),"THREE.EXRLoader: provided file is currently unsupported.";return K}function Lu(y,Q,k,K,q){const V={size:0,viewer:Q,array:k,offset:K,width:y.dataWindow.xMax-y.dataWindow.xMin+1,height:y.dataWindow.yMax-y.dataWindow.yMin+1,channels:y.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:y.channels[0].pixelType,uncompress:null,getter:null,format:null,[Ms?"colorSpace":"encoding"]:null};switch(y.compression){case"NO_COMPRESSION":V.lines=1,V.uncompress=Mt;break;case"RLE_COMPRESSION":V.lines=1,V.uncompress=Zt;break;case"ZIPS_COMPRESSION":V.lines=1,V.uncompress=at;break;case"ZIP_COMPRESSION":V.lines=16,V.uncompress=at;break;case"PIZ_COMPRESSION":V.lines=32,V.uncompress=En;break;case"PXR24_COMPRESSION":V.lines=16,V.uncompress=Ni;break;case"DWAA_COMPRESSION":V.lines=32,V.uncompress=ms;break;case"DWAB_COMPRESSION":V.lines=256,V.uncompress=ms;break;default:throw"EXRLoader.parse: "+y.compression+" is unsupported"}if(V.scanlineBlockSize=V.lines,V.type==1)switch(q){case Fn:V.getter=xu,V.inputSize=2;break;case St:V.getter=Cs,V.inputSize=2;break}else if(V.type==2)switch(q){case Fn:V.getter=yt,V.inputSize=4;break;case St:V.getter=wu,V.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+V.type+" for "+y.compression+".";V.blockCount=(y.dataWindow.yMax+1)/V.scanlineBlockSize;for(var se=0;se<V.blockCount;se++)$t(Q,K);V.outputChannels=V.channels==3?4:V.channels;const ne=V.width*V.height*V.outputChannels;switch(q){case Fn:V.byteArray=new Float32Array(ne),V.channels<V.outputChannels&&V.byteArray.fill(1,0,ne);break;case St:V.byteArray=new Uint16Array(ne),V.channels<V.outputChannels&&V.byteArray.fill(15360,0,ne);break;default:console.error("THREE.EXRLoader: unsupported type: ",q);break}return V.bytesPerLine=V.width*V.inputSize*V.channels,V.outputChannels==4?V.format=Qi:V.format=es,Ms?V.colorSpace="srgb-linear":V.encoding=3e3,V}const yr=new DataView(e),Gu=new Uint8Array(e),_s={value:0},Es=Ou(yr,e,_s),Re=Lu(Es,yr,Gu,_s,this.type),vA={value:0},Pu={R:0,G:1,B:2,A:3,Y:0};for(let y=0;y<Re.height/Re.scanlineBlockSize;y++){const Q=It(yr,_s);Re.size=It(yr,_s),Re.lines=Q+Re.scanlineBlockSize>Re.height?Re.height-Q:Re.scanlineBlockSize;const K=Re.size<Re.lines*Re.bytesPerLine?Re.uncompress(Re):Mt(Re);_s.value+=Re.size;for(let q=0;q<Re.scanlineBlockSize;q++){const V=q+y*Re.scanlineBlockSize;if(V>=Re.height)break;for(let se=0;se<Re.channels;se++){const ne=Pu[Es.channels[se].name];for(let ce=0;ce<Re.width;ce++){vA.value=(q*(Re.channels*Re.width)+se*Re.width+ce)*Re.inputSize;const Ae=(Re.height-1-V)*(Re.width*Re.outputChannels)+ce*Re.outputChannels+ne;Re.byteArray[Ae]=Re.getter(K,vA)}}}}return{header:Es,width:Re.width,height:Re.height,data:Re.byteArray,format:Re.format,[Ms?"colorSpace":"encoding"]:Re[Ms?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(r,o){Ms?r.colorSpace=o.colorSpace:r.encoding=o.encoding,r.minFilter=Rn,r.magFilter=Rn,r.generateMipmaps=!1,r.flipY=!1,t&&t(r,o)}return super.load(e,s,n,i)}}const Qp="srgb",Dp=(()=>{class l extends ki{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,n,i,s){const r=this,o=new Cn(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(A){try{n(r.parse(A))}catch(h){s?s(h):console.error(h),r.manager.itemError(t)}},i,s)}parse(t){const n=this;function i(N,P){if(N.nodeType!==1)return;const R=C(N);let S=!1,Z=null;switch(N.nodeName){case"svg":P=p(N,P);break;case"style":r(N);break;case"g":P=p(N,P);break;case"path":P=p(N,P),N.hasAttribute("d")&&(Z=s(N));break;case"rect":P=p(N,P),Z=h(N);break;case"polygon":P=p(N,P),Z=d(N);break;case"polyline":P=p(N,P),Z=a(N);break;case"circle":P=p(N,P),Z=c(N);break;case"ellipse":P=p(N,P),Z=u(N);break;case"line":P=p(N,P),Z=f(N);break;case"defs":S=!0;break;case"use":P=p(N,P);const ue=(N.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),de=N.viewportElement.getElementById(ue);de?i(de,P):console.warn("SVGLoader: 'use node' references non-existent node id: "+ue);break}Z&&(P.fill!==void 0&&P.fill!=="none"&&Z.color.setStyle(P.fill,Qp),v(Z,W),T.push(Z),Z.userData={node:N,style:P});const ie=N.childNodes;for(let X=0;X<ie.length;X++){const ue=ie[X];S&&ue.nodeName!=="style"&&ue.nodeName!=="defs"||i(ue,P)}R&&(F.pop(),F.length>0?W.copy(F[F.length-1]):W.identity())}function s(N){const P=new si,R=new we,S=new we,Z=new we;let ie=!0,X=!1;const ue=N.getAttribute("d");if(ue===""||ue==="none")return null;const de=ue.match(/[a-df-z][^a-df-z]*/gi);for(let pe=0,$=de.length;pe<$;pe++){const re=de[pe],Ce=re.charAt(0),le=re.slice(1).trim();ie===!0&&(X=!0,ie=!1);let H;switch(Ce){case"M":H=g(le);for(let L=0,ge=H.length;L<ge;L+=2)R.x=H[L+0],R.y=H[L+1],S.x=R.x,S.y=R.y,L===0?P.moveTo(R.x,R.y):P.lineTo(R.x,R.y),L===0&&Z.copy(R);break;case"H":H=g(le);for(let L=0,ge=H.length;L<ge;L++)R.x=H[L],S.x=R.x,S.y=R.y,P.lineTo(R.x,R.y),L===0&&X===!0&&Z.copy(R);break;case"V":H=g(le);for(let L=0,ge=H.length;L<ge;L++)R.y=H[L],S.x=R.x,S.y=R.y,P.lineTo(R.x,R.y),L===0&&X===!0&&Z.copy(R);break;case"L":H=g(le);for(let L=0,ge=H.length;L<ge;L+=2)R.x=H[L+0],R.y=H[L+1],S.x=R.x,S.y=R.y,P.lineTo(R.x,R.y),L===0&&X===!0&&Z.copy(R);break;case"C":H=g(le);for(let L=0,ge=H.length;L<ge;L+=6)P.bezierCurveTo(H[L+0],H[L+1],H[L+2],H[L+3],H[L+4],H[L+5]),S.x=H[L+2],S.y=H[L+3],R.x=H[L+4],R.y=H[L+5],L===0&&X===!0&&Z.copy(R);break;case"S":H=g(le);for(let L=0,ge=H.length;L<ge;L+=4)P.bezierCurveTo(m(R.x,S.x),m(R.y,S.y),H[L+0],H[L+1],H[L+2],H[L+3]),S.x=H[L+0],S.y=H[L+1],R.x=H[L+2],R.y=H[L+3],L===0&&X===!0&&Z.copy(R);break;case"Q":H=g(le);for(let L=0,ge=H.length;L<ge;L+=4)P.quadraticCurveTo(H[L+0],H[L+1],H[L+2],H[L+3]),S.x=H[L+0],S.y=H[L+1],R.x=H[L+2],R.y=H[L+3],L===0&&X===!0&&Z.copy(R);break;case"T":H=g(le);for(let L=0,ge=H.length;L<ge;L+=2){const Fe=m(R.x,S.x),Mt=m(R.y,S.y);P.quadraticCurveTo(Fe,Mt,H[L+0],H[L+1]),S.x=Fe,S.y=Mt,R.x=H[L+0],R.y=H[L+1],L===0&&X===!0&&Z.copy(R)}break;case"A":H=g(le,[3,4],7);for(let L=0,ge=H.length;L<ge;L+=7){if(H[L+5]==R.x&&H[L+6]==R.y)continue;const Fe=R.clone();R.x=H[L+5],R.y=H[L+6],S.x=R.x,S.y=R.y,o(P,H[L],H[L+1],H[L+2],H[L+3],H[L+4],Fe,R),L===0&&X===!0&&Z.copy(R)}break;case"m":H=g(le);for(let L=0,ge=H.length;L<ge;L+=2)R.x+=H[L+0],R.y+=H[L+1],S.x=R.x,S.y=R.y,L===0?P.moveTo(R.x,R.y):P.lineTo(R.x,R.y),L===0&&Z.copy(R);break;case"h":H=g(le);for(let L=0,ge=H.length;L<ge;L++)R.x+=H[L],S.x=R.x,S.y=R.y,P.lineTo(R.x,R.y),L===0&&X===!0&&Z.copy(R);break;case"v":H=g(le);for(let L=0,ge=H.length;L<ge;L++)R.y+=H[L],S.x=R.x,S.y=R.y,P.lineTo(R.x,R.y),L===0&&X===!0&&Z.copy(R);break;case"l":H=g(le);for(let L=0,ge=H.length;L<ge;L+=2)R.x+=H[L+0],R.y+=H[L+1],S.x=R.x,S.y=R.y,P.lineTo(R.x,R.y),L===0&&X===!0&&Z.copy(R);break;case"c":H=g(le);for(let L=0,ge=H.length;L<ge;L+=6)P.bezierCurveTo(R.x+H[L+0],R.y+H[L+1],R.x+H[L+2],R.y+H[L+3],R.x+H[L+4],R.y+H[L+5]),S.x=R.x+H[L+2],S.y=R.y+H[L+3],R.x+=H[L+4],R.y+=H[L+5],L===0&&X===!0&&Z.copy(R);break;case"s":H=g(le);for(let L=0,ge=H.length;L<ge;L+=4)P.bezierCurveTo(m(R.x,S.x),m(R.y,S.y),R.x+H[L+0],R.y+H[L+1],R.x+H[L+2],R.y+H[L+3]),S.x=R.x+H[L+0],S.y=R.y+H[L+1],R.x+=H[L+2],R.y+=H[L+3],L===0&&X===!0&&Z.copy(R);break;case"q":H=g(le);for(let L=0,ge=H.length;L<ge;L+=4)P.quadraticCurveTo(R.x+H[L+0],R.y+H[L+1],R.x+H[L+2],R.y+H[L+3]),S.x=R.x+H[L+0],S.y=R.y+H[L+1],R.x+=H[L+2],R.y+=H[L+3],L===0&&X===!0&&Z.copy(R);break;case"t":H=g(le);for(let L=0,ge=H.length;L<ge;L+=2){const Fe=m(R.x,S.x),Mt=m(R.y,S.y);P.quadraticCurveTo(Fe,Mt,R.x+H[L+0],R.y+H[L+1]),S.x=Fe,S.y=Mt,R.x=R.x+H[L+0],R.y=R.y+H[L+1],L===0&&X===!0&&Z.copy(R)}break;case"a":H=g(le,[3,4],7);for(let L=0,ge=H.length;L<ge;L+=7){if(H[L+5]==0&&H[L+6]==0)continue;const Fe=R.clone();R.x+=H[L+5],R.y+=H[L+6],S.x=R.x,S.y=R.y,o(P,H[L],H[L+1],H[L+2],H[L+3],H[L+4],Fe,R),L===0&&X===!0&&Z.copy(R)}break;case"Z":case"z":P.currentPath.autoClose=!0,P.currentPath.curves.length>0&&(R.copy(Z),P.currentPath.currentPoint.copy(R),ie=!0);break;default:console.warn(re)}X=!1}return P}function r(N){if(!(!N.sheet||!N.sheet.cssRules||!N.sheet.cssRules.length))for(let P=0;P<N.sheet.cssRules.length;P++){const R=N.sheet.cssRules[P];if(R.type!==1)continue;const S=R.selectorText.split(/,/gm).filter(Boolean).map(Z=>Z.trim());for(let Z=0;Z<S.length;Z++){const ie=Object.fromEntries(Object.entries(R.style).filter(([,X])=>X!==""));b[S[Z]]=Object.assign(b[S[Z]]||{},ie)}}}function o(N,P,R,S,Z,ie,X,ue){if(P==0||R==0){N.lineTo(ue.x,ue.y);return}S=S*Math.PI/180,P=Math.abs(P),R=Math.abs(R);const de=(X.x-ue.x)/2,pe=(X.y-ue.y)/2,$=Math.cos(S)*de+Math.sin(S)*pe,re=-Math.sin(S)*de+Math.cos(S)*pe;let Ce=P*P,le=R*R;const H=$*$,L=re*re,ge=H/Ce+L/le;if(ge>1){const Hi=Math.sqrt(ge);P=Hi*P,R=Hi*R,Ce=P*P,le=R*R}const Fe=Ce*L+le*H,Mt=(Ce*le-Fe)/Fe;let Zt=Math.sqrt(Math.max(0,Mt));Z===ie&&(Zt=-Zt);const at=Zt*P*re/R,En=-Zt*R*$/P,Ni=Math.cos(S)*at-Math.sin(S)*En+(X.x+ue.x)/2,ms=Math.sin(S)*at+Math.cos(S)*En+(X.y+ue.y)/2,Gn=A(1,0,($-at)/P,(re-En)/R),Bs=A(($-at)/P,(re-En)/R,(-$-at)/P,(-re-En)/R)%(Math.PI*2);N.currentPath.absellipse(Ni,ms,P,R,Gn,Gn+Bs,ie===0,S)}function A(N,P,R,S){const Z=N*R+P*S,ie=Math.sqrt(N*N+P*P)*Math.sqrt(R*R+S*S);let X=Math.acos(Math.max(-1,Math.min(1,Z/ie)));return N*S-P*R<0&&(X=-X),X}function h(N){const P=_(N.getAttribute("x")||0),R=_(N.getAttribute("y")||0),S=_(N.getAttribute("rx")||N.getAttribute("ry")||0),Z=_(N.getAttribute("ry")||N.getAttribute("rx")||0),ie=_(N.getAttribute("width")),X=_(N.getAttribute("height")),ue=1-.551915024494,de=new si;return de.moveTo(P+S,R),de.lineTo(P+ie-S,R),(S!==0||Z!==0)&&de.bezierCurveTo(P+ie-S*ue,R,P+ie,R+Z*ue,P+ie,R+Z),de.lineTo(P+ie,R+X-Z),(S!==0||Z!==0)&&de.bezierCurveTo(P+ie,R+X-Z*ue,P+ie-S*ue,R+X,P+ie-S,R+X),de.lineTo(P+S,R+X),(S!==0||Z!==0)&&de.bezierCurveTo(P+S*ue,R+X,P,R+X-Z*ue,P,R+X-Z),de.lineTo(P,R+Z),(S!==0||Z!==0)&&de.bezierCurveTo(P,R+Z*ue,P+S*ue,R,P+S,R),de}function d(N){function P(ie,X,ue){const de=_(X),pe=_(ue);Z===0?S.moveTo(de,pe):S.lineTo(de,pe),Z++}const R=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,S=new si;let Z=0;return N.getAttribute("points").replace(R,P),S.currentPath.autoClose=!0,S}function a(N){function P(ie,X,ue){const de=_(X),pe=_(ue);Z===0?S.moveTo(de,pe):S.lineTo(de,pe),Z++}const R=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,S=new si;let Z=0;return N.getAttribute("points").replace(R,P),S.currentPath.autoClose=!1,S}function c(N){const P=_(N.getAttribute("cx")||0),R=_(N.getAttribute("cy")||0),S=_(N.getAttribute("r")||0),Z=new go;Z.absarc(P,R,S,0,Math.PI*2);const ie=new si;return ie.subPaths.push(Z),ie}function u(N){const P=_(N.getAttribute("cx")||0),R=_(N.getAttribute("cy")||0),S=_(N.getAttribute("rx")||0),Z=_(N.getAttribute("ry")||0),ie=new go;ie.absellipse(P,R,S,Z,0,Math.PI*2);const X=new si;return X.subPaths.push(ie),X}function f(N){const P=_(N.getAttribute("x1")||0),R=_(N.getAttribute("y1")||0),S=_(N.getAttribute("x2")||0),Z=_(N.getAttribute("y2")||0),ie=new si;return ie.moveTo(P,R),ie.lineTo(S,Z),ie.currentPath.autoClose=!1,ie}function p(N,P){P=Object.assign({},P);let R={};if(N.hasAttribute("class")){const X=N.getAttribute("class").split(/\s/).filter(Boolean).map(ue=>ue.trim());for(let ue=0;ue<X.length;ue++)R=Object.assign(R,b["."+X[ue]])}N.hasAttribute("id")&&(R=Object.assign(R,b["#"+N.getAttribute("id")]));function S(X,ue,de){de===void 0&&(de=function($){return $.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),$}),N.hasAttribute(X)&&(P[ue]=de(N.getAttribute(X))),R[X]&&(P[ue]=de(R[X])),N.style&&N.style[X]!==""&&(P[ue]=de(N.style[X]))}function Z(X){return Math.max(0,Math.min(1,_(X)))}function ie(X){return Math.max(0,_(X))}return S("fill","fill"),S("fill-opacity","fillOpacity",Z),S("fill-rule","fillRule"),S("opacity","opacity",Z),S("stroke","stroke"),S("stroke-opacity","strokeOpacity",Z),S("stroke-width","strokeWidth",ie),S("stroke-linejoin","strokeLineJoin"),S("stroke-linecap","strokeLineCap"),S("stroke-miterlimit","strokeMiterLimit",ie),S("visibility","visibility"),P}function m(N,P){return N-(P-N)}function g(N,P,R){if(typeof N!="string")throw new TypeError("Invalid input: "+typeof N);const S={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Z=0,ie=1,X=2,ue=3;let de=Z,pe=!0,$="",re="";const Ce=[];function le(Fe,Mt,Zt){const at=new SyntaxError('Unexpected character "'+Fe+'" at index '+Mt+".");throw at.partial=Zt,at}function H(){$!==""&&(re===""?Ce.push(Number($)):Ce.push(Number($)*Math.pow(10,Number(re)))),$="",re=""}let L;const ge=N.length;for(let Fe=0;Fe<ge;Fe++){if(L=N[Fe],Array.isArray(P)&&P.includes(Ce.length%R)&&S.FLAGS.test(L)){de=ie,$=L,H();continue}if(de===Z){if(S.WHITESPACE.test(L))continue;if(S.DIGIT.test(L)||S.SIGN.test(L)){de=ie,$=L;continue}if(S.POINT.test(L)){de=X,$=L;continue}S.COMMA.test(L)&&(pe&&le(L,Fe,Ce),pe=!0)}if(de===ie){if(S.DIGIT.test(L)){$+=L;continue}if(S.POINT.test(L)){$+=L,de=X;continue}if(S.EXP.test(L)){de=ue;continue}S.SIGN.test(L)&&$.length===1&&S.SIGN.test($[0])&&le(L,Fe,Ce)}if(de===X){if(S.DIGIT.test(L)){$+=L;continue}if(S.EXP.test(L)){de=ue;continue}S.POINT.test(L)&&$[$.length-1]==="."&&le(L,Fe,Ce)}if(de===ue){if(S.DIGIT.test(L)){re+=L;continue}if(S.SIGN.test(L)){if(re===""){re+=L;continue}re.length===1&&S.SIGN.test(re)&&le(L,Fe,Ce)}}S.WHITESPACE.test(L)?(H(),de=Z,pe=!1):S.COMMA.test(L)?(H(),de=Z,pe=!0):S.SIGN.test(L)?(H(),de=ie,$=L):S.POINT.test(L)?(H(),de=X,$=L):le(L,Fe,Ce)}return H(),Ce}const B=["mm","cm","in","pt","pc","px"],I={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function _(N){let P="px";if(typeof N=="string"||N instanceof String)for(let S=0,Z=B.length;S<Z;S++){const ie=B[S];if(N.endsWith(ie)){P=ie,N=N.substring(0,N.length-ie.length);break}}let R;return P==="px"&&n.defaultUnit!=="px"?R=I.in[n.defaultUnit]/n.defaultDPI:(R=I[P][n.defaultUnit],R<0&&(R=I[P].in*n.defaultDPI)),R*parseFloat(N)}function C(N){if(!(N.hasAttribute("transform")||N.nodeName==="use"&&(N.hasAttribute("x")||N.hasAttribute("y"))))return null;const P=E(N);return F.length>0&&P.premultiply(F[F.length-1]),W.copy(P),F.push(P),P}function E(N){const P=new xi,R=U;if(N.nodeName==="use"&&(N.hasAttribute("x")||N.hasAttribute("y"))){const S=_(N.getAttribute("x")),Z=_(N.getAttribute("y"));P.translate(S,Z)}if(N.hasAttribute("transform")){const S=N.getAttribute("transform").split(")");for(let Z=S.length-1;Z>=0;Z--){const ie=S[Z].trim();if(ie==="")continue;const X=ie.indexOf("("),ue=ie.length;if(X>0&&X<ue){const de=ie.slice(0,X),pe=g(ie.slice(X+1));switch(R.identity(),de){case"translate":if(pe.length>=1){const $=pe[0];let re=0;pe.length>=2&&(re=pe[1]),R.translate($,re)}break;case"rotate":if(pe.length>=1){let $=0,re=0,Ce=0;$=pe[0]*Math.PI/180,pe.length>=3&&(re=pe[1],Ce=pe[2]),te.makeTranslation(-re,-Ce),j.makeRotation($),J.multiplyMatrices(j,te),te.makeTranslation(re,Ce),R.multiplyMatrices(te,J)}break;case"scale":if(pe.length>=1){const $=pe[0];let re=$;pe.length>=2&&(re=pe[1]),R.scale($,re)}break;case"skewX":pe.length===1&&R.set(1,Math.tan(pe[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":pe.length===1&&R.set(1,0,0,Math.tan(pe[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":pe.length===6&&R.set(pe[0],pe[2],pe[4],pe[1],pe[3],pe[5],0,0,1);break}}P.premultiply(R)}}return P}function v(N,P){function R(X){ae.set(X.x,X.y,1).applyMatrix3(P),X.set(ae.x,ae.y)}function S(X){const ue=X.xRadius,de=X.yRadius,pe=Math.cos(X.aRotation),$=Math.sin(X.aRotation),re=new Qe(ue*pe,ue*$,0),Ce=new Qe(-de*$,de*pe,0),le=re.applyMatrix3(P),H=Ce.applyMatrix3(P),L=U.set(le.x,H.x,0,le.y,H.y,0,0,0,1),ge=te.copy(L).invert(),Zt=j.copy(ge).transpose().multiply(ge).elements,at=O(Zt[0],Zt[1],Zt[4]),En=Math.sqrt(at.rt1),Ni=Math.sqrt(at.rt2);if(X.xRadius=1/En,X.yRadius=1/Ni,X.aRotation=Math.atan2(at.sn,at.cs),!((X.aEndAngle-X.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const Gn=te.set(En,0,0,0,Ni,0,0,0,1),Bs=j.set(at.cs,at.sn,0,-at.sn,at.cs,0,0,0,1),Hi=Gn.multiply(Bs).multiply(L),Er=Zn=>{const{x:It,y:Ir}=new Qe(Math.cos(Zn),Math.sin(Zn),0).applyMatrix3(Hi);return Math.atan2(Ir,It)};X.aStartAngle=Er(X.aStartAngle),X.aEndAngle=Er(X.aEndAngle),x(P)&&(X.aClockwise=!X.aClockwise)}}function Z(X){const ue=D(P),de=G(P);X.xRadius*=ue,X.yRadius*=de;const pe=ue>Number.EPSILON?Math.atan2(P.elements[1],P.elements[0]):Math.atan2(-P.elements[3],P.elements[4]);X.aRotation+=pe,x(P)&&(X.aStartAngle*=-1,X.aEndAngle*=-1,X.aClockwise=!X.aClockwise)}const ie=N.subPaths;for(let X=0,ue=ie.length;X<ue;X++){const pe=ie[X].curves;for(let $=0;$<pe.length;$++){const re=pe[$];re.isLineCurve?(R(re.v1),R(re.v2)):re.isCubicBezierCurve?(R(re.v0),R(re.v1),R(re.v2),R(re.v3)):re.isQuadraticBezierCurve?(R(re.v0),R(re.v1),R(re.v2)):re.isEllipseCurve&&(ee.set(re.aX,re.aY),R(ee),re.aX=ee.x,re.aY=ee.y,w(P)?S(re):Z(re))}}}function x(N){const P=N.elements;return P[0]*P[4]-P[1]*P[3]<0}function w(N){const P=N.elements,R=P[0]*P[3]+P[1]*P[4];if(R===0)return!1;const S=D(N),Z=G(N);return Math.abs(R/(S*Z))>Number.EPSILON}function D(N){const P=N.elements;return Math.sqrt(P[0]*P[0]+P[1]*P[1])}function G(N){const P=N.elements;return Math.sqrt(P[3]*P[3]+P[4]*P[4])}function O(N,P,R){let S,Z,ie,X,ue;const de=N+R,pe=N-R,$=Math.sqrt(pe*pe+4*P*P);return de>0?(S=.5*(de+$),ue=1/S,Z=N*ue*R-P*ue*P):de<0?Z=.5*(de-$):(S=.5*$,Z=-.5*$),pe>0?ie=pe+$:ie=pe-$,Math.abs(ie)>2*Math.abs(P)?(ue=-2*P/ie,X=1/Math.sqrt(1+ue*ue),ie=ue*X):Math.abs(P)===0?(ie=1,X=0):(ue=-.5*ie/P,ie=1/Math.sqrt(1+ue*ue),X=ue*ie),pe>0&&(ue=ie,ie=-X,X=ue),{rt1:S,rt2:Z,cs:ie,sn:X}}const T=[],b={},F=[],U=new xi,te=new xi,j=new xi,J=new xi,ee=new we,ae=new Qe,W=new xi,_e=new DOMParser().parseFromString(t,"image/svg+xml");return i(_e.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:T,xml:_e.documentElement}}static createShapes(t){const i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},s={loc:i.ORIGIN,t:0};function r(m,g,B,I){const _=m.x,C=g.x,E=B.x,v=I.x,x=m.y,w=g.y,D=B.y,G=I.y,O=(v-E)*(x-D)-(G-D)*(_-E),T=(C-_)*(x-D)-(w-x)*(_-E),b=(G-D)*(C-_)-(v-E)*(w-x),F=O/b,U=T/b;if(b===0&&O!==0||F<=0||F>=1||U<0||U>1)return null;if(O===0&&b===0){for(let te=0;te<2;te++)if(o(te===0?B:I,m,g),s.loc==i.ORIGIN){const j=te===0?B:I;return{x:j.x,y:j.y,t:s.t}}else if(s.loc==i.BETWEEN){const j=+(_+s.t*(C-_)).toPrecision(10),J=+(x+s.t*(w-x)).toPrecision(10);return{x:j,y:J,t:s.t}}return null}else{for(let J=0;J<2;J++)if(o(J===0?B:I,m,g),s.loc==i.ORIGIN){const ee=J===0?B:I;return{x:ee.x,y:ee.y,t:s.t}}const te=+(_+F*(C-_)).toPrecision(10),j=+(x+F*(w-x)).toPrecision(10);return{x:te,y:j,t:F}}}function o(m,g,B){const I=B.x-g.x,_=B.y-g.y,C=m.x-g.x,E=m.y-g.y,v=I*E-C*_;if(m.x===g.x&&m.y===g.y){s.loc=i.ORIGIN,s.t=0;return}if(m.x===B.x&&m.y===B.y){s.loc=i.DESTINATION,s.t=1;return}if(v<-Number.EPSILON){s.loc=i.LEFT;return}if(v>Number.EPSILON){s.loc=i.RIGHT;return}if(I*C<0||_*E<0){s.loc=i.BEHIND;return}if(Math.sqrt(I*I+_*_)<Math.sqrt(C*C+E*E)){s.loc=i.BEYOND;return}let x;I!==0?x=C/I:x=E/_,s.loc=i.BETWEEN,s.t=x}function A(m,g){const B=[],I=[];for(let _=1;_<m.length;_++){const C=m[_-1],E=m[_];for(let v=1;v<g.length;v++){const x=g[v-1],w=g[v],D=r(C,E,x,w);D!==null&&B.find(G=>G.t<=D.t+Number.EPSILON&&G.t>=D.t-Number.EPSILON)===void 0&&(B.push(D),I.push(new we(D.x,D.y)))}}return I}function h(m,g,B){const I=new we;g.getCenter(I);const _=[];return B.forEach(C=>{C.boundingBox.containsPoint(I)&&A(m,C.points).forEach(v=>{_.push({identifier:C.identifier,isCW:C.isCW,point:v})})}),_.sort((C,E)=>C.point.x-E.point.x),_}function d(m,g,B,I,_){(_==null||_==="")&&(_="nonzero");const C=new we;m.boundingBox.getCenter(C);const E=[new we(B,C.y),new we(I,C.y)],v=h(E,m.boundingBox,g);v.sort((T,b)=>T.point.x-b.point.x);const x=[],w=[];v.forEach(T=>{T.identifier===m.identifier?x.push(T):w.push(T)});const D=x[0].point.x,G=[];let O=0;for(;O<w.length&&w[O].point.x<D;)G.length>0&&G[G.length-1]===w[O].identifier?G.pop():G.push(w[O].identifier),O++;if(G.push(m.identifier),_==="evenodd"){const T=G.length%2===0,b=G[G.length-2];return{identifier:m.identifier,isHole:T,for:b}}else if(_==="nonzero"){let T=!0,b=null,F=null;for(let U=0;U<G.length;U++){const te=G[U];T?(F=g[te].isCW,T=!1,b=te):F!==g[te].isCW&&(F=g[te].isCW,T=!0)}return{identifier:m.identifier,isHole:T,for:b}}else console.warn('fill-rule: "'+_+'" is currently not implemented.')}let a=999999999,c=-999999999,u=t.subPaths.map(m=>{const g=m.getPoints();let B=-999999999,I=999999999,_=-999999999,C=999999999;for(let E=0;E<g.length;E++){const v=g[E];v.y>B&&(B=v.y),v.y<I&&(I=v.y),v.x>_&&(_=v.x),v.x<C&&(C=v.x)}return c<=_&&(c=_+1),a>=C&&(a=C-1),{curves:m.curves,points:g,isCW:Cd.isClockWise(g),identifier:-1,boundingBox:new Bd(new we(C,I),new we(_,B))}});u=u.filter(m=>m.points.length>1);for(let m=0;m<u.length;m++)u[m].identifier=m;const f=u.map(m=>d(m,u,a,c,t.userData?t.userData.style.fillRule:void 0)),p=[];return u.forEach(m=>{if(!f[m.identifier].isHole){const B=new _d;B.curves=m.curves,f.filter(_=>_.isHole&&_.for===m.identifier).forEach(_=>{const C=u[_.identifier],E=new go;E.curves=C.curves,B.holes.push(E)}),p.push(B)}}),p}static getStrokeStyle(t,n,i,s,r){return t=t!==void 0?t:1,n=n!==void 0?n:"#000",i=i!==void 0?i:"miter",s=s!==void 0?s:"butt",r=r!==void 0?r:4,{strokeColor:n,strokeWidth:t,strokeLineJoin:i,strokeLineCap:s,strokeMiterLimit:r}}static pointsToStroke(t,n,i,s){const r=[],o=[],A=[];if(l.pointsToStrokeWithBuffers(t,n,i,s,r,o,A)===0)return null;const h=new ui;return h.setAttribute("position",new Dt(r,3)),h.setAttribute("normal",new Dt(o,3)),h.setAttribute("uv",new Dt(A,2)),h}static pointsToStrokeWithBuffers(t,n,i,s,r,o,A,h){const d=new we,a=new we,c=new we,u=new we,f=new we,p=new we,m=new we,g=new we,B=new we,I=new we,_=new we,C=new we,E=new we,v=new we,x=new we,w=new we,D=new we;i=i!==void 0?i:12,s=s!==void 0?s:.001,h=h!==void 0?h:0,t=pe(t);const G=t.length;if(G<2)return 0;const O=t[0].equals(t[G-1]);let T,b=t[0],F;const U=n.strokeWidth/2,te=1/(G-1);let j=0,J,ee,ae,W,_e=!1,Ee=0,N=h*3,P=h*2;R(t[0],t[1],d).multiplyScalar(U),g.copy(t[0]).sub(d),B.copy(t[0]).add(d),I.copy(g),_.copy(B);for(let $=1;$<G;$++){T=t[$],$===G-1?O?F=t[1]:F=void 0:F=t[$+1];const re=d;if(R(b,T,re),c.copy(re).multiplyScalar(U),C.copy(T).sub(c),E.copy(T).add(c),J=j+te,ee=!1,F!==void 0){R(T,F,a),c.copy(a).multiplyScalar(U),v.copy(T).sub(c),x.copy(T).add(c),ae=!0,c.subVectors(F,b),re.dot(c)<0&&(ae=!1),$===1&&(_e=ae),c.subVectors(F,T),c.normalize();const Ce=Math.abs(re.dot(c));if(Ce>Number.EPSILON){const le=U/Ce;c.multiplyScalar(-le),u.subVectors(T,b),f.copy(u).setLength(le).add(c),w.copy(f).negate();const H=f.length(),L=u.length();u.divideScalar(L),p.subVectors(F,T);const ge=p.length();switch(p.divideScalar(ge),u.dot(w)<L&&p.dot(w)<ge&&(ee=!0),D.copy(f).add(T),w.add(T),W=!1,ee?ae?(x.copy(w),E.copy(w)):(v.copy(w),C.copy(w)):ie(),n.strokeLineJoin){case"bevel":X(ae,ee,J);break;case"round":ue(ae,ee),ae?Z(T,C,v,J,0):Z(T,x,E,J,1);break;case"miter":case"miter-clip":default:const Fe=U*n.strokeMiterLimit/H;if(Fe<1)if(n.strokeLineJoin!=="miter-clip"){X(ae,ee,J);break}else ue(ae,ee),ae?(p.subVectors(D,C).multiplyScalar(Fe).add(C),m.subVectors(D,v).multiplyScalar(Fe).add(v),S(C,J,0),S(p,J,0),S(T,J,.5),S(T,J,.5),S(p,J,0),S(m,J,0),S(T,J,.5),S(m,J,0),S(v,J,0)):(p.subVectors(D,E).multiplyScalar(Fe).add(E),m.subVectors(D,x).multiplyScalar(Fe).add(x),S(E,J,1),S(p,J,1),S(T,J,.5),S(T,J,.5),S(p,J,1),S(m,J,1),S(T,J,.5),S(m,J,1),S(x,J,1));else ee?(ae?(S(B,j,1),S(g,j,0),S(D,J,0),S(B,j,1),S(D,J,0),S(w,J,1)):(S(B,j,1),S(g,j,0),S(D,J,1),S(g,j,0),S(w,J,0),S(D,J,1)),ae?v.copy(D):x.copy(D)):ae?(S(C,J,0),S(D,J,0),S(T,J,.5),S(T,J,.5),S(D,J,0),S(v,J,0)):(S(E,J,1),S(D,J,1),S(T,J,.5),S(T,J,.5),S(D,J,1),S(x,J,1)),W=!0;break}}else ie()}else ie();!O&&$===G-1&&de(t[0],I,_,ae,!0,j),j=J,b=T,g.copy(v),B.copy(x)}if(!O)de(T,C,E,ae,!1,J);else if(ee&&r){let $=D,re=w;_e!==ae&&($=w,re=D),ae?(W||_e)&&(re.toArray(r,0*3),re.toArray(r,3*3),W&&$.toArray(r,1*3)):(W||!_e)&&(re.toArray(r,1*3),re.toArray(r,3*3),W&&$.toArray(r,0*3))}return Ee;function R($,re,Ce){return Ce.subVectors(re,$),Ce.set(-Ce.y,Ce.x).normalize()}function S($,re,Ce){r&&(r[N]=$.x,r[N+1]=$.y,r[N+2]=0,o&&(o[N]=0,o[N+1]=0,o[N+2]=1),N+=3,A&&(A[P]=re,A[P+1]=Ce,P+=2)),Ee+=3}function Z($,re,Ce,le,H){d.copy(re).sub($).normalize(),a.copy(Ce).sub($).normalize();let L=Math.PI;const ge=d.dot(a);Math.abs(ge)<1&&(L=Math.abs(Math.acos(ge))),L/=i,c.copy(re);for(let Fe=0,Mt=i-1;Fe<Mt;Fe++)u.copy(c).rotateAround($,L),S(c,le,H),S(u,le,H),S($,le,.5),c.copy(u);S(u,le,H),S(Ce,le,H),S($,le,.5)}function ie(){S(B,j,1),S(g,j,0),S(C,J,0),S(B,j,1),S(C,J,0),S(E,J,1)}function X($,re,Ce){re?$?(S(B,j,1),S(g,j,0),S(C,J,0),S(B,j,1),S(C,J,0),S(w,J,1),S(C,Ce,0),S(v,Ce,0),S(w,Ce,.5)):(S(B,j,1),S(g,j,0),S(E,J,1),S(g,j,0),S(w,J,0),S(E,J,1),S(E,Ce,1),S(w,Ce,0),S(x,Ce,1)):$?(S(C,Ce,0),S(v,Ce,0),S(T,Ce,.5)):(S(E,Ce,1),S(x,Ce,0),S(T,Ce,.5))}function ue($,re){re&&($?(S(B,j,1),S(g,j,0),S(C,J,0),S(B,j,1),S(C,J,0),S(w,J,1),S(C,j,0),S(T,J,.5),S(w,J,1),S(T,J,.5),S(v,j,0),S(w,J,1)):(S(B,j,1),S(g,j,0),S(E,J,1),S(g,j,0),S(w,J,0),S(E,J,1),S(E,j,1),S(w,J,0),S(T,J,.5),S(T,J,.5),S(w,J,0),S(x,j,1)))}function de($,re,Ce,le,H,L){switch(n.strokeLineCap){case"round":H?Z($,Ce,re,L,.5):Z($,re,Ce,L,.5);break;case"square":if(H)d.subVectors(re,$),a.set(d.y,-d.x),c.addVectors(d,a).add($),u.subVectors(a,d).add($),le?(c.toArray(r,1*3),u.toArray(r,0*3),u.toArray(r,3*3)):(c.toArray(r,1*3),A[3*2+1]===1?u.toArray(r,3*3):c.toArray(r,3*3),u.toArray(r,0*3));else{d.subVectors(Ce,$),a.set(d.y,-d.x),c.addVectors(d,a).add($),u.subVectors(a,d).add($);const ge=r.length;le?(c.toArray(r,ge-1*3),u.toArray(r,ge-2*3),u.toArray(r,ge-4*3)):(u.toArray(r,ge-2*3),c.toArray(r,ge-1*3),u.toArray(r,ge-4*3))}break}}function pe($){let re=!1;for(let le=1,H=$.length-1;le<H;le++)if($[le].distanceTo($[le+1])<s){re=!0;break}if(!re)return $;const Ce=[];Ce.push($[0]);for(let le=1,H=$.length-1;le<H;le++)$[le].distanceTo($[le+1])>=s&&Ce.push($[le]);return Ce.push($[$.length-1]),Ce}}}return l})(),bp=/^[og]\s*(.+)?/,Sp=/^mtllib /,Fp=/^usemtl /,Rp=/^usemap /,GA=new Qe,Do=new Qe,PA=new Qe,kA=new Qe,nn=new Qe;function Op(){const l={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,s){const r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);const o={index:this.materials.length,name:i||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:r!==void 0?r.smooth:this.smooth,groupStart:r!==void 0?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(A){const h={index:typeof A=="number"?A:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return h.clone=this.clone.bind(h),h}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),i&&this.materials.length>1)for(let r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&typeof n.clone=="function"){const i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseNormalIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseUVIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/2)*2},addVertex:function(e,t,n){const i=this.vertices,s=this.object.geometry.vertices;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[t+0],i[t+1],i[t+2]),s.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const i=this.normals,s=this.object.geometry.normals;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[t+0],i[t+1],i[t+2]),s.push(i[n+0],i[n+1],i[n+2])},addFaceNormal:function(e,t,n){const i=this.vertices,s=this.object.geometry.normals;GA.fromArray(i,e),Do.fromArray(i,t),PA.fromArray(i,n),nn.subVectors(PA,Do),kA.subVectors(GA,Do),nn.cross(kA),nn.normalize(),s.push(nn.x,nn.y,nn.z),s.push(nn.x,nn.y,nn.z),s.push(nn.x,nn.y,nn.z)},addColor:function(e,t,n){const i=this.colors,s=this.object.geometry.colors;i[e]!==void 0&&s.push(i[e+0],i[e+1],i[e+2]),i[t]!==void 0&&s.push(i[t+0],i[t+1],i[t+2]),i[n]!==void 0&&s.push(i[n+0],i[n+1],i[n+2])},addUV:function(e,t,n){const i=this.uvs,s=this.object.geometry.uvs;s.push(i[e+0],i[e+1]),s.push(i[t+0],i[t+1]),s.push(i[n+0],i[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,i,s,r,o,A,h){const d=this.vertices.length;let a=this.parseVertexIndex(e,d),c=this.parseVertexIndex(t,d),u=this.parseVertexIndex(n,d);if(this.addVertex(a,c,u),this.addColor(a,c,u),o!==void 0&&o!==""){const f=this.normals.length;a=this.parseNormalIndex(o,f),c=this.parseNormalIndex(A,f),u=this.parseNormalIndex(h,f),this.addNormal(a,c,u)}else this.addFaceNormal(a,c,u);if(i!==void 0&&i!==""){const f=this.uvs.length;a=this.parseUVIndex(i,f),c=this.parseUVIndex(s,f),u=this.parseUVIndex(r,f),this.addUV(a,c,u),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,i=e.length;n<i;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,i=this.uvs.length;for(let s=0,r=e.length;s<r;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,r=t.length;s<r;s++)this.addUVLine(this.parseUVIndex(t[s],i))}};return l.startObject("",!1),l}class Lp extends ki{constructor(e){super(e),this.materials=null}load(e,t,n,i){const s=this,r=new Cn(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(o){try{t(s.parse(o))}catch(A){i?i(A):console.error(A),s.manager.itemError(e)}},n,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Op;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const n=e.split(`
`);let i="",s="",r=0,o=[];const A=typeof"".trimLeft=="function";for(let a=0,c=n.length;a<c;a++)if(i=n[a],i=A?i.trimLeft():i.trim(),r=i.length,r!==0&&(s=i.charAt(0),s!=="#"))if(s==="v"){const u=i.split(/\s+/);switch(u[0]){case"v":t.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?t.colors.push(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":t.uvs.push(parseFloat(u[1]),parseFloat(u[2]));break}}else if(s==="f"){const f=i.substr(1).trim().split(/\s+/),p=[];for(let g=0,B=f.length;g<B;g++){const I=f[g];if(I.length>0){const _=I.split("/");p.push(_)}}const m=p[0];for(let g=1,B=p.length-1;g<B;g++){const I=p[g],_=p[g+1];t.addFace(m[0],I[0],_[0],m[1],I[1],_[1],m[2],I[2],_[2])}}else if(s==="l"){const u=i.substring(1).trim().split(" ");let f=[];const p=[];if(i.indexOf("/")===-1)f=u;else for(let m=0,g=u.length;m<g;m++){const B=u[m].split("/");B[0]!==""&&f.push(B[0]),B[1]!==""&&p.push(B[1])}t.addLineGeometry(f,p)}else if(s==="p"){const f=i.substr(1).trim().split(" ");t.addPointGeometry(f)}else if((o=bp.exec(i))!==null){const u=(" "+o[0].substr(1).trim()).substr(1);t.startObject(u)}else if(Fp.test(i))t.object.startMaterial(i.substring(7).trim(),t.materialLibraries);else if(Sp.test(i))t.materialLibraries.push(i.substring(7).trim());else if(Rp.test(i))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(s==="s"){if(o=i.split(" "),o.length>1){const f=o[1].trim().toLowerCase();t.object.smooth=f!=="0"&&f!=="off"}else t.object.smooth=!0;const u=t.object.currentMaterial();u&&(u.smooth=t.object.smooth)}else{if(i==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+i+'"')}t.finalize();const h=new Si;if(h.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,c=t.objects.length;a<c;a++){const u=t.objects[a],f=u.geometry,p=u.materials,m=f.type==="Line",g=f.type==="Points";let B=!1;if(f.vertices.length===0)continue;const I=new ui;I.setAttribute("position",new Dt(f.vertices,3)),f.normals.length>0&&I.setAttribute("normal",new Dt(f.normals,3)),f.colors.length>0&&(B=!0,I.setAttribute("color",new Dt(f.colors,3))),f.hasUVIndices===!0&&I.setAttribute("uv",new Dt(f.uvs,2));const _=[];for(let E=0,v=p.length;E<v;E++){const x=p[E],w=x.name+"_"+x.smooth+"_"+B;let D=t.materials[w];if(this.materials!==null){if(D=this.materials.create(x.name),m&&D&&!(D instanceof Xs)){const G=new Xs;Vs.prototype.copy.call(G,D),G.color.copy(D.color),D=G}else if(g&&D&&!(D instanceof Hs)){const G=new Hs({size:10,sizeAttenuation:!1});Vs.prototype.copy.call(G,D),G.color.copy(D.color),G.map=D.map,D=G}}D===void 0&&(m?D=new Xs:g?D=new Hs({size:1,sizeAttenuation:!1}):D=new kr,D.name=x.name,D.flatShading=!x.smooth,D.vertexColors=B,t.materials[w]=D),_.push(D)}let C;if(_.length>1){for(let E=0,v=p.length;E<v;E++){const x=p[E];I.addGroup(x.groupStart,x.groupCount,E)}m?C=new ma(I,_):g?C=new Pr(I,_):C=new _n(I,_)}else m?C=new ma(I,_[0]):g?C=new Pr(I,_[0]):C=new _n(I,_[0]);C.name=u.name,h.add(C)}else if(t.vertices.length>0){const a=new Hs({size:1,sizeAttenuation:!1}),c=new ui;c.setAttribute("position",new Dt(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(c.setAttribute("color",new Dt(t.colors,3)),a.vertexColors=!0);const u=new Pr(c,a);h.add(u)}return h}}const bo=new WeakMap;class Gp extends ki{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new Cn(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,r=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(r,o).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const A in t.attributeTypes){const h=t.attributeTypes[A];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[A]=h.name)}const n=JSON.stringify(t);if(bo.has(e)){const A=bo.get(e);if(A.key===n)return A.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,r=e.byteLength,o=this._getWorker(s,r).then(A=>(i=A,new Promise((h,d)=>{i._callbacks[s]={resolve:h,reject:d},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(A=>this._createGeometry(A.geometry));return o.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),bo.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new ui;e.index&&t.setIndex(new qs(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,r=i.array,o=i.itemSize;t.setAttribute(s,new qs(r,o))}return t}_loadLibrary(e,t){const n=new Cn(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,s)=>{n.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=Pp.toString(),r=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const r=s.data;switch(r.type){case"decode":i._callbacks[r.id].resolve(r);break;case"error":i._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Pp(){let l,e;onmessage=function(r){const o=r.data;switch(o.type){case"init":l=o.decoderConfig,e=new Promise(function(d){l.onModuleLoaded=function(a){d({draco:a})},DracoDecoderModule(l)});break;case"decode":const A=o.buffer,h=o.taskConfig;e.then(d=>{const a=d.draco,c=new a.Decoder,u=new a.DecoderBuffer;u.Init(new Int8Array(A),A.byteLength);try{const f=t(a,c,u,h),p=f.attributes.map(m=>m.array.buffer);f.index&&p.push(f.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:f},p)}catch(f){console.error(f),self.postMessage({type:"error",id:o.id,error:f.message})}finally{a.destroy(u),a.destroy(c)}});break}};function t(r,o,A,h){const d=h.attributeIDs,a=h.attributeTypes;let c,u;const f=o.GetEncodedGeometryType(A);if(f===r.TRIANGULAR_MESH)c=new r.Mesh,u=o.DecodeBufferToMesh(A,c);else if(f===r.POINT_CLOUD)c=new r.PointCloud,u=o.DecodeBufferToPointCloud(A,c);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||c.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const p={index:null,attributes:[]};for(const m in d){const g=self[a[m]];let B,I;if(h.useUniqueIDs)I=d[m],B=o.GetAttributeByUniqueId(c,I);else{if(I=o.GetAttributeId(c,r[d[m]]),I===-1)continue;B=o.GetAttribute(c,I)}p.attributes.push(i(r,o,c,m,g,B))}return f===r.TRIANGULAR_MESH&&(p.index=n(r,o,c)),r.destroy(c),p}function n(r,o,A){const d=A.num_faces()*3,a=d*4,c=r._malloc(a);o.GetTrianglesUInt32Array(A,a,c);const u=new Uint32Array(r.HEAPF32.buffer,c,d).slice();return r._free(c),{array:u,itemSize:1}}function i(r,o,A,h,d,a){const c=a.num_components(),f=A.num_points()*c,p=f*d.BYTES_PER_ELEMENT,m=s(r,d),g=r._malloc(p);o.GetAttributeDataArrayForAllPoints(A,a,m,p,g);const B=new d(r.HEAPF32.buffer,g,f).slice();return r._free(g),{name:h,array:B,itemSize:c}}function s(r,o){switch(o){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}let xr;const kp=()=>{if(xr)return xr;const l="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",e="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",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=l;WebAssembly.validate(t)&&(i=e);let s;const r=WebAssembly.instantiate(o(i),{}).then(a=>{s=a.instance,s.exports.__wasm_call_ctors()});function o(a){const c=new Uint8Array(a.length);for(let f=0;f<a.length;++f){const p=a.charCodeAt(f);c[f]=p>96?p-71:p>64?p-65:p>47?p+4:p>46?63:62}let u=0;for(let f=0;f<a.length;++f)c[u++]=c[f]<60?n[c[f]]:(c[f]-60)*64+c[++f];return c.buffer.slice(0,u)}function A(a,c,u,f,p,m){const g=s.exports.sbrk,B=u+3&-4,I=g(B*f),_=g(p.length),C=new Uint8Array(s.exports.memory.buffer);C.set(p,_);const E=a(I,u,f,_,p.length);if(E===0&&m&&m(I,B,f),c.set(C.subarray(I,I+u*f)),g(I-g(0)),E!==0)throw new Error(`Malformed buffer data: ${E}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return xr={ready:r,supported:!0,decodeVertexBuffer(a,c,u,f,p){A(s.exports.meshopt_decodeVertexBuffer,a,c,u,f,s.exports[h[p]])},decodeIndexBuffer(a,c,u,f){A(s.exports.meshopt_decodeIndexBuffer,a,c,u,f)},decodeIndexSequence(a,c,u,f){A(s.exports.meshopt_decodeIndexSequence,a,c,u,f)},decodeGltfBuffer(a,c,u,f,p,m){A(s.exports[d[p]],a,c,u,f,s.exports[h[m]])}},xr};new we,new we;new be;var Ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ur={exports:{}},Up=Ur.exports,UA;function Np(){return UA||(UA=1,function(l){(function(e){function t(C,E){var v=(C&65535)+(E&65535),x=(C>>16)+(E>>16)+(v>>16);return x<<16|v&65535}function n(C,E){return C<<E|C>>>32-E}function i(C,E,v,x,w,D){return t(n(t(t(E,C),t(x,D)),w),v)}function s(C,E,v,x,w,D,G){return i(E&v|~E&x,C,E,w,D,G)}function r(C,E,v,x,w,D,G){return i(E&x|v&~x,C,E,w,D,G)}function o(C,E,v,x,w,D,G){return i(E^v^x,C,E,w,D,G)}function A(C,E,v,x,w,D,G){return i(v^(E|~x),C,E,w,D,G)}function h(C,E){C[E>>5]|=128<<E%32,C[(E+64>>>9<<4)+14]=E;var v,x,w,D,G,O=1732584193,T=-271733879,b=-1732584194,F=271733878;for(v=0;v<C.length;v+=16)x=O,w=T,D=b,G=F,O=s(O,T,b,F,C[v],7,-680876936),F=s(F,O,T,b,C[v+1],12,-389564586),b=s(b,F,O,T,C[v+2],17,606105819),T=s(T,b,F,O,C[v+3],22,-1044525330),O=s(O,T,b,F,C[v+4],7,-176418897),F=s(F,O,T,b,C[v+5],12,1200080426),b=s(b,F,O,T,C[v+6],17,-1473231341),T=s(T,b,F,O,C[v+7],22,-45705983),O=s(O,T,b,F,C[v+8],7,1770035416),F=s(F,O,T,b,C[v+9],12,-1958414417),b=s(b,F,O,T,C[v+10],17,-42063),T=s(T,b,F,O,C[v+11],22,-1990404162),O=s(O,T,b,F,C[v+12],7,1804603682),F=s(F,O,T,b,C[v+13],12,-40341101),b=s(b,F,O,T,C[v+14],17,-1502002290),T=s(T,b,F,O,C[v+15],22,1236535329),O=r(O,T,b,F,C[v+1],5,-165796510),F=r(F,O,T,b,C[v+6],9,-1069501632),b=r(b,F,O,T,C[v+11],14,643717713),T=r(T,b,F,O,C[v],20,-373897302),O=r(O,T,b,F,C[v+5],5,-701558691),F=r(F,O,T,b,C[v+10],9,38016083),b=r(b,F,O,T,C[v+15],14,-660478335),T=r(T,b,F,O,C[v+4],20,-405537848),O=r(O,T,b,F,C[v+9],5,568446438),F=r(F,O,T,b,C[v+14],9,-1019803690),b=r(b,F,O,T,C[v+3],14,-187363961),T=r(T,b,F,O,C[v+8],20,1163531501),O=r(O,T,b,F,C[v+13],5,-1444681467),F=r(F,O,T,b,C[v+2],9,-51403784),b=r(b,F,O,T,C[v+7],14,1735328473),T=r(T,b,F,O,C[v+12],20,-1926607734),O=o(O,T,b,F,C[v+5],4,-378558),F=o(F,O,T,b,C[v+8],11,-2022574463),b=o(b,F,O,T,C[v+11],16,1839030562),T=o(T,b,F,O,C[v+14],23,-35309556),O=o(O,T,b,F,C[v+1],4,-1530992060),F=o(F,O,T,b,C[v+4],11,1272893353),b=o(b,F,O,T,C[v+7],16,-155497632),T=o(T,b,F,O,C[v+10],23,-1094730640),O=o(O,T,b,F,C[v+13],4,681279174),F=o(F,O,T,b,C[v],11,-358537222),b=o(b,F,O,T,C[v+3],16,-722521979),T=o(T,b,F,O,C[v+6],23,76029189),O=o(O,T,b,F,C[v+9],4,-640364487),F=o(F,O,T,b,C[v+12],11,-421815835),b=o(b,F,O,T,C[v+15],16,530742520),T=o(T,b,F,O,C[v+2],23,-995338651),O=A(O,T,b,F,C[v],6,-198630844),F=A(F,O,T,b,C[v+7],10,1126891415),b=A(b,F,O,T,C[v+14],15,-1416354905),T=A(T,b,F,O,C[v+5],21,-57434055),O=A(O,T,b,F,C[v+12],6,1700485571),F=A(F,O,T,b,C[v+3],10,-1894986606),b=A(b,F,O,T,C[v+10],15,-1051523),T=A(T,b,F,O,C[v+1],21,-2054922799),O=A(O,T,b,F,C[v+8],6,1873313359),F=A(F,O,T,b,C[v+15],10,-30611744),b=A(b,F,O,T,C[v+6],15,-1560198380),T=A(T,b,F,O,C[v+13],21,1309151649),O=A(O,T,b,F,C[v+4],6,-145523070),F=A(F,O,T,b,C[v+11],10,-1120210379),b=A(b,F,O,T,C[v+2],15,718787259),T=A(T,b,F,O,C[v+9],21,-343485551),O=t(O,x),T=t(T,w),b=t(b,D),F=t(F,G);return[O,T,b,F]}function d(C){var E,v="",x=C.length*32;for(E=0;E<x;E+=8)v+=String.fromCharCode(C[E>>5]>>>E%32&255);return v}function a(C){var E,v=[];for(v[(C.length>>2)-1]=void 0,E=0;E<v.length;E+=1)v[E]=0;var x=C.length*8;for(E=0;E<x;E+=8)v[E>>5]|=(C.charCodeAt(E/8)&255)<<E%32;return v}function c(C){return d(h(a(C),C.length*8))}function u(C,E){var v,x=a(C),w=[],D=[],G;for(w[15]=D[15]=void 0,x.length>16&&(x=h(x,C.length*8)),v=0;v<16;v+=1)w[v]=x[v]^909522486,D[v]=x[v]^1549556828;return G=h(w.concat(a(E)),512+E.length*8),d(h(D.concat(G),640))}function f(C){var E="0123456789abcdef",v="",x,w;for(w=0;w<C.length;w+=1)x=C.charCodeAt(w),v+=E.charAt(x>>>4&15)+E.charAt(x&15);return v}function p(C){return unescape(encodeURIComponent(C))}function m(C){return c(p(C))}function g(C){return f(m(C))}function B(C,E){return u(p(C),p(E))}function I(C,E){return f(B(C,E))}function _(C,E,v){return E?v?B(E,C):I(E,C):v?m(C):g(C)}l.exports?l.exports=_:e.md5=_})(Up)}(Ur)),Ur.exports}Np();var So,NA;function Kc(){return NA||(NA=1,So=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]),So}var Fo,HA;function Hp(){return HA||(HA=1,Fo=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]),Fo}var Ro,JA;function Yc(){return JA||(JA=1,Ro=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]),Ro}var Oo,zA;function Jp(){if(zA)return Oo;zA=1;var l=Kc();return Oo=l.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),Oo}var Lo,KA;function zp(){if(KA)return Lo;KA=1;var l=Yc();return l=l.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),Lo=l.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),Lo}var Go,YA;function Kp(){if(YA)return Go;YA=1,Go=_;var l=Kc(),e=Hp(),t=Yc(),n=Jp(),i=zp(),s=999,r=9999,o=0,A=1,h=2,d=3,a=4,c=5,u=6,f=7,p=8,m=9,g=10,B=11,I=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function _(C){var E=0,v=0,x=s,w,D,G=[],O=[],T=1,b=0,F=0,U=!1,te=!1,j="",J;C=C||{};var ee=t,ae=l;C.version==="300 es"&&(ee=i,ae=n);for(var W={},_e={},E=0;E<ee.length;E++)W[ee[E]]=!0;for(var E=0;E<ae.length;E++)_e[ae[E]]=!0;return function(le){return O=[],le!==null?N(le):P()};function Ee(le){le.length&&O.push({type:I[x],data:le,position:F,line:T,column:b})}function N(le){E=0,le.toString&&(le=le.toString()),j+=le.replace(/\r\n/g,`
`),J=j.length;for(var H;w=j[E],E<J;){switch(H=E,x){case o:E=X();break;case A:E=ie();break;case h:E=Z();break;case d:E=ue();break;case a:E=$();break;case B:E=pe();break;case c:E=re();break;case r:E=Ce();break;case m:E=S();break;case s:E=R();break}if(H!==E)switch(j[H]){case`
`:b=0,++T;break;default:++b;break}}return v+=E,j=j.slice(E),O}function P(le){return G.length&&Ee(G.join("")),x=g,Ee("(eof)"),O}function R(){return G=G.length?[]:G,D==="/"&&w==="*"?(F=v+E-1,x=o,D=w,E+1):D==="/"&&w==="/"?(F=v+E-1,x=A,D=w,E+1):w==="#"?(x=h,F=v+E,E):/\s/.test(w)?(x=m,F=v+E,E):(U=/\d/.test(w),te=/[^\w_]/.test(w),F=v+E,x=U?a:te?d:r,E)}function S(){return/[^\s]/g.test(w)?(Ee(G.join("")),x=s,E):(G.push(w),D=w,E+1)}function Z(){return(w==="\r"||w===`
`)&&D!=="\\"?(Ee(G.join("")),x=s,E):(G.push(w),D=w,E+1)}function ie(){return Z()}function X(){return w==="/"&&D==="*"?(G.push(w),Ee(G.join("")),x=s,E+1):(G.push(w),D=w,E+1)}function ue(){if(D==="."&&/\d/.test(w))return x=c,E;if(D==="/"&&w==="*")return x=o,E;if(D==="/"&&w==="/")return x=A,E;if(w==="."&&G.length){for(;de(G););return x=c,E}if(w===";"||w===")"||w==="("){if(G.length)for(;de(G););return Ee(w),x=s,E+1}var le=G.length===2&&w!=="=";if(/[\w_\d\s]/.test(w)||le){for(;de(G););return x=s,E}return G.push(w),D=w,E+1}function de(le){var H=0,L,ge;do{if(L=e.indexOf(le.slice(0,le.length+H).join("")),ge=e[L],L===-1){if(H--+le.length>0)continue;ge=le.slice(0,1).join("")}return Ee(ge),F+=ge.length,G=G.slice(ge.length),G.length}while(!0)}function pe(){return/[^a-fA-F0-9]/.test(w)?(Ee(G.join("")),x=s,E):(G.push(w),D=w,E+1)}function $(){return w==="."||/[eE]/.test(w)?(G.push(w),x=c,D=w,E+1):w==="x"&&G.length===1&&G[0]==="0"?(x=B,G.push(w),D=w,E+1):/[^\d]/.test(w)?(Ee(G.join("")),x=s,E):(G.push(w),D=w,E+1)}function re(){return w==="f"&&(G.push(w),D=w,E+=1),/[eE]/.test(w)||(w==="-"||w==="+")&&/[eE]/.test(D)?(G.push(w),D=w,E+1):/[^\d]/.test(w)?(Ee(G.join("")),x=s,E):(G.push(w),D=w,E+1)}function Ce(){if(/[^\d\w_]/.test(w)){var le=G.join("");return _e[le]?x=p:W[le]?x=f:x=u,Ee(G.join("")),x=s,E}return G.push(w),D=w,E+1}}return Go}var Po,qA;function Yp(){if(qA)return Po;qA=1;var l=Kp();Po=e;function e(t,n){var i=l(n),s=[];return s=s.concat(i(t)),s=s.concat(i(null)),s}return Po}Yp();const{ShaderChunk:ns,UniformsLib:qp,Vector2:Vp,Color:Xp,EventDispatcher:jp,TangentSpaceNormalMap:Wp,MultiplyOperation:Zp,Material:qc,ShaderMaterial:mr,RawShaderMaterial:$p}=Vr;function eg(l){return l&&l.isShaderMaterial}function tg(l){return l&&l.isMeshDepthMaterial||l===Id}const Ne=qp;Ne.clearcoatnormalmap={clearcoatNormalScale:{value:new Vp(1,1)}};const ng=["MeshDistanceMaterial","MeshMatcapMaterial","ShadowMaterial","SpriteMaterial","RawShaderMaterial","ShaderMaterial","PointsMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshPhongMaterial","MeshToonMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshDepthMaterial","MeshBasicMaterial","LineDashedMaterial","LineBasicMaterial","Material","MeshFaceMaterial","MultiMaterial","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial"];for(let l of ng)if(Vr[l]!==void 0){const e=Vr[l].prototype;e.type=l,e.customDepthMaterial=null,e.customDistanceMaterial=null,e.templates=[]}const Vc=mr.prototype.clone;function Wa(){const l=Vc.call(this);return l.templates=this.templates,l}function Xc(l){if(l&&l.uniforms)for(let e in l.uniforms)l.uniforms[e].linked&&(this.uniforms[e]=l.uniforms[e]);return this}function Za(l){qc.prototype.copy.call(this,l);for(let e of rg)l[e]&&(this[e]=l[e]);for(let e of ig)l[e]&&(this[e]=l[e]);return this.fragmentShader=l.fragmentShader,this.vertexShader=l.vertexShader,this.uniforms=Ge(l.uniforms),this.defines=Object.assign({},l.defines),this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.lights=l.lights,this.clipping=l.clipping,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this.extensions=l.extensions,l.customDepthMaterial&&(this.customDepthMaterial=l.customDepthMaterial.clone().link(this)),l.customDistanceMaterial&&(this.customDistanceMaterial=l.customDistanceMaterial.clone().link(this)),this}function jc(l){return this.uniforms[l]===void 0&&(this.uniforms[l]={value:null}),this.uniforms[l]}function pi(l,e){e=e||{};let t={},n="",i="";const s=e.template||e.extends,r=e.class||(l.isMaterial&&l.constructor?l.constructor:null)||$a,o=new r,A=e.material=e.material||{},h=Object.assign({},A.defines);o.templates=[e],l.templates instanceof Array&&(o.templates=l.templates.concat(o.templates));let d;if(l instanceof Function){d=l.prototype.type;const c=VA[d];if(c===void 0)return console.error('THREE.extendMaterial: no mapping for material class "%s" found',d),o;A.lights=A.lights===void 0?!0:A.lights,t=WA(c.name,t,e),n=ns[c.id+"_vert"],i=ns[c.id+"_frag"]}else if(eg(l))d=l.type,t=Ge(l.uniforms,t),n=l.vertexShader,i=l.fragmentShader,o.copy(l,!1),l.defines&&Object.assign(h,l.defines);else{d=l.type;const c=VA[d];if(c===void 0)return console.error('THREE.extendMaterial: no mapping for material class "%s" found',d),o;A.lights=A.lights===void 0?!0:A.lights,t=WA(c.name,t,e),n=ns[c.id+"_vert"],i=ns[c.id+"_frag"];const u=uc[c.name].uniforms;for(let f in u)t[f]===void 0&&l[f]!==void 0&&(l[f]!==null||e.explicit===!1)&&(t[f]=t[f]||{value:null},t[f].value=l[f])}e.defines&&Object.assign(h,e.defines);let a=(e.header||"")+`
`;if(e.vertex!==void 0&&(n=ar(n,e.vertex)),e.fragment!==void 0&&(i=ar(i,e.fragment)),A.defines=h,A.uniforms=t,A.vertexShader=a+(e.vertexHeader||"")+`
`+n,A.fragmentShader=a+(e.fragmentHeader||"")+`
`+i,e.vertexEnd&&(A.vertexShader=A.vertexShader.replace(/\}(?=[^.]*$)/g,e.vertexEnd+`
}`)),e.fragmentEnd&&(A.fragmentShader=A.fragmentShader.replace(/\}(?=[^.]*$)/g,e.fragmentEnd+`
}`)),e.override)for(let c in e.override){const u=e.override[c],f=t[c]=t[c]||{value:null};for(let p in u)f[p]=u[p];f.mixed&&(e.uniforms||(e.uniforms={}),e.uniforms[c]=f)}if(s&&s.templates&&s.templates.length){e.class=e.class||s.class;for(let c of s.templates)hg(A,c,cg,h);for(let c in s.uniforms){const u=s.uniforms[c];u.linked&&(t[c]=u)}}if(th(o,e,A),o.setValues(A),o.isCustomMaterial)for(let c in t)Zc[c]&&t[c].value&&(o[c]=t[c].value);for(let c in h)h[c]===!1&&delete h[c];return tg(l)&&h.DEPTH_PACKING===void 0&&(h.DEPTH_PACKING=Ed),o}Object.assign($p.prototype,{extend:pi,uniform:jc,clone:Wa,link:Xc,copy:Za});Object.assign(mr.prototype,{extend:pi,uniform:jc,clone:Wa,link:Xc,copy:Za});if(mr.prototype.customDepthMaterial!==void 0){const l={_customDepthMaterial:{enumerable:!0,value:void 0,writable:!0},_customDistanceMaterial:{enumerable:!0,value:void 0,writable:!0},customDepthMaterial:{get:function(){return this._customDepthMaterial||(this.material&&this.material.customDepthMaterial?this.material.customDepthMaterial:void 0)},set:function(e){this._customDepthMaterial=e}},customDistanceMaterial:{get:function(){return this._customDistanceMaterial||(this.material&&this.material.customDistanceMaterial?this.material.customDistanceMaterial:void 0)},set:function(e){this._customDistanceMaterial=e}}};Object.defineProperties(_n.prototype,l),Object.defineProperties(Xa.prototype,l)}pi.CustomMaterial=function(e){mr.call(this,e),this.type="CustomMaterial"};Object.assign(pi.CustomMaterial.prototype,qc.prototype,mr.prototype,jp.prototype,{isShaderMaterial:!0,isCustomMaterial:!0,isMeshPhongMaterial:!1,isMeshDistanceMaterial:!1,isMeshMatcapMaterial:!1,isShadowMaterial:!1,isSpriteMaterial:!1,isRawShaderMaterial:!1,isPointsMaterial:!1,isMeshPhysicalMaterial:!1,isMeshStandardMaterial:!1,isMeshToonMaterial:!1,isMeshNormalMaterial:!1,isMeshLambertMaterial:!1,isMeshDepthMaterial:!1,isMeshBasicMaterial:!1,isLineDashedMaterial:!1,isLineBasicMaterial:!1,isMaterial:!1,isMeshFaceMaterial:!1,isMultiMaterial:!1,isPointCloudMaterial:!1,isParticleBasicMaterial:!1,isParticleSystemMaterial:!1,constructor:pi.CustomMaterial,map:null,aoMap:null,envMap:null,bumpMap:null,normalMap:null,lightMap:null,emissiveMap:null,specularMap:null,roughnessMap:null,metalnessMap:null,alphaMap:null,displacementMap:null,clearcoatMap:null,clearcoatRoughnessMap:null,clearcoatNormalMap:null,normalMapType:Wp,combine:Zp,clone:function(l){const e=Vc.call(this);return this.map&&(e.map=this.map),this.aoMap&&(e.aoMap=this.aoMap),this.envMap&&(e.envMap=this.envMap),this.bumpMap&&(e.bumpMap=this.bumpMap),this.normalMap&&(e.normalMap=this.normalMap),this.lightMap&&(e.lightMap=this.lightMap),this.emissiveMap&&(e.emissiveMap=this.emissiveMap),this.specularMap&&(e.specularMap=this.specularMap),this.roughnessMap&&(e.roughnessMap=this.roughnessMap),this.metalnessMap&&(e.metalnessMap=this.metalnessMap),this.alphaMap&&(e.alphaMap=this.alphaMap),this.displacementMap&&(e.displacementMap=this.displacementMap),this.clearcoatMap&&(e.clearcoatMap=this.clearcoatMap),this.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap),this.clearcoatNormalMap&&(e.clearcoatNormalMap=this.clearcoatNormalMap),e.templates=this.templates,e}});Object.defineProperties(pi.CustomMaterial.prototype,{reflectivity:{get:function(){return this.uniforms.reflectivity?this.uniforms.reflectivity.value:0},set:function(l){this.uniforms.reflectivity.value=l}},specular:{get:function(){return this.uniforms.specular===void 0&&(this.uniforms.specular={value:new be("white")}),this.uniforms.specular.value},set:function(l){this.uniforms.specular===void 0&&(this.uniforms.specular={value:l}),this.uniforms.specular.value=l}},shininess:{get:function(){return this.uniforms.shininess?this.uniforms.shininess.value:0},set:function(l){this.uniforms.shininess===void 0&&(this.uniforms.shininess={value:l}),this.uniforms.shininess.value=l}}});class $a extends Ao{constructor(e){super(e),this.type="CustomMaterial"}get specular(){return this.uniforms.specular===void 0&&(this.uniforms.specular={value:new be("white")}),this.uniforms.specular.value}set specular(e){this.uniforms.specular===void 0&&(this.uniforms.specular={value:e}),this.uniforms.specular.value=e}get shininess(){return this.uniforms.shininess?this.uniforms.shininess.value:0}set shininess(e){this.uniforms.shininess===void 0&&(this.uniforms.shininess={value:e}),this.uniforms.shininess.value=e}get reflectivity(){return this.uniforms.reflectivity?this.uniforms.reflectivity.value:0}set reflectivity(e){this.uniforms.reflectivity.value=e}}Object.assign($a,pi.CustomMaterial);Object.assign($a.prototype,pi.CustomMaterial.prototype,{copy:Za,clone:Wa});let Wc;const ig=["bumpScale","roughness","metalness","shininess","envMapIntensity","opacity","dashSize","totalSize"],sg={bumpScale:"bumpScale",roughness:"roughness",metalness:"metalness",shininess:"shininess",envMapIntensity:"envMapIntensity",opacity:"opacity",dashSize:"dashSize",totalSize:"totalSize"},rg=["map","aoMap","envMap","bumpMap","normalMap","lightMap","emissiveMap","specularMap","roughnessMap","metalnessMap","alphaMap","displacementMap"],VA={MeshLambertMaterial:{id:"meshlambert",name:"lambert"},MeshBasicMaterial:{id:"meshbasic",name:"basic"},MeshStandardMaterial:{id:"meshphysical",name:"physical"},MeshPhongMaterial:{id:"meshphong",name:"phong"},MeshMatcapMaterial:{id:"meshmatcap",name:"matcap"},MeshToonMaterial:{id:"meshtoon",name:"toon"},PointsMaterial:{id:"points",name:"points"},LineDashedMaterial:{id:"dashed",name:"linedashed"},MeshDepthMaterial:{id:"depth",name:"depth"},MeshNormalMaterial:{id:"normal",name:"normal"},MeshDistanceMaterial:{id:"distanceRGBA",name:"distanceRGBA"},SpriteMaterial:{id:"sprite",name:"sprite"}},XA={lightsBegin:"?#include <lights_fragment_maps>",lightsEnd:"?#include <aomap_fragment>",colorBegin:"?#include <logdepthbuf_fragment>",colorEnd:"?#include <tonemapping_fragment>",transformBegin:"?#include <morphtarget_vertex>",transformEnd:"?#include <project_vertex>"},og={alphaTest:{as:"ALPHATEST",not:0}},Qs={opacity:{value:1},specular:{value:new Xp(1118481)}},jA={points:Ne.points,sprite:Ne.sprite,dashed:{scale:{value:1},dashSize:{value:1},totalSize:{value:2}},normal:{opacity:Qs.opacity},toon:{specular:Qs.specular,shininess:{value:30}},standard:{shininess:{value:30},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}},physical:{shininess:{value:30},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}},phong:{specular:Qs.specular,shininess:{value:30}},cube:{opacity:Qs.opacity},distanceRGBA:{nearDistance:{value:1},farDistance:{value:1e3}},shadow:{opacity:Qs.opacity}},Zc={map:"USE_MAP",aoMap:"USE_AOMAP",envMap:"USE_ENVMAP",bumpMap:"USE_BUMPMAP",normalMap:"USE_NORMALMAP",lightMap:"USE_LIGHTMAP",emissiveMap:"USE_EMISSIVEMAP",specularMap:"USE_SPECULARMAP",roughnessMap:"USE_ROUGHNESSMAP",metalnessMap:"USE_METALNESSMAP",alphaMap:"USE_ALPHAMAP",displacementMap:"USE_DISPLACEMENTMAP"};function ag(l,e){l&&(l.envMap&&Ge(Ne.envmap,e),l.aoMap&&Ge(Ne.aomap,e),l.lightMap&&Ge(Ne.lightmap,e),l.bumpMap&&Ge(Ne.bumpmap,e),l.normalMap&&Ge(Ne.normalmap,e),l.displacementMap&&Ge(Ne.displacementmap,e),l.clearcoatNormalMap&&Ge(Ne.clearcoatnormalmap,e))}function Ag(l,e,t){ag(e.uniforms,t),e.common!==!1&&Ge(Ne.common,t),jA[l]!==void 0&&Ge(jA[l],t);const n=e.fog||(e.material?e.material.fog||e.material.useFog:null),i=e.lights||(e.material?e.material.lights:null);if(n&&Ge(Ne.fog,t),i)if(e.use){const s=e.use;s.indexOf("sharedLights")>-1;const r=s.indexOf("shadows")>-1;s.indexOf("PointLight")>-1&&(Ge(Ne.lights.pointLights,t),r&&(Ge(Ne.pointLightShadows,t),Ge(Ne.pointShadowMap,t),Ge(Ne.pointShadowMatrix,t))),s.indexOf("SpotLight")>-1&&(Ge(Ne.lights.spotLights,t),r&&(Ge(Ne.spotLightShadows,t),Ge(Ne.spotShadowMap,t),Ge(Ne.spotShadowMatrix,t))),s.indexOf("DirectionalLight")>-1&&(Ge(Ne.lights.directionalLights,t),r&&(Ge(Ne.directionalLightShadows,t),Ge(Ne.directionalShadowMap,t),Ge(Ne.directionalShadowMatrix,t))),s.indexOf("LightProbe")>-1&&Ge(Ne.lights.lightProbe,t),s.indexOf("AmbientLight")>-1&&Ge(Ne.lights.ambientLightColor,t),s.indexOf("ReactAreaLight")>-1&&Ge(Ne.lights.rectAreaLights,t),s.indexOf("HemisphereLight")>-1&&Ge(Ne.lights.hemisphereLights,t)}else Ge(Wc,t);return t}function $c(l,e={}){for(let t in l){const n=l[t];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?e[t]=n.clone():Array.isArray(n)?e[t]=n.slice():e[t]=n}return e}function eh(l){return l&&l.value!==void 0?l:{value:l}}function Ge(l,e={},t=!1,n=!1,i=!1,s=!1){for(let r in l){const o=l[r];o&&(t&&(o.value===null||o.value===0)||(o.shared||o.linked&&s?e[r]=o:(e[r]=$c(o),n===!0&&(e[r].shared=!0),i===!0&&(e[r].mixed=!0))))}return e}function ar(l,e){for(let t in e){const n=e[t];if(XA[t]!==void 0&&(t=XA[t]),n instanceof Object)ns[t]===void 0?console.error('ShaderMaterial.extend: ShaderChunk "%s" not found',t):l=l.replace("#include <"+t+">",ar(ns[t],n));else if(t[0]==="@"){const i=t.substr(1);l=l.replace(i,n)}else if(t[0]==="?"){const i=t.substr(1);l=l.replace(i,n+`
`+i)}else l?l=l.replace(t,t+`
`+n):console.error("THREE.patchShader: chunk not found '%s'",t)}return l}function lg(l,e,t,n,i){e&&e.value&&sg[l]!==void 0&&(i[l]=e.value),Zc[l]!==void 0&&e&&e.value!==void 0&&(i[l]=e.value);const s=og[l];s!==void 0&&(s.not===void 0||s.not!==e.value)&&(t[s.as]=e.value)}function th(l,e,t,n){if(!(!e.uniforms||!t))for(let i in e.uniforms){t.uniforms[i]||(t.uniforms[i]={});let s=eh(e.uniforms[i]);t.uniforms[i]=s}}function cg(l,e,t){if(l.uniforms)for(let n in l.uniforms){let i=l.uniforms[n];i&&(i=eh(i),i.mixed&&e.uniforms[n]===void 0&&(e.uniforms[n]=i.shared?i:$c(i),t&&lg(n,i,t,l,l)))}}function WA(l,e,t){return t.explicit===!1?Ge(uc[l].uniforms,e):Ag(l,t,e)}function hg(l,e,t=th,n=null){let i=(e.header||"")+`
`,s=(e.vertexHeader||"")+`
`+l.vertexShader,r=(e.fragmentHeader||"")+`
`+l.fragmentShader;return e.vertexEnd&&(s=s.replace(/\}(?=[^.]*$)/g,e.vertexEnd+`
}`)),e.fragmentEnd&&(r=r.replace(/\}(?=[^.]*$)/g,e.fragmentEnd+`
}`)),e.vertex!==void 0&&(s=ar(s,e.vertex)),e.fragment!==void 0&&(r=ar(r,e.fragment)),l.vertexShader=i+s,l.fragmentShader=i+r,t instanceof Function&&t(e,l,n,n),l}Wc=Ge(Ne.lights,{},!1,!0);/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var ZA=function(l){return URL.createObjectURL(new Blob([l],{type:"text/javascript"}))};try{URL.revokeObjectURL(ZA(""))}catch{ZA=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var cn=Uint8Array,Ai=Uint16Array,Ta=Uint32Array,nh=new cn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ih=new cn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ug=new cn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sh=function(l,e){for(var t=new Ai(31),n=0;n<31;++n)t[n]=e+=1<<l[n-1];for(var i=new Ta(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},rh=sh(nh,2),oh=rh[0],dg=rh[1];oh[28]=258,dg[258]=28;var fg=sh(ih,0),pg=fg[0],Qa=new Ai(32768);for(var $e=0;$e<32768;++$e){var ni=($e&43690)>>>1|($e&21845)<<1;ni=(ni&52428)>>>2|(ni&13107)<<2,ni=(ni&61680)>>>4|(ni&3855)<<4,Qa[$e]=((ni&65280)>>>8|(ni&255)<<8)>>>1}var Ws=function(l,e,t){for(var n=l.length,i=0,s=new Ai(e);i<n;++i)++s[l[i]-1];var r=new Ai(e);for(i=0;i<e;++i)r[i]=r[i-1]+s[i-1]<<1;var o;if(t){o=new Ai(1<<e);var A=15-e;for(i=0;i<n;++i)if(l[i])for(var h=i<<4|l[i],d=e-l[i],a=r[l[i]-1]++<<d,c=a|(1<<d)-1;a<=c;++a)o[Qa[a]>>>A]=h}else for(o=new Ai(n),i=0;i<n;++i)l[i]&&(o[i]=Qa[r[l[i]-1]++]>>>15-l[i]);return o},Br=new cn(288);for(var $e=0;$e<144;++$e)Br[$e]=8;for(var $e=144;$e<256;++$e)Br[$e]=9;for(var $e=256;$e<280;++$e)Br[$e]=7;for(var $e=280;$e<288;++$e)Br[$e]=8;var ah=new cn(32);for(var $e=0;$e<32;++$e)ah[$e]=5;var gg=Ws(Br,9,1),mg=Ws(ah,5,1),ko=function(l){for(var e=l[0],t=1;t<l.length;++t)l[t]>e&&(e=l[t]);return e},pn=function(l,e,t){var n=e/8|0;return(l[n]|l[n+1]<<8)>>(e&7)&t},Uo=function(l,e){var t=e/8|0;return(l[t]|l[t+1]<<8|l[t+2]<<16)>>(e&7)},Bg=function(l){return(l/8|0)+(l&7&&1)},Cg=function(l,e,t){(t==null||t>l.length)&&(t=l.length);var n=new(l instanceof Ai?Ai:l instanceof Ta?Ta:cn)(t-e);return n.set(l.subarray(e,t)),n},_g=function(l,e,t){var n=l.length;if(!n||t&&!t.l&&n<5)return e||new cn(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new cn(n*3));var r=function(P){var R=e.length;if(P>R){var S=new cn(Math.max(R*2,P));S.set(e),e=S}},o=t.f||0,A=t.p||0,h=t.b||0,d=t.l,a=t.d,c=t.m,u=t.n,f=n*8;do{if(!d){t.f=o=pn(l,A,1);var p=pn(l,A+1,3);if(A+=3,p)if(p==1)d=gg,a=mg,c=9,u=5;else if(p==2){var I=pn(l,A,31)+257,_=pn(l,A+10,15)+4,C=I+pn(l,A+5,31)+1;A+=14;for(var E=new cn(C),v=new cn(19),x=0;x<_;++x)v[ug[x]]=pn(l,A+x*3,7);A+=_*3;for(var w=ko(v),D=(1<<w)-1,G=Ws(v,w,1),x=0;x<C;){var O=G[pn(l,A,D)];A+=O&15;var m=O>>>4;if(m<16)E[x++]=m;else{var T=0,b=0;for(m==16?(b=3+pn(l,A,3),A+=2,T=E[x-1]):m==17?(b=3+pn(l,A,7),A+=3):m==18&&(b=11+pn(l,A,127),A+=7);b--;)E[x++]=T}}var F=E.subarray(0,I),U=E.subarray(I);c=ko(F),u=ko(U),d=Ws(F,c,1),a=Ws(U,u,1)}else throw"invalid block type";else{var m=Bg(A)+4,g=l[m-4]|l[m-3]<<8,B=m+g;if(B>n){if(s)throw"unexpected EOF";break}i&&r(h+g),e.set(l.subarray(m,B),h),t.b=h+=g,t.p=A=B*8;continue}if(A>f){if(s)throw"unexpected EOF";break}}i&&r(h+131072);for(var te=(1<<c)-1,j=(1<<u)-1,J=A;;J=A){var T=d[Uo(l,A)&te],ee=T>>>4;if(A+=T&15,A>f){if(s)throw"unexpected EOF";break}if(!T)throw"invalid length/literal";if(ee<256)e[h++]=ee;else if(ee==256){J=A,d=null;break}else{var ae=ee-254;if(ee>264){var x=ee-257,W=nh[x];ae=pn(l,A,(1<<W)-1)+oh[x],A+=W}var _e=a[Uo(l,A)&j],Ee=_e>>>4;if(!_e)throw"invalid distance";A+=_e&15;var U=pg[Ee];if(Ee>3){var W=ih[Ee];U+=Uo(l,A)&(1<<W)-1,A+=W}if(A>f){if(s)throw"unexpected EOF";break}i&&r(h+131072);for(var N=h+ae;h<N;h+=4)e[h]=e[h-U],e[h+1]=e[h+1-U],e[h+2]=e[h+2-U],e[h+3]=e[h+3-U];h=N}}t.l=d,t.p=J,t.b=h,d&&(o=1,t.m=c,t.d=a,t.n=u)}while(!o);return h==e.length?e:Cg(e,0,h)},Eg=new cn(0),Ig=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function yg(l,e){return _g((Ig(l),l.subarray(2,-4)),e)}var vg=typeof TextDecoder<"u"&&new TextDecoder,wg=0;try{vg.decode(Eg,{stream:!0}),wg=1}catch{}function Ah(l,e,t){const n=t.length-l-1;if(e>=t[n])return n-1;if(e<=t[l])return l;let i=l,s=n,r=Math.floor((i+s)/2);for(;e<t[r]||e>=t[r+1];)e<t[r]?s=r:i=r,r=Math.floor((i+s)/2);return r}function xg(l,e,t,n){const i=[],s=[],r=[];i[0]=1;for(let o=1;o<=t;++o){s[o]=e-n[l+1-o],r[o]=n[l+o]-e;let A=0;for(let h=0;h<o;++h){const d=r[h+1],a=s[o-h],c=i[h]/(d+a);i[h]=A+d*c,A=a*c}i[o]=A}return i}function Mg(l,e,t,n){const i=Ah(l,n,e),s=xg(i,n,l,e),r=new bn(0,0,0,0);for(let o=0;o<=l;++o){const A=t[i-l+o],h=s[o],d=A.w*h;r.x+=A.x*d,r.y+=A.y*d,r.z+=A.z*d,r.w+=A.w*h}return r}function Tg(l,e,t,n,i){const s=[];for(let a=0;a<=t;++a)s[a]=0;const r=[];for(let a=0;a<=n;++a)r[a]=s.slice(0);const o=[];for(let a=0;a<=t;++a)o[a]=s.slice(0);o[0][0]=1;const A=s.slice(0),h=s.slice(0);for(let a=1;a<=t;++a){A[a]=e-i[l+1-a],h[a]=i[l+a]-e;let c=0;for(let u=0;u<a;++u){const f=h[u+1],p=A[a-u];o[a][u]=f+p;const m=o[u][a-1]/o[a][u];o[u][a]=c+f*m,c=p*m}o[a][a]=c}for(let a=0;a<=t;++a)r[0][a]=o[a][t];for(let a=0;a<=t;++a){let c=0,u=1;const f=[];for(let p=0;p<=t;++p)f[p]=s.slice(0);f[0][0]=1;for(let p=1;p<=n;++p){let m=0;const g=a-p,B=t-p;a>=p&&(f[u][0]=f[c][0]/o[B+1][g],m=f[u][0]*o[g][B]);const I=g>=-1?1:-g,_=a-1<=B?p-1:t-a;for(let E=I;E<=_;++E)f[u][E]=(f[c][E]-f[c][E-1])/o[B+1][g+E],m+=f[u][E]*o[g+E][B];a<=B&&(f[u][p]=-f[c][p-1]/o[B+1][a],m+=f[u][p]*o[a][B]),r[p][a]=m;const C=c;c=u,u=C}}let d=t;for(let a=1;a<=n;++a){for(let c=0;c<=t;++c)r[a][c]*=d;d*=t-a}return r}function Qg(l,e,t,n,i){const s=i<l?i:l,r=[],o=Ah(l,n,e),A=Tg(o,n,l,s,e),h=[];for(let d=0;d<t.length;++d){const a=t[d].clone(),c=a.w;a.x*=c,a.y*=c,a.z*=c,h[d]=a}for(let d=0;d<=s;++d){const a=h[o-l].clone().multiplyScalar(A[d][0]);for(let c=1;c<=l;++c)a.add(h[o-l+c].clone().multiplyScalar(A[d][c]));r[d]=a}for(let d=s+1;d<=i+1;++d)r[d]=new bn(0,0,0);return r}function Dg(l,e){let t=1;for(let i=2;i<=l;++i)t*=i;let n=1;for(let i=2;i<=e;++i)n*=i;for(let i=2;i<=l-e;++i)n*=i;return t/n}function bg(l){const e=l.length,t=[],n=[];for(let s=0;s<e;++s){const r=l[s];t[s]=new Qe(r.x,r.y,r.z),n[s]=r.w}const i=[];for(let s=0;s<e;++s){const r=t[s].clone();for(let o=1;o<=s;++o)r.sub(i[s-o].clone().multiplyScalar(Dg(s,o)*n[o]));i[s]=r.divideScalar(n[0])}return i}function Sg(l,e,t,n,i){const s=Qg(l,e,t,n,i);return bg(s)}class Fg extends yd{constructor(e,t,n,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let r=0;r<n.length;++r){const o=n[r];this.controlPoints[r]=new bn(o.x,o.y,o.z,o.w)}}getPoint(e,t=new Qe){const n=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Mg(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t=new Qe){const n=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Sg(this.degree,this.knots,this.controlPoints,i,1);return n.copy(s[1]).normalize(),n}}let De,At,Lt;class Rg extends ki{constructor(e){super(e)}load(e,t,n,i){const s=this,r=s.path===""?os.extractUrlBase(e):s.path,o=new Cn(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(A){try{t(s.parse(A,r))}catch(h){i?i(h):console.error(h),s.manager.itemError(e)}},n,i)}parse(e,t){if(Ug(e))De=new kg().parse(e);else{const i=uh(e);if(!Ng(i))throw new Error("THREE.FBXLoader: Unknown format.");if(el(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+el(i));De=new Pg().parse(i)}const n=new oo(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Og(n,this.manager).parse(De)}}class Og{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){At=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),s=new Lg().parse(i);return this.parseScene(i,s,n),Lt}parseConnections(){const e=new Map;return"Connections"in De&&De.Connections.connections.forEach(function(n){const i=n[0],s=n[1],r=n[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:s,relationship:r};e.get(i).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const A={ID:i,relationship:r};e.get(s).children.push(A)}),e}parseImages(){const e={},t={};if("Video"in De.Objects){const n=De.Objects.Video;for(const i in n){const s=n[i],r=parseInt(i);if(e[r]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,A=typeof s.Content=="string"&&s.Content!=="";if(o||A){const h=this.parseImage(n[i]);t[s.RelativeFilename||s.Filename]=h}}}}for(const n in e){const i=e[n];t[i]!==void 0?e[n]=t[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const r=new Uint8Array(t);return window.URL.createObjectURL(new Blob([r],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in De.Objects){const n=De.Objects.Texture;for(const i in n){const s=this.parseTexture(n[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,r=i!==void 0?i.value:0,o=s!==void 0?s.value:0;if(n.wrapS=r===0?qn:sr,n.wrapT=o===0?qn:sr,"Scaling"in e){const A=e.Scaling.value;n.repeat.x=A[0],n.repeat.y=A[1]}if("Translation"in e){const A=e.Translation.value;n.offset.x=A[0],n.offset.y=A[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,s=At.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(n=t[s[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let r;const o=e.FileName.slice(-3).toLowerCase();if(o==="tga"){const A=this.manager.getHandler(".tga");A===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),r=new or):(A.setPath(this.textureLoader.path),r=A.load(n))}else o==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),r=new or):r=this.textureLoader.load(n);return this.textureLoader.setPath(i),r}parseMaterials(e){const t=new Map;if("Material"in De.Objects){const n=De.Objects.Material;for(const i in n){const s=this.parseMaterial(n[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!At.has(n))return null;const r=this.parseParameters(e,t,n);let o;switch(s.toLowerCase()){case"phong":o=new kr;break;case"lambert":o=new vd;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new kr;break}return o.setValues(r),o.name=i,o}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new be().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new be().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new be().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new be().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new be().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new be().fromArray(e.SpecularColor.value));const s=this;return At.get(n).children.forEach(function(r){const o=r.relationship;switch(o){case"Bump":i.bumpMap=s.getTexture(t,r.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,r.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,r.ID),i.map!==void 0&&("colorSpace"in i.map?i.map.colorSpace="srgb":i.map.encoding=3001);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,r.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,r.ID),i.emissiveMap!==void 0&&("colorSpace"in i.emissiveMap?i.emissiveMap.colorSpace="srgb":i.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,r.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,r.ID),i.envMap!==void 0&&(i.envMap.mapping=wd,"colorSpace"in i.envMap?i.envMap.colorSpace="srgb":i.envMap.encoding=3001);break;case"SpecularColor":i.specularMap=s.getTexture(t,r.ID),i.specularMap!==void 0&&("colorSpace"in i.specularMap?i.specularMap.colorSpace="srgb":i.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,r.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),i}getTexture(e,t){return"LayeredTexture"in De.Objects&&t in De.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=At.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in De.Objects){const n=De.Objects.Deformer;for(const i in n){const s=n[i],r=At.get(parseInt(i));if(r){if(s.attrType==="Skin"){const o=this.parseSkeleton(r,n);o.ID=i,r.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=r.parents[0].ID,e[i]=o}else if(s.attrType==="BlendShape"){const o={id:i};o.rawTargets=this.parseMorphTargets(r,n),o.id=i,r.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=o}}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e==null||e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const r={ID:i.ID,indices:[],weights:[],transformLink:new ze().fromArray(s.TransformLink.a)};"Indexes"in s&&(r.indices=s.Indexes.a,r.weights=s.Weights.a),n.push(r)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],r=t[s.ID],o={name:r.attrName,initialWeight:r.DeformPercent,id:r.id,fullWeights:r.FullWeights.a};if(r.attrType!=="BlendShapeChannel")return;o.geoID=At.get(parseInt(s.ID)).children.filter(function(A){return A.relationship===void 0})[0].ID,n.push(o)}return n}parseScene(e,t,n){Lt=new Si;const i=this.parseModels(e.skeletons,t,n),s=De.Objects.Model,r=this;i.forEach(function(A){const h=s[A.ID];r.setLookAtProperties(A,h),At.get(A.ID).parents.forEach(function(a){const c=i.get(a.ID);c!==void 0&&c.add(A)}),A.parent===null&&Lt.add(A)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),Lt.traverse(function(A){if(A.userData.transformData){A.parent&&(A.userData.transformData.parentMatrix=A.parent.matrix,A.userData.transformData.parentMatrixWorld=A.parent.matrixWorld);const h=ch(A.userData.transformData);A.applyMatrix4(h),A.updateWorldMatrix()}});const o=new Gg().parse();Lt.children.length===1&&Lt.children[0].isGroup&&(Lt.children[0].animations=o,Lt=Lt.children[0]),Lt.animations=o}parseModels(e,t,n){const i=new Map,s=De.Objects.Model;for(const r in s){const o=parseInt(r),A=s[r],h=At.get(o);let d=this.buildSkeleton(h,e,o,A.attrName);if(!d){switch(A.attrType){case"Camera":d=this.createCamera(h);break;case"Light":d=this.createLight(h);break;case"Mesh":d=this.createMesh(h,t,n);break;case"NurbsCurve":d=this.createCurve(h,t);break;case"LimbNode":case"Root":d=new Ba;break;case"Null":default:d=new Si;break}d.name=A.attrName?rr.sanitizeNodeName(A.attrName):"",d.ID=o}this.getTransformData(d,A),i.set(o,d)}return i}buildSkeleton(e,t,n,i){let s=null;return e.parents.forEach(function(r){for(const o in t){const A=t[o];A.rawBones.forEach(function(h,d){if(h.ID===r.ID){const a=s;s=new Ba,s.matrixWorld.copy(h.transformLink),s.name=i?rr.sanitizeNodeName(i):"",s.ID=n,A.bones[d]=s,a!==null&&s.add(a)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(i){const s=De.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new Ys;else{let i=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(i=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let r=1e3;n.FarPlane!==void 0&&(r=n.FarPlane.value/1e3);let o=window.innerWidth,A=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(o=n.AspectWidth.value,A=n.AspectHeight.value);const h=o/A;let d=45;n.FieldOfView!==void 0&&(d=n.FieldOfView.value);const a=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:t=new Fi(d,h,s,r),a!==null&&t.setFocalLength(a);break;case 1:t=new ro(-o/2,o/2,A/2,-A/2,s,r);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Ys;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(i){const s=De.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new Ys;else{let i;n.LightType===void 0?i=0:i=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=new be().fromArray(n.Color.value).convertSRGBToLinear());let r=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(r=0);let o=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?o=0:o=n.FarAttenuationEnd.value);const A=1;switch(i){case 0:t=new ga(s,r,o,A);break;case 1:t=new rc(s,r);break;case 2:let h=Math.PI/3;n.InnerAngle!==void 0&&(h=Gt.degToRad(n.InnerAngle.value));let d=0;n.OuterAngle!==void 0&&(d=Gt.degToRad(n.OuterAngle.value),d=Math.max(d,1)),t=new sc(s,r,o,h,d,A);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new ga(s,r);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,s=null,r=null;const o=[];return e.children.forEach(function(A){t.has(A.ID)&&(s=t.get(A.ID)),n.has(A.ID)&&o.push(n.get(A.ID))}),o.length>1?r=o:o.length>0?r=o[0]:(r=new kr({color:13421772}),o.push(r)),"color"in s.attributes&&o.forEach(function(A){A.vertexColors=!0}),s.FBX_Deformer?(i=new Xa(s,r),i.normalizeSkinWeights()):i=new _n(s,r),i}createCurve(e,t){const n=e.children.reduce(function(s,r){return t.has(r.ID)&&(s=t.get(r.ID)),s},null),i=new Xs({color:3342591,linewidth:1});return new ac(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=hh(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&At.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=De.Objects.Model[i.ID];if("Lcl_Translation"in s){const r=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(r),Lt.add(e.target)):e.lookAt(new Qe().fromArray(r))}}})}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const s in e){const r=e[s];At.get(parseInt(r.ID)).parents.forEach(function(A){if(t.has(A.ID)){const h=A.ID;At.get(h).parents.forEach(function(a){n.has(a.ID)&&n.get(a.ID).bind(new Ac(r.bones),i[a.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in De.Objects){const t=De.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new ze().fromArray(s.Matrix.a)}):e[i.Node]=new ze().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in De&&"AmbientColor"in De.GlobalSettings){const e=De.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(t!==0||n!==0||i!==0){const s=new be(t,n,i).convertSRGBToLinear();Lt.add(new xd(s,1))}}}}class Lg{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in De.Objects){const n=De.Objects.Geometry;for(const i in n){const s=At.get(parseInt(i)),r=this.parseGeometry(s,n[i],e);t.set(parseInt(i),r)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const i=n.skeletons,s=[],r=e.parents.map(function(a){return De.Objects.Model[a.ID]});if(r.length===0)return;const o=e.children.reduce(function(a,c){return i[c.ID]!==void 0&&(a=i[c.ID]),a},null);e.children.forEach(function(a){n.morphTargets[a.ID]!==void 0&&s.push(n.morphTargets[a.ID])});const A=r[0],h={};"RotationOrder"in A&&(h.eulerOrder=hh(A.RotationOrder.value)),"InheritType"in A&&(h.inheritType=parseInt(A.InheritType.value)),"GeometricTranslation"in A&&(h.translation=A.GeometricTranslation.value),"GeometricRotation"in A&&(h.rotation=A.GeometricRotation.value),"GeometricScaling"in A&&(h.scale=A.GeometricScaling.value);const d=ch(h);return this.genGeometry(t,o,s,d)}genGeometry(e,t,n,i){const s=new ui;e.attrName&&(s.name=e.attrName);const r=this.parseGeoNode(e,t),o=this.genBuffers(r),A=new Dt(o.vertex,3);if(A.applyMatrix4(i),s.setAttribute("position",A),o.colors.length>0&&s.setAttribute("color",new Dt(o.colors,3)),t&&(s.setAttribute("skinIndex",new Md(o.weightsIndices,4)),s.setAttribute("skinWeight",new Dt(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const h=new xi().getNormalMatrix(i),d=new Dt(o.normal,3);d.applyNormalMatrix(h),s.setAttribute("normal",d)}if(o.uvs.forEach(function(h,d){let a="uv"+(d+1).toString();d===0&&(a="uv"),s.setAttribute(a,new Dt(o.uvs[d],2))}),r.material&&r.material.mappingType!=="AllSame"){let h=o.materialIndex[0],d=0;if(o.materialIndex.forEach(function(a,c){a!==h&&(s.addGroup(d,c-d,h),h=a,d=c)}),s.groups.length>0){const a=s.groups[s.groups.length-1],c=a.start+a.count;c!==o.materialIndex.length&&s.addGroup(c,o.materialIndex.length-c,h)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,n,i),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(r,o){n.weightTable[r]===void 0&&(n.weightTable[r]=[]),n.weightTable[r].push({id:s,weight:i.weights[o]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,s=!1,r=[],o=[],A=[],h=[],d=[],a=[];const c=this;return e.vertexIndices.forEach(function(u,f){let p,m=!1;u<0&&(u=u^-1,m=!0);let g=[],B=[];if(r.push(u*3,u*3+1,u*3+2),e.color){const I=Mr(f,n,u,e.color);A.push(I[0],I[1],I[2])}if(e.skeleton){if(e.weightTable[u]!==void 0&&e.weightTable[u].forEach(function(I){B.push(I.weight),g.push(I.id)}),B.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const I=[0,0,0,0],_=[0,0,0,0];B.forEach(function(C,E){let v=C,x=g[E];_.forEach(function(w,D,G){if(v>w){G[D]=v,v=w;const O=I[D];I[D]=x,x=O}})}),g=I,B=_}for(;B.length<4;)B.push(0),g.push(0);for(let I=0;I<4;++I)d.push(B[I]),a.push(g[I])}if(e.normal){const I=Mr(f,n,u,e.normal);o.push(I[0],I[1],I[2])}e.material&&e.material.mappingType!=="AllSame"&&(p=Mr(f,n,u,e.material)[0],p<0&&(c.negativeMaterialIndices=!0,p=0)),e.uv&&e.uv.forEach(function(I,_){const C=Mr(f,n,u,I);h[_]===void 0&&(h[_]=[]),h[_].push(C[0]),h[_].push(C[1])}),i++,m&&(i>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),c.genFace(t,e,r,p,o,A,h,d,a,i),n++,i=0,r=[],o=[],A=[],h=[],d=[],a=[])}),t}genFace(e,t,n,i,s,r,o,A,h,d){for(let a=2;a<d;a++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(a-1)*3]]),e.vertex.push(t.vertexPositions[n[(a-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(a-1)*3+2]]),e.vertex.push(t.vertexPositions[n[a*3]]),e.vertex.push(t.vertexPositions[n[a*3+1]]),e.vertex.push(t.vertexPositions[n[a*3+2]]),t.skeleton&&(e.vertexWeights.push(A[0]),e.vertexWeights.push(A[1]),e.vertexWeights.push(A[2]),e.vertexWeights.push(A[3]),e.vertexWeights.push(A[(a-1)*4]),e.vertexWeights.push(A[(a-1)*4+1]),e.vertexWeights.push(A[(a-1)*4+2]),e.vertexWeights.push(A[(a-1)*4+3]),e.vertexWeights.push(A[a*4]),e.vertexWeights.push(A[a*4+1]),e.vertexWeights.push(A[a*4+2]),e.vertexWeights.push(A[a*4+3]),e.weightsIndices.push(h[0]),e.weightsIndices.push(h[1]),e.weightsIndices.push(h[2]),e.weightsIndices.push(h[3]),e.weightsIndices.push(h[(a-1)*4]),e.weightsIndices.push(h[(a-1)*4+1]),e.weightsIndices.push(h[(a-1)*4+2]),e.weightsIndices.push(h[(a-1)*4+3]),e.weightsIndices.push(h[a*4]),e.weightsIndices.push(h[a*4+1]),e.weightsIndices.push(h[a*4+2]),e.weightsIndices.push(h[a*4+3])),t.color&&(e.colors.push(r[0]),e.colors.push(r[1]),e.colors.push(r[2]),e.colors.push(r[(a-1)*3]),e.colors.push(r[(a-1)*3+1]),e.colors.push(r[(a-1)*3+2]),e.colors.push(r[a*3]),e.colors.push(r[a*3+1]),e.colors.push(r[a*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(a-1)*3]),e.normal.push(s[(a-1)*3+1]),e.normal.push(s[(a-1)*3+2]),e.normal.push(s[a*3]),e.normal.push(s[a*3+1]),e.normal.push(s[a*3+2])),t.uv&&t.uv.forEach(function(c,u){e.uvs[u]===void 0&&(e.uvs[u]=[]),e.uvs[u].push(o[u][0]),e.uvs[u].push(o[u][1]),e.uvs[u].push(o[u][(a-1)*2]),e.uvs[u].push(o[u][(a-1)*2+1]),e.uvs[u].push(o[u][a*2]),e.uvs[u].push(o[u][a*2+1])})}addMorphTargets(e,t,n,i){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(r){r.rawTargets.forEach(function(o){const A=De.Objects.Geometry[o.geoID];A!==void 0&&s.genMorphGeometry(e,t,A,i,o.name)})})}genMorphGeometry(e,t,n,i,s){const r=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],o=n.Vertices!==void 0?n.Vertices.a:[],A=n.Indexes!==void 0?n.Indexes.a:[],h=e.attributes.position.count*3,d=new Float32Array(h);for(let f=0;f<A.length;f++){const p=A[f]*3;d[p]=o[f*3],d[p+1]=o[f*3+1],d[p+2]=o[f*3+2]}const a={vertexIndices:r,vertexPositions:d},c=this.genBuffers(a),u=new Dt(c.vertex,3);u.name=s||n.attrName,u.applyMatrix4(i),e.morphAttributes.position.push(u)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let s=[];n==="IndexToDirect"&&(s=e.ColorIndex.a);for(let r=0,o=new be;r<i.length;r+=4)o.fromArray(i,r).convertSRGBToLinear().toArray(i,r);return{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,s=[];for(let r=0;r<i.length;++r)s.push(r);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ui;const n=t-1,i=e.KnotVector.a,s=[],r=e.Points.a;for(let a=0,c=r.length;a<c;a+=4)s.push(new bn().fromArray(r,a));let o,A;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=n,A=i.length-1-o;for(let a=0;a<n;++a)s.push(s[a])}const d=new Fg(n,i,s,o,A).getPoints(s.length*12);return new ui().setFromPoints(d)}}class Gg{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const i=t[n],s=this.addClip(i);e.push(s)}return e}parseClips(){if(De.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=De.Objects.AnimationCurveNode,t=new Map;for(const n in e){const i=e[n];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=De.Objects.AnimationCurve;for(const n in t){const i={id:t[n].id,times:t[n].KeyTime.a.map(Hg),values:t[n].KeyValueFloat.a},s=At.get(i.id);if(s!==void 0){const r=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(r).curves.x=i:o.match(/Y/)?e.get(r).curves.y=i:o.match(/Z/)?e.get(r).curves.z=i:o.match(/d|DeformPercent/)&&e.has(r)&&(e.get(r).curves.morph=i)}}}parseAnimationLayers(e){const t=De.Objects.AnimationLayer,n=new Map;for(const i in t){const s=[],r=At.get(parseInt(i));r!==void 0&&(r.children.forEach(function(A,h){if(e.has(A.ID)){const d=e.get(A.ID);if(d.curves.x!==void 0||d.curves.y!==void 0||d.curves.z!==void 0){if(s[h]===void 0){const a=At.get(A.ID).parents.filter(function(c){return c.relationship!==void 0})[0].ID;if(a!==void 0){const c=De.Objects.Model[a.toString()];if(c===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",A);return}const u={modelName:c.attrName?rr.sanitizeNodeName(c.attrName):"",ID:c.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Lt.traverse(function(f){f.ID===c.id&&(u.transform=f.matrix,f.userData.transformData&&(u.eulerOrder=f.userData.transformData.eulerOrder))}),u.transform||(u.transform=new ze),"PreRotation"in c&&(u.preRotation=c.PreRotation.value),"PostRotation"in c&&(u.postRotation=c.PostRotation.value),s[h]=u}}s[h]&&(s[h][d.attr]=d)}else if(d.curves.morph!==void 0){if(s[h]===void 0){const a=At.get(A.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,c=At.get(a).parents[0].ID,u=At.get(c).parents[0].ID,f=At.get(u).parents[0].ID,p=De.Objects.Model[f],m={modelName:p.attrName?rr.sanitizeNodeName(p.attrName):"",morphName:De.Objects.Deformer[a].attrName};s[h]=m}s[h][d.attr]=d}}}),n.set(parseInt(i),s))}return n}parseAnimStacks(e){const t=De.Objects.AnimationStack,n={};for(const i in t){const s=At.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const r=e.get(s[0].ID);n[i]={name:t[i].attrName,layer:r}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(i){t=t.concat(n.generateTracks(i))}),new lc(e.name,-1,t)}generateTracks(e){const t=[];let n=new Qe,i=new Zi,s=new Qe;if(e.transform&&e.transform.decompose(n,i,s),n=n.toArray(),i=new oi().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");r!==void 0&&t.push(r)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const r=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);r!==void 0&&t.push(r)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");r!==void 0&&t.push(r)}if(e.DeformPercent!==void 0){const r=this.generateMorphTrack(e);r!==void 0&&t.push(r)}return t}generateVectorTrack(e,t,n,i){const s=this.getTimesForAllAxes(t),r=this.getKeyframeTrackValues(s,t,n);return new Ca(e+"."+i,s,r)}generateRotationTrack(e,t,n,i,s,r){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Gt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Gt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Gt.degToRad));const o=this.getTimesForAllAxes(t),A=this.getKeyframeTrackValues(o,t,n);i!==void 0&&(i=i.map(Gt.degToRad),i.push(r),i=new oi().fromArray(i),i=new Zi().setFromEuler(i)),s!==void 0&&(s=s.map(Gt.degToRad),s.push(r),s=new oi().fromArray(s),s=new Zi().setFromEuler(s).invert());const h=new Zi,d=new oi,a=[];for(let c=0;c<A.length;c+=3)d.set(A[c],A[c+1],A[c+2],r),h.setFromEuler(d),i!==void 0&&h.premultiply(i),s!==void 0&&h.multiply(s),h.toArray(a,c/3*4);return new Ea(e+".quaternion",o,a)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),i=Lt.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new _a(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,i){return n-i}),t.length>1){let n=1,i=t[0];for(let s=1;s<t.length;s++){const r=t[s];r!==i&&(t[n]=r,i=r,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const i=n,s=[];let r=-1,o=-1,A=-1;return e.forEach(function(h){if(t.x&&(r=t.x.times.indexOf(h)),t.y&&(o=t.y.times.indexOf(h)),t.z&&(A=t.z.times.indexOf(h)),r!==-1){const d=t.x.values[r];s.push(d),i[0]=d}else s.push(i[0]);if(o!==-1){const d=t.y.values[o];s.push(d),i[1]=d}else s.push(i[1]);if(A!==-1){const d=t.z.values[A];s.push(d),i[2]=d}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],i=e.values[t]-n,s=Math.abs(i);if(s>=180){const r=s/180,o=i/r;let A=n+o;const h=e.times[t-1],a=(e.times[t]-h)/r;let c=h+a;const u=[],f=[];for(;c<e.times[t];)u.push(c),c+=a,f.push(A),A+=o;e.times=tl(e.times,t,u),e.values=tl(e.values,t,f)}}}}class Pg{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new lh,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(i,s){const r=i.match(/^[\s\t]*;/),o=i.match(/^[\s\t]*$/);if(r||o)return;const A=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),h=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),d=i.match("^\\t{"+(t.currentIndent-1)+"}}");A?t.parseNodeBegin(i,A):h?t.parseNodeProperty(i,h,n[++s]):d?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(A){return A.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},r=this.parseNodeAttr(i),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in o?(n==="PoseNode"?o.PoseNode.push(s):o[n].id!==void 0&&(o[n]={},o[n][o[n].id]=o[n]),r.id!==""&&(o[n][r.id]=s)):typeof r.id=="number"?(o[n]={},o[n][r.id]=s):n!=="Properties70"&&(n==="PoseNode"?o[n]=[s]:o[n]=s),typeof r.id=="number"&&(s.id=r.id),r.name!==""&&(s.attrName=r.name),r.type!==""&&(s.attrType=r.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}}parseNodeProperty(e,t,n){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const r=this.getCurrentNode();if(r.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const A=s.split(",").slice(1),h=parseInt(A[0]),d=parseInt(A[1]);let a=s.split(",").slice(3);a=a.map(function(c){return c.trim().replace(/^"/,"")}),i="connections",s=[h,d],zg(s,a),r[i]===void 0&&(r[i]=[])}i==="Node"&&(r.id=s),i in r&&Array.isArray(r[i])?r[i].push(s):i!=="a"?r[i]=s:r.a=s,this.setCurrentProp(r,i),i==="a"&&s.slice(-1)!==","&&(r.a=Ho(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Ho(t.a))}parseNodeSpecialProperty(e,t,n){const i=n.split('",').map(function(d){return d.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],r=i[1],o=i[2],A=i[3];let h=i[4];switch(r){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=Ho(h);break}this.getPrevNode()[s]={type:r,type2:o,flag:A,value:h},this.setCurrentProp(this.getPrevNode(),s)}}class kg{parse(e){const t=new $A(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new lh;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const r=e.getUint8(),o=e.getString(r);if(i===0)return null;const A=[];for(let c=0;c<s;c++)A.push(this.parseProperty(e));const h=A.length>0?A[0]:"",d=A.length>1?A[1]:"",a=A.length>2?A[2]:"";for(n.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const c=this.parseNode(e,t);c!==null&&this.parseSubNode(o,n,c)}return n.propertyList=A,typeof h=="number"&&(n.id=h),d!==""&&(n.attrName=d),a!==""&&(n.attrType=a),o!==""&&(n.name=o),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if(e==="Connections"&&n.name==="C"){const i=[];n.propertyList.forEach(function(s,r){r!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let i=n.propertyList[0],s=n.propertyList[1];const r=n.propertyList[2],o=n.propertyList[3];let A;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?A=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:A=n.propertyList[4],t[i]={type:s,type2:r,flag:o,value:A}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),r=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const o=yg(new Uint8Array(e.getArrayBuffer(r))),A=new $A(o.buffer);switch(t){case"b":case"c":return A.getBooleanArray(i);case"d":return A.getFloat64Array(i);case"f":return A.getFloat32Array(i);case"i":return A.getInt32Array(i);case"l":return A.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class $A{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const i=n.indexOf(0);return i>=0&&(n=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(n)}}class lh{add(e,t){this[e]=t}}function Ug(l){const e="Kaydara FBX Binary  \0";return l.byteLength>=e.length&&e===uh(l,0,e.length)}function Ng(l){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(i){const s=l[i-1];return l=l.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(n(1)===e[i])return!1;return!0}function el(l){const e=/FBXVersion: (\d+)/,t=l.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Hg(l){return l/46186158e3}const Jg=[];function Mr(l,e,t,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=l;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(i=n.indices[i]);const s=i*n.dataSize,r=s+n.dataSize;return Kg(Jg,n.buffer,s,r)}const No=new oi,zi=new Qe;function ch(l){const e=new ze,t=new ze,n=new ze,i=new ze,s=new ze,r=new ze,o=new ze,A=new ze,h=new ze,d=new ze,a=new ze,c=new ze,u=l.inheritType?l.inheritType:0;if(l.translation&&e.setPosition(zi.fromArray(l.translation)),l.preRotation){const D=l.preRotation.map(Gt.degToRad);D.push(l.eulerOrder||oi.DEFAULT_ORDER),t.makeRotationFromEuler(No.fromArray(D))}if(l.rotation){const D=l.rotation.map(Gt.degToRad);D.push(l.eulerOrder||oi.DEFAULT_ORDER),n.makeRotationFromEuler(No.fromArray(D))}if(l.postRotation){const D=l.postRotation.map(Gt.degToRad);D.push(l.eulerOrder||oi.DEFAULT_ORDER),i.makeRotationFromEuler(No.fromArray(D)),i.invert()}l.scale&&s.scale(zi.fromArray(l.scale)),l.scalingOffset&&o.setPosition(zi.fromArray(l.scalingOffset)),l.scalingPivot&&r.setPosition(zi.fromArray(l.scalingPivot)),l.rotationOffset&&A.setPosition(zi.fromArray(l.rotationOffset)),l.rotationPivot&&h.setPosition(zi.fromArray(l.rotationPivot)),l.parentMatrixWorld&&(a.copy(l.parentMatrix),d.copy(l.parentMatrixWorld));const f=t.clone().multiply(n).multiply(i),p=new ze;p.extractRotation(d);const m=new ze;m.copyPosition(d);const g=m.clone().invert().multiply(d),B=p.clone().invert().multiply(g),I=s,_=new ze;if(u===0)_.copy(p).multiply(f).multiply(B).multiply(I);else if(u===1)_.copy(p).multiply(B).multiply(f).multiply(I);else{const G=new ze().scale(new Qe().setFromMatrixScale(a)).clone().invert(),O=B.clone().multiply(G);_.copy(p).multiply(f).multiply(O).multiply(I)}const C=h.clone().invert(),E=r.clone().invert();let v=e.clone().multiply(A).multiply(h).multiply(t).multiply(n).multiply(i).multiply(C).multiply(o).multiply(r).multiply(s).multiply(E);const x=new ze().copyPosition(v),w=d.clone().multiply(x);return c.copyPosition(w),v=c.clone().multiply(_),v.premultiply(d.invert()),v}function hh(l){l=l||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return l===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[l]}function Ho(l){return l.split(",").map(function(t){return parseFloat(t)})}function uh(l,e,t){return e===void 0&&(e=0),t===void 0&&(t=l.byteLength),new TextDecoder().decode(new Uint8Array(l,e,t))}function zg(l,e){for(let t=0,n=l.length,i=e.length;t<i;t++,n++)l[n]=e[t]}function Kg(l,e,t,n){for(let i=t,s=0;i<n;i++,s++)l[s]=e[i];return l}function tl(l,e,t){return l.slice(0,e).concat(t).concat(l.slice(e))}class eA extends _n{constructor(t,n={}){super(t);Y(this,"ignoreObjects");Y(this,"isReflector");Y(this,"camera");Y(this,"material");Y(this,"getRenderTarget");Y(this,"dispose");const i=n.ignoreObjects||[];this.ignoreObjects=i,this.isReflector=!0,this.type="Reflector",this.camera=new Fi;const s=this,r=n.color!==void 0?new be(n.color):new be(8355711),o=n.textureWidth||512,A=n.textureHeight||512,h=n.clipBias||0,d=n.shader||eA.ReflectorShader,a=n.multisample!==void 0?n.multisample:4,c=new Td,u=new Qe,f=new Qe,p=new Qe,m=new ze,g=new Qe(0,0,-1),B=new bn,I=new Qe,_=new Qe,C=new bn,E=new ze,v=this.camera,x=new dc(o,A,{samples:a,type:St}),w=new Ao({uniforms:Qd.clone(d.uniforms),fragmentShader:d.fragmentShader,vertexShader:d.vertexShader});w.uniforms.tDiffuse.value=x.texture,w.uniforms.color.value=r,w.uniforms.textureMatrix.value=E,this.material=w,this.onBeforeRender=function(D,G,O){if(f.setFromMatrixPosition(s.matrixWorld),p.setFromMatrixPosition(O.matrixWorld),m.extractRotation(s.matrixWorld),u.set(0,0,1),u.applyMatrix4(m),I.subVectors(f,p),I.dot(u)>0)return;I.reflect(u).negate(),I.add(f),m.extractRotation(O.matrixWorld),g.set(0,0,-1),g.applyMatrix4(m),g.add(p),_.subVectors(f,g),_.reflect(u).negate(),_.add(f),v.position.copy(I),v.up.set(0,1,0),v.up.applyMatrix4(m),v.up.reflect(u),v.lookAt(_),v.far=O.far,v.updateMatrixWorld(),v.projectionMatrix.copy(O.projectionMatrix),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(v.projectionMatrix),E.multiply(v.matrixWorldInverse),E.multiply(s.matrixWorld),c.setFromNormalAndCoplanarPoint(u,f),c.applyMatrix4(v.matrixWorldInverse),B.set(c.normal.x,c.normal.y,c.normal.z,c.constant);const T=v.projectionMatrix;C.x=(Math.sign(B.x)+T.elements[8])/T.elements[0],C.y=(Math.sign(B.y)+T.elements[9])/T.elements[5],C.z=-1,C.w=(1+T.elements[10])/T.elements[14],B.multiplyScalar(2/B.dot(C)),T.elements[2]=B.x,T.elements[6]=B.y,T.elements[10]=B.z+1-h,T.elements[14]=B.w,s.visible=!1,i.forEach(ae=>{ae.visible=!1});const b=D.getRenderTarget(),F=D.xr.enabled,U=D.shadowMap.autoUpdate,te=D.outputEncoding,j=D.toneMapping;let J=!1;"outputColorSpace"in D?J=D.outputColorSpace==="srgb":J=D.outputEncoding===3001,D.xr.enabled=!1,D.shadowMap.autoUpdate=!1,"outputColorSpace"in D?D.outputColorSpace=J?"srgb":"srgb-linear":D.outputEncoding=J?3001:3e3,D.toneMapping=Dd,D.setRenderTarget(x),D.state.buffers.depth.setMask(!0),D.autoClear===!1&&D.clear(),D.render(G,v),D.xr.enabled=F,D.shadowMap.autoUpdate=U,D.outputEncoding=te,D.toneMapping=j,D.setRenderTarget(b);const ee=O.viewport;ee!==void 0&&D.state.viewport(ee),s.visible=!0,i.forEach(ae=>{ae.visible=!0})},this.getRenderTarget=function(){return x},this.dispose=function(){x.dispose(),s.material.dispose()}}}eA.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <encodings_fragment>

		}`};class Bn{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){e===void 0&&(e=new M);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){t===void 0&&(t=new M);const n=this.elements,i=e.x,s=e.y,r=e.z;return t.x=n[0]*i+n[1]*s+n[2]*r,t.y=n[3]*i+n[4]*s+n[5]*r,t.z=n[6]*i+n[7]*s+n[8]*r,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){t===void 0&&(t=new Bn);const n=this.elements,i=e.elements,s=t.elements,r=n[0],o=n[1],A=n[2],h=n[3],d=n[4],a=n[5],c=n[6],u=n[7],f=n[8],p=i[0],m=i[1],g=i[2],B=i[3],I=i[4],_=i[5],C=i[6],E=i[7],v=i[8];return s[0]=r*p+o*B+A*C,s[1]=r*m+o*I+A*E,s[2]=r*g+o*_+A*v,s[3]=h*p+d*B+a*C,s[4]=h*m+d*I+a*E,s[5]=h*g+d*_+a*v,s[6]=c*p+u*B+f*C,s[7]=c*m+u*I+f*E,s[8]=c*g+u*_+f*v,t}scale(e,t){t===void 0&&(t=new Bn);const n=this.elements,i=t.elements;for(let s=0;s!==3;s++)i[3*s+0]=e.x*n[3*s+0],i[3*s+1]=e.y*n[3*s+1],i[3*s+2]=e.z*n[3*s+2];return t}solve(e,t){t===void 0&&(t=new M);const n=3,i=4,s=[];let r,o;for(r=0;r<n*i;r++)s.push(0);for(r=0;r<3;r++)for(o=0;o<3;o++)s[r+i*o]=this.elements[r+3*o];s[3+4*0]=e.x,s[3+4*1]=e.y,s[3+4*2]=e.z;let A=3;const h=A;let d;const a=4;let c;do{if(r=h-A,s[r+i*r]===0){for(o=r+1;o<h;o++)if(s[r+i*o]!==0){d=a;do c=a-d,s[c+i*r]+=s[c+i*o];while(--d);break}}if(s[r+i*r]!==0)for(o=r+1;o<h;o++){const u=s[r+i*o]/s[r+i*r];d=a;do c=a-d,s[c+i*o]=c<=r?0:s[c+i*o]-s[c+i*r]*u;while(--d)}}while(--A);if(t.z=s[2*i+3]/s[2*i+2],t.y=(s[1*i+3]-s[1*i+2]*t.z)/s[1*i+1],t.x=(s[0*i+3]-s[0*i+2]*t.z-s[0*i+1]*t.y)/s[0*i+0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,n){if(n===void 0)return this.elements[t+3*e];this.elements[t+3*e]=n}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";const t=",";for(let n=0;n<9;n++)e+=this.elements[n]+t;return e}reverse(e){e===void 0&&(e=new Bn);const t=3,n=6,i=Yg;let s,r;for(s=0;s<3;s++)for(r=0;r<3;r++)i[s+n*r]=this.elements[s+3*r];i[3+6*0]=1,i[3+6*1]=0,i[3+6*2]=0,i[4+6*0]=0,i[4+6*1]=1,i[4+6*2]=0,i[5+6*0]=0,i[5+6*1]=0,i[5+6*2]=1;let o=3;const A=o;let h;const d=n;let a;do{if(s=A-o,i[s+n*s]===0){for(r=s+1;r<A;r++)if(i[s+n*r]!==0){h=d;do a=d-h,i[a+n*s]+=i[a+n*r];while(--h);break}}if(i[s+n*s]!==0)for(r=s+1;r<A;r++){const c=i[s+n*r]/i[s+n*s];h=d;do a=d-h,i[a+n*r]=a<=s?0:i[a+n*r]-i[a+n*s]*c;while(--h)}}while(--o);s=2;do{r=s-1;do{const c=i[s+n*r]/i[s+n*s];h=n;do a=n-h,i[a+n*r]=i[a+n*r]-i[a+n*s]*c;while(--h)}while(r--)}while(--s);s=2;do{const c=1/i[s+n*s];h=n;do a=n-h,i[a+n*s]=i[a+n*s]*c;while(--h)}while(s--);s=2;do{r=2;do{if(a=i[t+r+n*s],isNaN(a)||a===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,r,a)}while(r--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,n=e.y,i=e.z,s=e.w,r=t+t,o=n+n,A=i+i,h=t*r,d=t*o,a=t*A,c=n*o,u=n*A,f=i*A,p=s*r,m=s*o,g=s*A,B=this.elements;return B[3*0+0]=1-(c+f),B[3*0+1]=d-g,B[3*0+2]=a+m,B[3*1+0]=d+g,B[3*1+1]=1-(h+f),B[3*1+2]=u-p,B[3*2+0]=a-m,B[3*2+1]=u+p,B[3*2+2]=1-(h+c),this}transpose(e){e===void 0&&(e=new Bn);const t=this.elements,n=e.elements;let i;return n[0]=t[0],n[4]=t[4],n[8]=t[8],i=t[1],n[1]=t[3],n[3]=i,i=t[2],n[2]=t[6],n[6]=i,i=t[5],n[5]=t[7],n[7]=i,e}}const Yg=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class M{constructor(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}cross(e,t){t===void 0&&(t=new M);const n=e.x,i=e.y,s=e.z,r=this.x,o=this.y,A=this.z;return t.x=o*s-A*i,t.y=A*n-r*s,t.z=r*i-o*n,t}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(t)t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z;else return new M(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,t){if(t)t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z;else return new M(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new Bn([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){const s=1/i;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return i}unit(e){e===void 0&&(e=new M);const t=this.x,n=this.y,i=this.z;let s=Math.sqrt(t*t+n*n+i*i);return s>0?(s=1/s,e.x=t*s,e.y=n*s,e.z=i*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,n=this.y,i=this.z,s=e.x,r=e.y,o=e.z;return Math.sqrt((s-t)*(s-t)+(r-n)*(r-n)+(o-i)*(o-i))}distanceSquared(e){const t=this.x,n=this.y,i=this.z,s=e.x,r=e.y,o=e.z;return(s-t)*(s-t)+(r-n)*(r-n)+(o-i)*(o-i)}scale(e,t){t===void 0&&(t=new M);const n=this.x,i=this.y,s=this.z;return t.x=e*n,t.y=e*i,t.z=e*s,t}vmul(e,t){return t===void 0&&(t=new M),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,n){return n===void 0&&(n=new M),n.x=this.x+e*t.x,n.y=this.y+e*t.y,n.z=this.z+e*t.z,n}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new M),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const n=this.length();if(n>0){const i=qg,s=1/n;i.set(this.x*s,this.y*s,this.z*s);const r=Vg;Math.abs(i.x)<.9?(r.set(1,0,0),i.cross(r,e)):(r.set(0,1,0),i.cross(r,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,n){const i=this.x,s=this.y,r=this.z;n.x=i+(e.x-i)*t,n.y=s+(e.y-s)*t,n.z=r+(e.z-r)*t}almostEquals(e,t){return t===void 0&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(nl),nl.almostEquals(e,t)}clone(){return new M(this.x,this.y,this.z)}}M.ZERO=new M(0,0,0);M.UNIT_X=new M(1,0,0);M.UNIT_Y=new M(0,1,0);M.UNIT_Z=new M(0,0,1);const qg=new M,Vg=new M,nl=new M;class Wt{constructor(e){e===void 0&&(e={}),this.lowerBound=new M,this.upperBound=new M,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,n,i){const s=this.lowerBound,r=this.upperBound,o=n;s.copy(e[0]),o&&o.vmult(s,s),r.copy(s);for(let A=1;A<e.length;A++){let h=e[A];o&&(o.vmult(h,il),h=il),h.x>r.x&&(r.x=h.x),h.x<s.x&&(s.x=h.x),h.y>r.y&&(r.y=h.y),h.y<s.y&&(s.y=h.y),h.z>r.z&&(r.z=h.z),h.z<s.z&&(s.z=h.z)}return t&&(t.vadd(s,s),t.vadd(r,r)),i&&(s.x-=i,s.y-=i,s.z-=i,r.x+=i,r.y+=i,r.z+=i),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new Wt().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,n=this.upperBound,i=e.lowerBound,s=e.upperBound,r=i.x<=n.x&&n.x<=s.x||t.x<=s.x&&s.x<=n.x,o=i.y<=n.y&&n.y<=s.y||t.y<=s.y&&s.y<=n.y,A=i.z<=n.z&&n.z<=s.z||t.z<=s.z&&s.z<=n.z;return r&&o&&A}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,n=this.upperBound,i=e.lowerBound,s=e.upperBound;return t.x<=i.x&&n.x>=s.x&&t.y<=i.y&&n.y>=s.y&&t.z<=i.z&&n.z>=s.z}getCorners(e,t,n,i,s,r,o,A){const h=this.lowerBound,d=this.upperBound;e.copy(h),t.set(d.x,h.y,h.z),n.set(d.x,d.y,h.z),i.set(h.x,d.y,d.z),s.set(d.x,h.y,d.z),r.set(h.x,d.y,h.z),o.set(h.x,h.y,d.z),A.copy(d)}toLocalFrame(e,t){const n=sl,i=n[0],s=n[1],r=n[2],o=n[3],A=n[4],h=n[5],d=n[6],a=n[7];this.getCorners(i,s,r,o,A,h,d,a);for(let c=0;c!==8;c++){const u=n[c];e.pointToLocal(u,u)}return t.setFromPoints(n)}toWorldFrame(e,t){const n=sl,i=n[0],s=n[1],r=n[2],o=n[3],A=n[4],h=n[5],d=n[6],a=n[7];this.getCorners(i,s,r,o,A,h,d,a);for(let c=0;c!==8;c++){const u=n[c];e.pointToWorld(u,u)}return t.setFromPoints(n)}overlapsRay(e){const{direction:t,from:n}=e,i=1/t.x,s=1/t.y,r=1/t.z,o=(this.lowerBound.x-n.x)*i,A=(this.upperBound.x-n.x)*i,h=(this.lowerBound.y-n.y)*s,d=(this.upperBound.y-n.y)*s,a=(this.lowerBound.z-n.z)*r,c=(this.upperBound.z-n.z)*r,u=Math.max(Math.max(Math.min(o,A),Math.min(h,d)),Math.min(a,c)),f=Math.min(Math.min(Math.max(o,A),Math.max(h,d)),Math.max(a,c));return!(f<0||u>f)}}const il=new M,sl=[new M,new M,new M,new M,new M,new M,new M,new M];class rl{constructor(){this.matrix=[]}get(e,t){let{index:n}=e,{index:i}=t;if(i>n){const s=i;i=n,n=s}return this.matrix[(n*(n+1)>>1)+i-1]}set(e,t,n){let{index:i}=e,{index:s}=t;if(s>i){const r=s;s=i,i=r}this.matrix[(i*(i+1)>>1)+s-1]=n?1:0}reset(){for(let e=0,t=this.matrix.length;e!==t;e++)this.matrix[e]=0}setNumObjects(e){this.matrix.length=e*(e-1)>>1}}class dh{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;return n[e]===void 0&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return!!(n[e]!==void 0&&n[e].includes(t))}hasAnyEventListener(e){return this._listeners===void 0?!1:this._listeners[e]!==void 0}removeEventListener(e,t){if(this._listeners===void 0)return this;const n=this._listeners;if(n[e]===void 0)return this;const i=n[e].indexOf(t);return i!==-1&&n[e].splice(i,1),this}dispatchEvent(e){if(this._listeners===void 0)return this;const n=this._listeners[e.type];if(n!==void 0){e.target=this;for(let i=0,s=n.length;i<s;i++)n[i].call(this,e)}return this}}class ft{constructor(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=1),this.x=e,this.y=t,this.z=n,this.w=i}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const n=Math.sin(t*.5);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(t*.5),this}toAxisAngle(e){e===void 0&&(e=new M),this.normalize();const t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const n=Xg,i=jg;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{const n=e.cross(t);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){t===void 0&&(t=new ft);const n=this.x,i=this.y,s=this.z,r=this.w,o=e.x,A=e.y,h=e.z,d=e.w;return t.x=n*d+r*o+i*h-s*A,t.y=i*d+r*A+s*o-n*h,t.z=s*d+r*h+n*A-i*o,t.w=r*d-n*o-i*A-s*h,t}inverse(e){e===void 0&&(e=new ft);const t=this.x,n=this.y,i=this.z,s=this.w;this.conjugate(e);const r=1/(t*t+n*n+i*i+s*s);return e.x*=r,e.y*=r,e.z*=r,e.w*=r,e}conjugate(e){return e===void 0&&(e=new ft),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){t===void 0&&(t=new M);const n=e.x,i=e.y,s=e.z,r=this.x,o=this.y,A=this.z,h=this.w,d=h*n+o*s-A*i,a=h*i+A*n-r*s,c=h*s+r*i-o*n,u=-r*n-o*i-A*s;return t.x=d*h+u*-r+a*-A-c*-o,t.y=a*h+u*-o+c*-r-d*-A,t.z=c*h+u*-A+d*-o-a*-r,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){t===void 0&&(t="YZX");let n,i,s;const r=this.x,o=this.y,A=this.z,h=this.w;switch(t){case"YZX":const d=r*o+A*h;if(d>.499&&(n=2*Math.atan2(r,h),i=Math.PI/2,s=0),d<-.499&&(n=-2*Math.atan2(r,h),i=-Math.PI/2,s=0),n===void 0){const a=r*r,c=o*o,u=A*A;n=Math.atan2(2*o*h-2*r*A,1-2*c-2*u),i=Math.asin(2*d),s=Math.atan2(2*r*h-2*o*A,1-2*a-2*u)}break;default:throw new Error(`Euler order ${t} not supported yet.`)}e.y=n,e.z=i,e.x=s}setFromEuler(e,t,n,i){i===void 0&&(i="XYZ");const s=Math.cos(e/2),r=Math.cos(t/2),o=Math.cos(n/2),A=Math.sin(e/2),h=Math.sin(t/2),d=Math.sin(n/2);return i==="XYZ"?(this.x=A*r*o+s*h*d,this.y=s*h*o-A*r*d,this.z=s*r*d+A*h*o,this.w=s*r*o-A*h*d):i==="YXZ"?(this.x=A*r*o+s*h*d,this.y=s*h*o-A*r*d,this.z=s*r*d-A*h*o,this.w=s*r*o+A*h*d):i==="ZXY"?(this.x=A*r*o-s*h*d,this.y=s*h*o+A*r*d,this.z=s*r*d+A*h*o,this.w=s*r*o-A*h*d):i==="ZYX"?(this.x=A*r*o-s*h*d,this.y=s*h*o+A*r*d,this.z=s*r*d-A*h*o,this.w=s*r*o+A*h*d):i==="YZX"?(this.x=A*r*o+s*h*d,this.y=s*h*o+A*r*d,this.z=s*r*d-A*h*o,this.w=s*r*o-A*h*d):i==="XZY"&&(this.x=A*r*o-s*h*d,this.y=s*h*o-A*r*d,this.z=s*r*d+A*h*o,this.w=s*r*o+A*h*d),this}clone(){return new ft(this.x,this.y,this.z,this.w)}slerp(e,t,n){n===void 0&&(n=new ft);const i=this.x,s=this.y,r=this.z,o=this.w;let A=e.x,h=e.y,d=e.z,a=e.w,c,u,f,p,m;return u=i*A+s*h+r*d+o*a,u<0&&(u=-u,A=-A,h=-h,d=-d,a=-a),1-u>1e-6?(c=Math.acos(u),f=Math.sin(c),p=Math.sin((1-t)*c)/f,m=Math.sin(t*c)/f):(p=1-t,m=t),n.x=p*i+m*A,n.y=p*s+m*h,n.z=p*r+m*d,n.w=p*o+m*a,n}integrate(e,t,n,i){i===void 0&&(i=new ft);const s=e.x*n.x,r=e.y*n.y,o=e.z*n.z,A=this.x,h=this.y,d=this.z,a=this.w,c=t*.5;return i.x+=c*(s*a+r*d-o*h),i.y+=c*(r*a+o*A-s*d),i.z+=c*(o*a+s*h-r*A),i.w+=c*(-s*A-r*h-o*d),i}}const Xg=new M,jg=new M,Wg={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class me{constructor(e){e===void 0&&(e={}),this.id=me.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=e.collisionResponse?e.collisionResponse:!0,this.collisionFilterGroup=e.collisionFilterGroup!==void 0?e.collisionFilterGroup:1,this.collisionFilterMask=e.collisionFilterMask!==void 0?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(e,t){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(e,t,n,i){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}me.idCounter=0;me.types=Wg;class Pe{constructor(e){e===void 0&&(e={}),this.position=new M,this.quaternion=new ft,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Pe.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Pe.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return t===void 0&&(t=new M),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,n,i){return i===void 0&&(i=new M),n.vsub(e,i),t.conjugate(ol),ol.vmult(i,i),i}static pointToWorldFrame(e,t,n,i){return i===void 0&&(i=new M),t.vmult(n,i),i.vadd(e,i),i}static vectorToWorldFrame(e,t,n){return n===void 0&&(n=new M),e.vmult(t,n),n}static vectorToLocalFrame(e,t,n,i){return i===void 0&&(i=new M),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}const ol=new ft;class Zs extends me{constructor(e){e===void 0&&(e={});const{vertices:t=[],faces:n=[],normals:i=[],axes:s,boundingSphereRadius:r}=e;super({type:me.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=n,this.faceNormals=i,this.faceNormals.length===0&&this.computeNormals(),r?this.boundingSphereRadius=r:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;const i=new M;for(let s=0;s!==e.length;s++){const r=e[s],o=r.length;for(let A=0;A!==o;A++){const h=(A+1)%o;t[r[A]].vsub(t[r[h]],i),i.normalize();let d=!1;for(let a=0;a!==n.length;a++)if(n[a].almostEquals(i)||n[a].almostEquals(i)){d=!0;break}d||n.push(i.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let i=0;i<this.faces[e].length;i++)if(!this.vertices[this.faces[e][i]])throw new Error(`Vertex ${this.faces[e][i]} not found!`);const t=this.faceNormals[e]||new M;this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t;const n=this.vertices[this.faces[e][0]];if(t.dot(n)<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let i=0;i<this.faces[e].length;i++)console.warn(`.vertices[${this.faces[e][i]}] = Vec3(${this.vertices[this.faces[e][i]].toString()})`)}}}getFaceNormal(e,t){const n=this.faces[e],i=this.vertices[n[0]],s=this.vertices[n[1]],r=this.vertices[n[2]];Zs.computeNormal(i,s,r,t)}static computeNormal(e,t,n,i){const s=new M,r=new M;t.vsub(e,r),n.vsub(t,s),s.cross(r,i),i.isZero()||i.normalize()}clipAgainstHull(e,t,n,i,s,r,o,A,h){const d=new M;let a=-1,c=-Number.MAX_VALUE;for(let f=0;f<n.faces.length;f++){d.copy(n.faceNormals[f]),s.vmult(d,d);const p=d.dot(r);p>c&&(c=p,a=f)}const u=[];for(let f=0;f<n.faces[a].length;f++){const p=n.vertices[n.faces[a][f]],m=new M;m.copy(p),s.vmult(m,m),i.vadd(m,m),u.push(m)}a>=0&&this.clipFaceAgainstHull(r,e,t,u,o,A,h)}findSeparatingAxis(e,t,n,i,s,r,o,A){const h=new M,d=new M,a=new M,c=new M,u=new M,f=new M;let p=Number.MAX_VALUE;const m=this;if(m.uniqueAxes)for(let g=0;g!==m.uniqueAxes.length;g++){n.vmult(m.uniqueAxes[g],h);const B=m.testSepAxis(h,e,t,n,i,s);if(B===!1)return!1;B<p&&(p=B,r.copy(h))}else{const g=o?o.length:m.faces.length;for(let B=0;B<g;B++){const I=o?o[B]:B;h.copy(m.faceNormals[I]),n.vmult(h,h);const _=m.testSepAxis(h,e,t,n,i,s);if(_===!1)return!1;_<p&&(p=_,r.copy(h))}}if(e.uniqueAxes)for(let g=0;g!==e.uniqueAxes.length;g++){s.vmult(e.uniqueAxes[g],d);const B=m.testSepAxis(d,e,t,n,i,s);if(B===!1)return!1;B<p&&(p=B,r.copy(d))}else{const g=A?A.length:e.faces.length;for(let B=0;B<g;B++){const I=A?A[B]:B;d.copy(e.faceNormals[I]),s.vmult(d,d);const _=m.testSepAxis(d,e,t,n,i,s);if(_===!1)return!1;_<p&&(p=_,r.copy(d))}}for(let g=0;g!==m.uniqueEdges.length;g++){n.vmult(m.uniqueEdges[g],c);for(let B=0;B!==e.uniqueEdges.length;B++)if(s.vmult(e.uniqueEdges[B],u),c.cross(u,f),!f.almostZero()){f.normalize();const I=m.testSepAxis(f,e,t,n,i,s);if(I===!1)return!1;I<p&&(p=I,r.copy(f))}}return i.vsub(t,a),a.dot(r)>0&&r.negate(r),!0}testSepAxis(e,t,n,i,s,r){const o=this;Zs.project(o,e,n,i,Jo),Zs.project(t,e,s,r,zo);const A=Jo[0],h=Jo[1],d=zo[0],a=zo[1];if(A<a||d<h)return!1;const c=A-a,u=d-h;return c<u?c:u}calculateLocalInertia(e,t){const n=new M,i=new M;this.computeLocalAABB(i,n);const s=n.x-i.x,r=n.y-i.y,o=n.z-i.z;t.x=1/12*e*(2*r*2*r+2*o*2*o),t.y=1/12*e*(2*s*2*s+2*o*2*o),t.z=1/12*e*(2*r*2*r+2*s*2*s)}getPlaneConstantOfFace(e){const t=this.faces[e],n=this.faceNormals[e],i=this.vertices[t[0]];return-n.dot(i)}clipFaceAgainstHull(e,t,n,i,s,r,o){const A=new M,h=new M,d=new M,a=new M,c=new M,u=new M,f=new M,p=new M,m=this,g=[],B=i,I=g;let _=-1,C=Number.MAX_VALUE;for(let D=0;D<m.faces.length;D++){A.copy(m.faceNormals[D]),n.vmult(A,A);const G=A.dot(e);G<C&&(C=G,_=D)}if(_<0)return;const E=m.faces[_];E.connectedFaces=[];for(let D=0;D<m.faces.length;D++)for(let G=0;G<m.faces[D].length;G++)E.indexOf(m.faces[D][G])!==-1&&D!==_&&E.connectedFaces.indexOf(D)===-1&&E.connectedFaces.push(D);const v=E.length;for(let D=0;D<v;D++){const G=m.vertices[E[D]],O=m.vertices[E[(D+1)%v]];G.vsub(O,h),d.copy(h),n.vmult(d,d),t.vadd(d,d),a.copy(this.faceNormals[_]),n.vmult(a,a),t.vadd(a,a),d.cross(a,c),c.negate(c),u.copy(G),n.vmult(u,u),t.vadd(u,u);const T=E.connectedFaces[D];f.copy(this.faceNormals[T]);const b=this.getPlaneConstantOfFace(T);p.copy(f),n.vmult(p,p);const F=b-p.dot(t);for(this.clipFaceAgainstPlane(B,I,p,F);B.length;)B.shift();for(;I.length;)B.push(I.shift())}f.copy(this.faceNormals[_]);const x=this.getPlaneConstantOfFace(_);p.copy(f),n.vmult(p,p);const w=x-p.dot(t);for(let D=0;D<B.length;D++){let G=p.dot(B[D])+w;if(G<=s&&(console.log(`clamped: depth=${G} to minDist=${s}`),G=s),G<=r){const O=B[D];if(G<=1e-6){const T={point:O,normal:p,depth:G};o.push(T)}}}}clipFaceAgainstPlane(e,t,n,i){let s,r;const o=e.length;if(o<2)return t;let A=e[e.length-1],h=e[0];s=n.dot(A)+i;for(let d=0;d<o;d++){if(h=e[d],r=n.dot(h)+i,s<0)if(r<0){const a=new M;a.copy(h),t.push(a)}else{const a=new M;A.lerp(h,s/(s-r),a),t.push(a)}else if(r<0){const a=new M;A.lerp(h,s/(s-r),a),t.push(a),t.push(h)}A=h,s=r}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new M);const n=this.vertices,i=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(n[s],i[s]),e.vadd(i[s],i[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let i=0;i<this.vertices.length;i++){const s=n[i];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new M);const n=this.faceNormals,i=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(n[s],i[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let n=0;n!==t.length;n++){const i=t[n].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,n,i){const s=this.vertices;let r,o,A,h,d,a,c=new M;for(let u=0;u<s.length;u++){c.copy(s[u]),t.vmult(c,c),e.vadd(c,c);const f=c;(r===void 0||f.x<r)&&(r=f.x),(h===void 0||f.x>h)&&(h=f.x),(o===void 0||f.y<o)&&(o=f.y),(d===void 0||f.y>d)&&(d=f.y),(A===void 0||f.z<A)&&(A=f.z),(a===void 0||f.z>a)&&(a=f.z)}n.set(r,o,A),i.set(h,d,a)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){e===void 0&&(e=new M);const t=this.vertices;for(let n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const n=this.vertices.length,i=this.vertices;if(t){for(let s=0;s<n;s++){const r=i[s];t.vmult(r,r)}for(let s=0;s<this.faceNormals.length;s++){const r=this.faceNormals[s];t.vmult(r,r)}}if(e)for(let s=0;s<n;s++){const r=i[s];r.vadd(e,r)}}pointIsInside(e){const t=this.vertices,n=this.faces,i=this.faceNormals,s=new M;this.getAveragePointLocal(s);for(let r=0;r<this.faces.length;r++){let o=i[r];const A=t[n[r][0]],h=new M;e.vsub(A,h);const d=o.dot(h),a=new M;s.vsub(A,a);const c=o.dot(a);if(d<0&&c>0||d>0&&c<0)return!1}return-1}static project(e,t,n,i,s){const r=e.vertices.length,o=Zg;let A=0,h=0;const d=$g,a=e.vertices;d.setZero(),Pe.vectorToLocalFrame(n,i,t,o),Pe.pointToLocalFrame(n,i,d,d);const c=d.dot(o);h=A=a[0].dot(o);for(let u=1;u<r;u++){const f=a[u].dot(o);f>A&&(A=f),f<h&&(h=f)}if(h-=c,A-=c,h>A){const u=h;h=A,A=u}s[0]=A,s[1]=h}}const Jo=[],zo=[];new M;const Zg=new M,$g=new M;class tA extends me{constructor(e){super({type:me.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,i=M,s=[new i(-e,-t,-n),new i(e,-t,-n),new i(e,t,-n),new i(-e,t,-n),new i(-e,-t,n),new i(e,-t,n),new i(e,t,n),new i(-e,t,n)],r=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],o=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],A=new Zs({vertices:s,faces:r,axes:o});this.convexPolyhedronRepresentation=A,A.material=this.material}calculateLocalInertia(e,t){return t===void 0&&(t=new M),tA.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,n){const i=e;n.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}getSideNormals(e,t){const n=e,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),t!==void 0)for(let s=0;s!==n.length;s++)t.vmult(n[s],n[s]);return n}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,n){const i=this.halfExtents,s=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]];for(let r=0;r<s.length;r++)ii.set(s[r][0],s[r][1],s[r][2]),t.vmult(ii,ii),e.vadd(ii,ii),n(ii.x,ii.y,ii.z)}calculateWorldAABB(e,t,n,i){const s=this.halfExtents;yn[0].set(s.x,s.y,s.z),yn[1].set(-s.x,s.y,s.z),yn[2].set(-s.x,-s.y,s.z),yn[3].set(-s.x,-s.y,-s.z),yn[4].set(s.x,-s.y,-s.z),yn[5].set(s.x,s.y,-s.z),yn[6].set(-s.x,s.y,-s.z),yn[7].set(s.x,-s.y,s.z);const r=yn[0];t.vmult(r,r),e.vadd(r,r),i.copy(r),n.copy(r);for(let o=1;o<8;o++){const A=yn[o];t.vmult(A,A),e.vadd(A,A);const h=A.x,d=A.y,a=A.z;h>i.x&&(i.x=h),d>i.y&&(i.y=d),a>i.z&&(i.z=a),h<n.x&&(n.x=h),d<n.y&&(n.y=d),a<n.z&&(n.z=a)}}}const ii=new M,yn=[new M,new M,new M,new M,new M,new M,new M,new M],nA={DYNAMIC:1,STATIC:2,KINEMATIC:4},iA={AWAKE:0,SLEEPY:1,SLEEPING:2};class Be extends dh{constructor(e){e===void 0&&(e={}),super(),this.id=Be.idCounter++,this.index=-1,this.world=null,this.vlambda=new M,this.collisionFilterGroup=typeof e.collisionFilterGroup=="number"?e.collisionFilterGroup:1,this.collisionFilterMask=typeof e.collisionFilterMask=="number"?e.collisionFilterMask:-1,this.collisionResponse=typeof e.collisionResponse=="boolean"?e.collisionResponse:!0,this.position=new M,this.previousPosition=new M,this.interpolatedPosition=new M,this.initPosition=new M,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new M,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new M,this.force=new M;const t=typeof e.mass=="number"?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping=typeof e.linearDamping=="number"?e.linearDamping:.01,this.type=t<=0?Be.STATIC:Be.DYNAMIC,typeof e.type==typeof Be.STATIC&&(this.type=e.type),this.allowSleep=typeof e.allowSleep<"u"?e.allowSleep:!0,this.sleepState=Be.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new M,this.quaternion=new ft,this.initQuaternion=new ft,this.previousQuaternion=new ft,this.interpolatedQuaternion=new ft,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new M,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new M,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new M,this.invInertia=new M,this.invInertiaWorld=new Bn,this.invMassSolve=0,this.invInertiaSolve=new M,this.invInertiaWorldSolve=new Bn,this.fixedRotation=typeof e.fixedRotation<"u"?e.fixedRotation:!1,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new M(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new M(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Wt,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new M,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=Be.AWAKE,this.wakeUpAfterNarrowphase=!1,e===Be.SLEEPING&&this.dispatchEvent(Be.wakeupEvent)}sleep(){this.sleepState=Be.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,n=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),i=this.sleepSpeedLimit**2;t===Be.AWAKE&&n<i?(this.sleepState=Be.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(Be.sleepyEvent)):t===Be.SLEEPY&&n>i?this.wakeUp():t===Be.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(Be.sleepEvent))}}updateSolveMassProperties(){this.sleepState===Be.SLEEPING||this.type===Be.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return t===void 0&&(t=new M),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return t===void 0&&(t=new M),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return t===void 0&&(t=new M),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return t===void 0&&(t=new M),this.quaternion.vmult(e,t),t}addShape(e,t,n){const i=new M,s=new ft;return t&&i.copy(t),n&&s.copy(n),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return t===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,n=e.length;let i=0;for(let s=0;s!==n;s++){const r=e[s];r.updateBoundingSphereRadius();const o=t[s].length(),A=r.boundingSphereRadius;o+A>i&&(i=o+A)}this.boundingRadius=i}updateAABB(){const e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,i=e.length,s=em,r=tm,o=this.quaternion,A=this.aabb,h=nm;for(let d=0;d!==i;d++){const a=e[d];o.vmult(t[d],s),s.vadd(this.position,s),o.mult(n[d],r),a.calculateWorldAABB(s,r,h.lowerBound,h.upperBound),d===0?A.copy(h):A.extend(h)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(!(t.x===t.y&&t.y===t.z&&!e)){const n=im,i=sm;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(t,n),n.mmult(i,this.invInertiaWorld)}}applyForce(e,t){if(t===void 0&&(t=new M),this.type!==Be.DYNAMIC)return;this.sleepState===Be.SLEEPING&&this.wakeUp();const n=rm;t.cross(e,n),this.force.vadd(e,this.force),this.torque.vadd(n,this.torque)}applyLocalForce(e,t){if(t===void 0&&(t=new M),this.type!==Be.DYNAMIC)return;const n=om,i=am;this.vectorToWorldFrame(e,n),this.vectorToWorldFrame(t,i),this.applyForce(n,i)}applyTorque(e){this.type===Be.DYNAMIC&&(this.sleepState===Be.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(t===void 0&&(t=new M),this.type!==Be.DYNAMIC)return;this.sleepState===Be.SLEEPING&&this.wakeUp();const n=t,i=Am;i.copy(e),i.scale(this.invMass,i),this.velocity.vadd(i,this.velocity);const s=lm;n.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t){if(t===void 0&&(t=new M),this.type!==Be.DYNAMIC)return;const n=cm,i=hm;this.vectorToWorldFrame(e,n),this.vectorToWorldFrame(t,i),this.applyImpulse(n,i)}updateMassProperties(){const e=um;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),tA.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const n=new M;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}integrate(e,t,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===Be.DYNAMIC||this.type===Be.KINEMATIC)||this.sleepState===Be.SLEEPING)return;const i=this.velocity,s=this.angularVelocity,r=this.position,o=this.force,A=this.torque,h=this.quaternion,d=this.invMass,a=this.invInertiaWorld,c=this.linearFactor,u=d*e;i.x+=o.x*u*c.x,i.y+=o.y*u*c.y,i.z+=o.z*u*c.z;const f=a.elements,p=this.angularFactor,m=A.x*p.x,g=A.y*p.y,B=A.z*p.z;s.x+=e*(f[0]*m+f[1]*g+f[2]*B),s.y+=e*(f[3]*m+f[4]*g+f[5]*B),s.z+=e*(f[6]*m+f[7]*g+f[8]*B),r.x+=i.x*e,r.y+=i.y*e,r.z+=i.z*e,h.integrate(this.angularVelocity,e,this.angularFactor,h),t&&(n?h.normalizeFast():h.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}Be.idCounter=0;Be.COLLIDE_EVENT_NAME="collide";Be.DYNAMIC=nA.DYNAMIC;Be.STATIC=nA.STATIC;Be.KINEMATIC=nA.KINEMATIC;Be.AWAKE=iA.AWAKE;Be.SLEEPY=iA.SLEEPY;Be.SLEEPING=iA.SLEEPING;Be.wakeupEvent={type:"wakeup"};Be.sleepyEvent={type:"sleepy"};Be.sleepEvent={type:"sleep"};const em=new M,tm=new ft,nm=new Wt,im=new Bn,sm=new Bn;new Bn;const rm=new M,om=new M,am=new M,Am=new M,lm=new M,cm=new M,hm=new M,um=new M;class dm{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(e,t,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(e,t){return!((e.collisionFilterGroup&t.collisionFilterMask)===0||(t.collisionFilterGroup&e.collisionFilterMask)===0||((e.type&Be.STATIC)!==0||e.sleepState===Be.SLEEPING)&&((t.type&Be.STATIC)!==0||t.sleepState===Be.SLEEPING))}intersectionTest(e,t,n,i){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,t,n,i):this.doBoundingSphereBroadphase(e,t,n,i)}doBoundingSphereBroadphase(e,t,n,i){const s=fm;t.position.vsub(e.position,s);const r=(e.boundingRadius+t.boundingRadius)**2;s.lengthSquared()<r&&(n.push(e),i.push(t))}doBoundingBoxBroadphase(e,t,n,i){e.aabbNeedsUpdate&&e.updateAABB(),t.aabbNeedsUpdate&&t.updateAABB(),e.aabb.overlaps(t.aabb)&&(n.push(e),i.push(t))}makePairsUnique(e,t){const n=pm,i=gm,s=mm,r=e.length;for(let o=0;o!==r;o++)i[o]=e[o],s[o]=t[o];e.length=0,t.length=0;for(let o=0;o!==r;o++){const A=i[o].id,h=s[o].id,d=A<h?`${A},${h}`:`${h},${A}`;n[d]=o,n.keys.push(d)}for(let o=0;o!==n.keys.length;o++){const A=n.keys.pop(),h=n[A];e.push(i[h]),t.push(s[h]),delete n[A]}}setWorld(e){}static boundingSphereCheck(e,t){const n=new M;e.position.vsub(t.position,n);const i=e.shapes[0],s=t.shapes[0];return Math.pow(i.boundingSphereRadius+s.boundingSphereRadius,2)>n.lengthSquared()}aabbQuery(e,t,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const fm=new M;new M;new ft;new M;const pm={keys:[]},gm=[],mm=[];new M;new M;new M;class Bm extends dm{constructor(){super()}collisionPairs(e,t,n){const i=e.bodies,s=i.length;let r,o;for(let A=0;A!==s;A++)for(let h=0;h!==A;h++)r=i[A],o=i[h],this.needBroadphaseCollision(r,o)&&this.intersectionTest(r,o,t,n)}aabbQuery(e,t,n){n===void 0&&(n=[]);for(let i=0;i<e.bodies.length;i++){const s=e.bodies[i];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(t)&&n.push(s)}return n}}class jr{constructor(){this.rayFromWorld=new M,this.rayToWorld=new M,this.hitNormalWorld=new M,this.hitPointWorld=new M,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,n,i,s,r,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=s,this.body=r,this.distance=o}}let fh,ph,gh,mh,Bh,Ch,_h;const sA={CLOSEST:1,ANY:2,ALL:4};fh=me.types.SPHERE;ph=me.types.PLANE;gh=me.types.BOX;mh=me.types.CYLINDER;Bh=me.types.CONVEXPOLYHEDRON;Ch=me.types.HEIGHTFIELD;_h=me.types.TRIMESH;class ht{get[fh](){return this._intersectSphere}get[ph](){return this._intersectPlane}get[gh](){return this._intersectBox}get[mh](){return this._intersectConvex}get[Bh](){return this._intersectConvex}get[Ch](){return this._intersectHeightfield}get[_h](){return this._intersectTrimesh}constructor(e,t){e===void 0&&(e=new M),t===void 0&&(t=new M),this.from=e.clone(),this.to=t.clone(),this.direction=new M,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ht.ANY,this.result=new jr,this.hasHit=!1,this.callback=n=>{}}intersectWorld(e,t){return this.mode=t.mode||ht.ANY,this.result=t.result||new jr,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=typeof t.checkCollisionResponse<"u"?t.checkCollisionResponse:!0,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(al),Ko.length=0,e.broadphase.aabbQuery(e,al,Ko),this.intersectBodies(Ko),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!e.collisionResponse||(this.collisionFilterGroup&e.collisionFilterMask)===0||(e.collisionFilterGroup&this.collisionFilterMask)===0)return;const i=Cm,s=_m;for(let r=0,o=e.shapes.length;r<o;r++){const A=e.shapes[r];if(!(n&&!A.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[r],s),e.quaternion.vmult(e.shapeOffsets[r],i),i.vadd(e.position,i),this.intersectShape(A,s,i,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,n,i){const s=this.from;if(Rm(s,this.direction,n)>e.boundingSphereRadius)return;const o=this[e.type];o&&o.call(this,e,t,n,i,e)}_intersectBox(e,t,n,i,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,s)}_intersectPlane(e,t,n,i,s){const r=this.from,o=this.to,A=this.direction,h=new M(0,0,1);t.vmult(h,h);const d=new M;r.vsub(n,d);const a=d.dot(h);o.vsub(n,d);const c=d.dot(h);if(a*c>0||r.distanceTo(o)<a)return;const u=h.dot(A);if(Math.abs(u)<this.precision)return;const f=new M,p=new M,m=new M;r.vsub(n,f);const g=-h.dot(f)/u;A.scale(g,p),r.vadd(p,m),this.reportIntersection(h,m,s,i,-1)}getAABB(e){const{lowerBound:t,upperBound:n}=e,i=this.to,s=this.from;t.x=Math.min(i.x,s.x),t.y=Math.min(i.y,s.y),t.z=Math.min(i.z,s.z),n.x=Math.max(i.x,s.x),n.y=Math.max(i.y,s.y),n.z=Math.max(i.z,s.z)}_intersectHeightfield(e,t,n,i,s){e.data,e.elementSize;const r=Em;r.from.copy(this.from),r.to.copy(this.to),Pe.pointToLocalFrame(n,t,r.from,r.from),Pe.pointToLocalFrame(n,t,r.to,r.to),r.updateDirection();const o=Im;let A,h,d,a;A=h=0,d=a=e.data.length-1;const c=new Wt;r.getAABB(c),e.getIndexOfPosition(c.lowerBound.x,c.lowerBound.y,o,!0),A=Math.max(A,o[0]),h=Math.max(h,o[1]),e.getIndexOfPosition(c.upperBound.x,c.upperBound.y,o,!0),d=Math.min(d,o[0]+1),a=Math.min(a,o[1]+1);for(let u=A;u<d;u++)for(let f=h;f<a;f++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(u,f,c),!!c.overlapsRay(r)){if(e.getConvexTrianglePillar(u,f,!1),Pe.pointToWorldFrame(n,t,e.pillarOffset,Tr),this._intersectConvex(e.pillarConvex,t,Tr,i,s,Al),this.result.shouldStop)return;e.getConvexTrianglePillar(u,f,!0),Pe.pointToWorldFrame(n,t,e.pillarOffset,Tr),this._intersectConvex(e.pillarConvex,t,Tr,i,s,Al)}}}_intersectSphere(e,t,n,i,s){const r=this.from,o=this.to,A=e.radius,h=(o.x-r.x)**2+(o.y-r.y)**2+(o.z-r.z)**2,d=2*((o.x-r.x)*(r.x-n.x)+(o.y-r.y)*(r.y-n.y)+(o.z-r.z)*(r.z-n.z)),a=(r.x-n.x)**2+(r.y-n.y)**2+(r.z-n.z)**2-A**2,c=d**2-4*h*a,u=ym,f=vm;if(!(c<0))if(c===0)r.lerp(o,c,u),u.vsub(n,f),f.normalize(),this.reportIntersection(f,u,s,i,-1);else{const p=(-d-Math.sqrt(c))/(2*h),m=(-d+Math.sqrt(c))/(2*h);if(p>=0&&p<=1&&(r.lerp(o,p,u),u.vsub(n,f),f.normalize(),this.reportIntersection(f,u,s,i,-1)),this.result.shouldStop)return;m>=0&&m<=1&&(r.lerp(o,m,u),u.vsub(n,f),f.normalize(),this.reportIntersection(f,u,s,i,-1))}}_intersectConvex(e,t,n,i,s,r){const o=wm,A=ll,h=r&&r.faceList||null,d=e.faces,a=e.vertices,c=e.faceNormals,u=this.direction,f=this.from,p=this.to,m=f.distanceTo(p),g=h?h.length:d.length,B=this.result;for(let I=0;!B.shouldStop&&I<g;I++){const _=h?h[I]:I,C=d[_],E=c[_],v=t,x=n;A.copy(a[C[0]]),v.vmult(A,A),A.vadd(x,A),A.vsub(f,A),v.vmult(E,o);const w=u.dot(o);if(Math.abs(w)<this.precision)continue;const D=o.dot(A)/w;if(!(D<0)){u.scale(D,Rt),Rt.vadd(f,Rt),gn.copy(a[C[0]]),v.vmult(gn,gn),x.vadd(gn,gn);for(let G=1;!B.shouldStop&&G<C.length-1;G++){vn.copy(a[C[G]]),wn.copy(a[C[G+1]]),v.vmult(vn,vn),v.vmult(wn,wn),x.vadd(vn,vn),x.vadd(wn,wn);const O=Rt.distanceTo(f);!(ht.pointInTriangle(Rt,gn,vn,wn)||ht.pointInTriangle(Rt,vn,gn,wn))||O>m||this.reportIntersection(o,Rt,s,i,_)}}}}_intersectTrimesh(e,t,n,i,s,r){const o=xm,A=Sm,h=Fm,d=ll,a=Mm,c=Tm,u=Qm,f=bm,p=Dm,m=e.indices;e.vertices;const g=this.from,B=this.to,I=this.direction;h.position.copy(n),h.quaternion.copy(t),Pe.vectorToLocalFrame(n,t,I,a),Pe.pointToLocalFrame(n,t,g,c),Pe.pointToLocalFrame(n,t,B,u),u.x*=e.scale.x,u.y*=e.scale.y,u.z*=e.scale.z,c.x*=e.scale.x,c.y*=e.scale.y,c.z*=e.scale.z,u.vsub(c,a),a.normalize();const _=c.distanceSquared(u);e.tree.rayQuery(this,h,A);for(let C=0,E=A.length;!this.result.shouldStop&&C!==E;C++){const v=A[C];e.getNormal(v,o),e.getVertex(m[v*3],gn),gn.vsub(c,d);const x=a.dot(o),w=o.dot(d)/x;if(w<0)continue;a.scale(w,Rt),Rt.vadd(c,Rt),e.getVertex(m[v*3+1],vn),e.getVertex(m[v*3+2],wn);const D=Rt.distanceSquared(c);!(ht.pointInTriangle(Rt,vn,gn,wn)||ht.pointInTriangle(Rt,gn,vn,wn))||D>_||(Pe.vectorToWorldFrame(t,o,p),Pe.pointToWorldFrame(n,t,Rt,f),this.reportIntersection(p,f,s,i,v))}A.length=0}reportIntersection(e,t,n,i,s){const r=this.from,o=this.to,A=r.distanceTo(t),h=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(h.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case ht.ALL:this.hasHit=!0,h.set(r,o,e,t,n,i,A),h.hasHit=!0,this.callback(h);break;case ht.CLOSEST:(A<h.distance||!h.hasHit)&&(this.hasHit=!0,h.hasHit=!0,h.set(r,o,e,t,n,i,A));break;case ht.ANY:this.hasHit=!0,h.hasHit=!0,h.set(r,o,e,t,n,i,A),h.shouldStop=!0;break}}static pointInTriangle(e,t,n,i){i.vsub(t,Ti),n.vsub(t,Ds),e.vsub(t,Yo);const s=Ti.dot(Ti),r=Ti.dot(Ds),o=Ti.dot(Yo),A=Ds.dot(Ds),h=Ds.dot(Yo);let d,a;return(d=A*o-r*h)>=0&&(a=s*h-r*o)>=0&&d+a<s*A-r*r}}ht.CLOSEST=sA.CLOSEST;ht.ANY=sA.ANY;ht.ALL=sA.ALL;const al=new Wt,Ko=[],Ds=new M,Yo=new M,Cm=new M,_m=new ft,Rt=new M,gn=new M,vn=new M,wn=new M;new M;new jr;const Al={faceList:[0]},Tr=new M,Em=new ht,Im=[],ym=new M,vm=new M,wm=new M;new M;new M;const ll=new M,xm=new M,Mm=new M,Tm=new M,Qm=new M,Dm=new M,bm=new M;new Wt;const Sm=[],Fm=new Pe,Ti=new M,Qr=new M;function Rm(l,e,t){t.vsub(l,Ti);const n=Ti.dot(e);return e.scale(n,Qr),Qr.vadd(l,Qr),t.distanceTo(Qr)}class Om{static defaults(e,t){e===void 0&&(e={});for(let n in t)n in e||(e[n]=t[n]);return e}}class cl{constructor(){this.spatial=new M,this.rotational=new M}multiplyElement(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)}multiplyVectors(e,t){return e.dot(this.spatial)+t.dot(this.rotational)}}class Cr{constructor(e,t,n,i){n===void 0&&(n=-1e6),i===void 0&&(i=1e6),this.id=Cr.idCounter++,this.minForce=n,this.maxForce=i,this.bi=e,this.bj=t,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new cl,this.jacobianElementB=new cl,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(e,t,n){const i=t,s=e,r=n;this.a=4/(r*(1+4*i)),this.b=4*i/(1+4*i),this.eps=4/(r*r*s*(1+4*i))}computeB(e,t,n){const i=this.computeGW(),s=this.computeGq(),r=this.computeGiMf();return-s*e-i*t-r*n}computeGq(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,s=n.position,r=i.position;return e.spatial.dot(s)+t.spatial.dot(r)}computeGW(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,s=n.velocity,r=i.velocity,o=n.angularVelocity,A=i.angularVelocity;return e.multiplyVectors(s,o)+t.multiplyVectors(r,A)}computeGWlambda(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,s=n.vlambda,r=i.vlambda,o=n.wlambda,A=i.wlambda;return e.multiplyVectors(s,o)+t.multiplyVectors(r,A)}computeGiMf(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,s=n.force,r=n.torque,o=i.force,A=i.torque,h=n.invMassSolve,d=i.invMassSolve;return s.scale(h,hl),o.scale(d,ul),n.invInertiaWorldSolve.vmult(r,dl),i.invInertiaWorldSolve.vmult(A,fl),e.multiplyVectors(hl,dl)+t.multiplyVectors(ul,fl)}computeGiMGt(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,s=n.invMassSolve,r=i.invMassSolve,o=n.invInertiaWorldSolve,A=i.invInertiaWorldSolve;let h=s+r;return o.vmult(e.rotational,Dr),h+=Dr.dot(e.rotational),A.vmult(t.rotational,Dr),h+=Dr.dot(t.rotational),h}addToWlambda(e){const t=this.jacobianElementA,n=this.jacobianElementB,i=this.bi,s=this.bj,r=Lm;i.vlambda.addScaledVector(i.invMassSolve*e,t.spatial,i.vlambda),s.vlambda.addScaledVector(s.invMassSolve*e,n.spatial,s.vlambda),i.invInertiaWorldSolve.vmult(t.rotational,r),i.wlambda.addScaledVector(e,r,i.wlambda),s.invInertiaWorldSolve.vmult(n.rotational,r),s.wlambda.addScaledVector(e,r,s.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Cr.idCounter=0;const hl=new M,ul=new M,dl=new M,fl=new M,Dr=new M,Lm=new M;class Gm extends Cr{constructor(e,t,n){n===void 0&&(n=1e6),super(e,t,0,n),this.restitution=0,this.ri=new M,this.rj=new M,this.ni=new M}computeB(e){const t=this.a,n=this.b,i=this.bi,s=this.bj,r=this.ri,o=this.rj,A=Pm,h=km,d=i.velocity,a=i.angularVelocity;i.force,i.torque;const c=s.velocity,u=s.angularVelocity;s.force,s.torque;const f=Um,p=this.jacobianElementA,m=this.jacobianElementB,g=this.ni;r.cross(g,A),o.cross(g,h),g.negate(p.spatial),A.negate(p.rotational),m.spatial.copy(g),m.rotational.copy(h),f.copy(s.position),f.vadd(o,f),f.vsub(i.position,f),f.vsub(r,f);const B=g.dot(f),I=this.restitution+1,_=I*c.dot(g)-I*d.dot(g)+u.dot(h)-a.dot(A),C=this.computeGiMf();return-B*t-_*n-e*C}getImpactVelocityAlongNormal(){const e=Nm,t=Hm,n=Jm,i=zm,s=Km;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,i),this.bi.getVelocityAtWorldPoint(n,e),this.bj.getVelocityAtWorldPoint(i,t),e.vsub(t,s),this.ni.dot(s)}}const Pm=new M,km=new M,Um=new M,Nm=new M,Hm=new M,Jm=new M,zm=new M,Km=new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;class pl extends Cr{constructor(e,t,n){super(e,t,-n,n),this.ri=new M,this.rj=new M,this.t=new M}computeB(e){this.a;const t=this.b;this.bi,this.bj;const n=this.ri,i=this.rj,s=Ym,r=qm,o=this.t;n.cross(o,s),i.cross(o,r);const A=this.jacobianElementA,h=this.jacobianElementB;o.negate(A.spatial),s.negate(A.rotational),h.spatial.copy(o),h.rotational.copy(r);const d=this.computeGW(),a=this.computeGiMf();return-d*t-e*a}}const Ym=new M,qm=new M;class lo{constructor(e,t,n){n=Om.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=lo.idCounter++,this.materials=[e,t],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}}lo.idCounter=0;class co{constructor(e){e===void 0&&(e={});let t="";typeof e=="string"&&(t=e,e={}),this.name=t,this.id=co.idCounter++,this.friction=typeof e.friction<"u"?e.friction:-1,this.restitution=typeof e.restitution<"u"?e.restitution:-1}}co.idCounter=0;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new ht;new M;new M;new M;new M(1,0,0),new M(0,1,0),new M(0,0,1);new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new Wt;new M;new Wt;new M;new M;new M;new M;new M;new M;new M;new Wt;new M;new Pe;new Wt;class Vm{constructor(){this.equations=[]}solve(e,t){return 0}addEquation(e){e.enabled&&!e.bi.isTrigger&&!e.bj.isTrigger&&this.equations.push(e)}removeEquation(e){const t=this.equations,n=t.indexOf(e);n!==-1&&t.splice(n,1)}removeAllEquations(){this.equations.length=0}}class Xm extends Vm{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(e,t){let n=0;const i=this.iterations,s=this.tolerance*this.tolerance,r=this.equations,o=r.length,A=t.bodies,h=A.length,d=e;let a,c,u,f,p,m;if(o!==0)for(let _=0;_!==h;_++)A[_].updateSolveMassProperties();const g=Wm,B=Zm,I=jm;g.length=o,B.length=o,I.length=o;for(let _=0;_!==o;_++){const C=r[_];I[_]=0,B[_]=C.computeB(d),g[_]=1/C.computeC()}if(o!==0){for(let E=0;E!==h;E++){const v=A[E],x=v.vlambda,w=v.wlambda;x.set(0,0,0),w.set(0,0,0)}for(n=0;n!==i;n++){f=0;for(let E=0;E!==o;E++){const v=r[E];a=B[E],c=g[E],m=I[E],p=v.computeGWlambda(),u=c*(a-p-v.eps*m),m+u<v.minForce?u=v.minForce-m:m+u>v.maxForce&&(u=v.maxForce-m),I[E]+=u,f+=u>0?u:-u,v.addToWlambda(u)}if(f*f<s)break}for(let E=0;E!==h;E++){const v=A[E],x=v.velocity,w=v.angularVelocity;v.vlambda.vmul(v.linearFactor,v.vlambda),x.vadd(v.vlambda,x),v.wlambda.vmul(v.angularFactor,v.wlambda),w.vadd(v.wlambda,w)}let _=r.length;const C=1/d;for(;_--;)r[_].multiplier=I[_]*C}return n}}const jm=[],Wm=[],Zm=[];class $m{constructor(){this.objects=[],this.type=Object}release(){const e=arguments.length;for(let t=0;t!==e;t++)this.objects.push(t<0||arguments.length<=t?void 0:arguments[t]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(e){const t=this.objects;for(;t.length>e;)t.pop();for(;t.length<e;)t.push(this.constructObject());return this}}class eB extends $m{constructor(){super(...arguments),this.type=M}constructObject(){return new M}}const We={sphereSphere:me.types.SPHERE,spherePlane:me.types.SPHERE|me.types.PLANE,boxBox:me.types.BOX|me.types.BOX,sphereBox:me.types.SPHERE|me.types.BOX,planeBox:me.types.PLANE|me.types.BOX,convexConvex:me.types.CONVEXPOLYHEDRON,sphereConvex:me.types.SPHERE|me.types.CONVEXPOLYHEDRON,planeConvex:me.types.PLANE|me.types.CONVEXPOLYHEDRON,boxConvex:me.types.BOX|me.types.CONVEXPOLYHEDRON,sphereHeightfield:me.types.SPHERE|me.types.HEIGHTFIELD,boxHeightfield:me.types.BOX|me.types.HEIGHTFIELD,convexHeightfield:me.types.CONVEXPOLYHEDRON|me.types.HEIGHTFIELD,sphereParticle:me.types.PARTICLE|me.types.SPHERE,planeParticle:me.types.PLANE|me.types.PARTICLE,boxParticle:me.types.BOX|me.types.PARTICLE,convexParticle:me.types.PARTICLE|me.types.CONVEXPOLYHEDRON,cylinderCylinder:me.types.CYLINDER,sphereCylinder:me.types.SPHERE|me.types.CYLINDER,planeCylinder:me.types.PLANE|me.types.CYLINDER,boxCylinder:me.types.BOX|me.types.CYLINDER,convexCylinder:me.types.CONVEXPOLYHEDRON|me.types.CYLINDER,heightfieldCylinder:me.types.HEIGHTFIELD|me.types.CYLINDER,particleCylinder:me.types.PARTICLE|me.types.CYLINDER,sphereTrimesh:me.types.SPHERE|me.types.TRIMESH,planeTrimesh:me.types.PLANE|me.types.TRIMESH};class tB{get[We.sphereSphere](){return this.sphereSphere}get[We.spherePlane](){return this.spherePlane}get[We.boxBox](){return this.boxBox}get[We.sphereBox](){return this.sphereBox}get[We.planeBox](){return this.planeBox}get[We.convexConvex](){return this.convexConvex}get[We.sphereConvex](){return this.sphereConvex}get[We.planeConvex](){return this.planeConvex}get[We.boxConvex](){return this.boxConvex}get[We.sphereHeightfield](){return this.sphereHeightfield}get[We.boxHeightfield](){return this.boxHeightfield}get[We.convexHeightfield](){return this.convexHeightfield}get[We.sphereParticle](){return this.sphereParticle}get[We.planeParticle](){return this.planeParticle}get[We.boxParticle](){return this.boxParticle}get[We.convexParticle](){return this.convexParticle}get[We.cylinderCylinder](){return this.convexConvex}get[We.sphereCylinder](){return this.sphereConvex}get[We.planeCylinder](){return this.planeConvex}get[We.boxCylinder](){return this.boxConvex}get[We.convexCylinder](){return this.convexConvex}get[We.heightfieldCylinder](){return this.heightfieldCylinder}get[We.particleCylinder](){return this.particleCylinder}get[We.sphereTrimesh](){return this.sphereTrimesh}get[We.planeTrimesh](){return this.planeTrimesh}constructor(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new eB,this.world=e,this.currentContactMaterial=e.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(e,t,n,i,s,r){let o;this.contactPointPool.length?(o=this.contactPointPool.pop(),o.bi=e,o.bj=t):o=new Gm(e,t),o.enabled=e.collisionResponse&&t.collisionResponse&&n.collisionResponse&&i.collisionResponse;const A=this.currentContactMaterial;o.restitution=A.restitution,o.setSpookParams(A.contactEquationStiffness,A.contactEquationRelaxation,this.world.dt);const h=n.material||e.material,d=i.material||t.material;return h&&d&&h.restitution>=0&&d.restitution>=0&&(o.restitution=h.restitution*d.restitution),o.si=s||n,o.sj=r||i,o}createFrictionEquationsFromContact(e,t){const n=e.bi,i=e.bj,s=e.si,r=e.sj,o=this.world,A=this.currentContactMaterial;let h=A.friction;const d=s.material||n.material,a=r.material||i.material;if(d&&a&&d.friction>=0&&a.friction>=0&&(h=d.friction*a.friction),h>0){const c=h*(o.frictionGravity||o.gravity).length();let u=n.invMass+i.invMass;u>0&&(u=1/u);const f=this.frictionEquationPool,p=f.length?f.pop():new pl(n,i,c*u),m=f.length?f.pop():new pl(n,i,c*u);return p.bi=m.bi=n,p.bj=m.bj=i,p.minForce=m.minForce=-c*u,p.maxForce=m.maxForce=c*u,p.ri.copy(e.ri),p.rj.copy(e.rj),m.ri.copy(e.ri),m.rj.copy(e.rj),e.ni.tangents(p.t,m.t),p.setSpookParams(A.frictionEquationStiffness,A.frictionEquationRelaxation,o.dt),m.setSpookParams(A.frictionEquationStiffness,A.frictionEquationRelaxation,o.dt),p.enabled=m.enabled=e.enabled,t.push(p,m),!0}return!1}createFrictionFromAverage(e){let t=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(t,this.frictionResult)||e===1)return;const n=this.frictionResult[this.frictionResult.length-2],i=this.frictionResult[this.frictionResult.length-1];Ei.setZero(),Ki.setZero(),Yi.setZero();const s=t.bi;t.bj;for(let o=0;o!==e;o++)t=this.result[this.result.length-1-o],t.bi!==s?(Ei.vadd(t.ni,Ei),Ki.vadd(t.ri,Ki),Yi.vadd(t.rj,Yi)):(Ei.vsub(t.ni,Ei),Ki.vadd(t.rj,Ki),Yi.vadd(t.ri,Yi));const r=1/e;Ki.scale(r,n.ri),Yi.scale(r,n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj),Ei.normalize(),Ei.tangents(n.t,i.t)}getContacts(e,t,n,i,s,r,o){this.contactPointPool=s,this.frictionEquationPool=o,this.result=i,this.frictionResult=r;const A=sB,h=rB,d=nB,a=iB;for(let c=0,u=e.length;c!==u;c++){const f=e[c],p=t[c];let m=null;f.material&&p.material&&(m=n.getContactMaterial(f.material,p.material)||null);const g=f.type&Be.KINEMATIC&&p.type&Be.STATIC||f.type&Be.STATIC&&p.type&Be.KINEMATIC||f.type&Be.KINEMATIC&&p.type&Be.KINEMATIC;for(let B=0;B<f.shapes.length;B++){f.quaternion.mult(f.shapeOrientations[B],A),f.quaternion.vmult(f.shapeOffsets[B],d),d.vadd(f.position,d);const I=f.shapes[B];for(let _=0;_<p.shapes.length;_++){p.quaternion.mult(p.shapeOrientations[_],h),p.quaternion.vmult(p.shapeOffsets[_],a),a.vadd(p.position,a);const C=p.shapes[_];if(!(I.collisionFilterMask&C.collisionFilterGroup&&C.collisionFilterMask&I.collisionFilterGroup)||d.distanceTo(a)>I.boundingSphereRadius+C.boundingSphereRadius)continue;let E=null;I.material&&C.material&&(E=n.getContactMaterial(I.material,C.material)||null),this.currentContactMaterial=E||m||n.defaultContactMaterial;const v=I.type|C.type,x=this[v];if(x){let w=!1;I.type<C.type?w=x.call(this,I,C,d,a,A,h,f,p,I,C,g):w=x.call(this,C,I,a,d,h,A,p,f,I,C,g),w&&g&&(n.shapeOverlapKeeper.set(I.id,C.id),n.bodyOverlapKeeper.set(f.id,p.id))}}}}}sphereSphere(e,t,n,i,s,r,o,A,h,d,a){if(a)return n.distanceSquared(i)<(e.radius+t.radius)**2;const c=this.createContactEquation(o,A,e,t,h,d);i.vsub(n,c.ni),c.ni.normalize(),c.ri.copy(c.ni),c.rj.copy(c.ni),c.ri.scale(e.radius,c.ri),c.rj.scale(-t.radius,c.rj),c.ri.vadd(n,c.ri),c.ri.vsub(o.position,c.ri),c.rj.vadd(i,c.rj),c.rj.vsub(A.position,c.rj),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}spherePlane(e,t,n,i,s,r,o,A,h,d,a){const c=this.createContactEquation(o,A,e,t,h,d);if(c.ni.set(0,0,1),r.vmult(c.ni,c.ni),c.ni.negate(c.ni),c.ni.normalize(),c.ni.scale(e.radius,c.ri),n.vsub(i,br),c.ni.scale(c.ni.dot(br),gl),br.vsub(gl,c.rj),-br.dot(c.ni)<=e.radius){if(a)return!0;const u=c.ri,f=c.rj;u.vadd(n,u),u.vsub(o.position,u),f.vadd(i,f),f.vsub(A.position,f),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}}boxBox(e,t,n,i,s,r,o,A,h,d,a){return e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t.convexPolyhedronRepresentation,n,i,s,r,o,A,e,t,a)}sphereBox(e,t,n,i,s,r,o,A,h,d,a){const c=this.v3pool,u=bB;n.vsub(i,Sr),t.getSideNormals(u,r);const f=e.radius;let p=!1;const m=FB,g=RB,B=OB;let I=null,_=0,C=0,E=0,v=null;for(let U=0,te=u.length;U!==te&&p===!1;U++){const j=TB;j.copy(u[U]);const J=j.length();j.normalize();const ee=Sr.dot(j);if(ee<J+f&&ee>0){const ae=QB,W=DB;ae.copy(u[(U+1)%3]),W.copy(u[(U+2)%3]);const _e=ae.length(),Ee=W.length();ae.normalize(),W.normalize();const N=Sr.dot(ae),P=Sr.dot(W);if(N<_e&&N>-_e&&P<Ee&&P>-Ee){const R=Math.abs(ee-J-f);if((v===null||R<v)&&(v=R,C=N,E=P,I=J,m.copy(j),g.copy(ae),B.copy(W),_++,a))return!0}}}if(_){p=!0;const U=this.createContactEquation(o,A,e,t,h,d);m.scale(-f,U.ri),U.ni.copy(m),U.ni.negate(U.ni),m.scale(I,m),g.scale(C,g),m.vadd(g,m),B.scale(E,B),m.vadd(B,U.rj),U.ri.vadd(n,U.ri),U.ri.vsub(o.position,U.ri),U.rj.vadd(i,U.rj),U.rj.vsub(A.position,U.rj),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult)}let x=c.get();const w=SB;for(let U=0;U!==2&&!p;U++)for(let te=0;te!==2&&!p;te++)for(let j=0;j!==2&&!p;j++)if(x.set(0,0,0),U?x.vadd(u[0],x):x.vsub(u[0],x),te?x.vadd(u[1],x):x.vsub(u[1],x),j?x.vadd(u[2],x):x.vsub(u[2],x),i.vadd(x,w),w.vsub(n,w),w.lengthSquared()<f*f){if(a)return!0;p=!0;const J=this.createContactEquation(o,A,e,t,h,d);J.ri.copy(w),J.ri.normalize(),J.ni.copy(J.ri),J.ri.scale(f,J.ri),J.rj.copy(x),J.ri.vadd(n,J.ri),J.ri.vsub(o.position,J.ri),J.rj.vadd(i,J.rj),J.rj.vsub(A.position,J.rj),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult)}c.release(x),x=null;const D=c.get(),G=c.get(),O=c.get(),T=c.get(),b=c.get(),F=u.length;for(let U=0;U!==F&&!p;U++)for(let te=0;te!==F&&!p;te++)if(U%3!==te%3){u[te].cross(u[U],D),D.normalize(),u[U].vadd(u[te],G),O.copy(n),O.vsub(G,O),O.vsub(i,O);const j=O.dot(D);D.scale(j,T);let J=0;for(;J===U%3||J===te%3;)J++;b.copy(n),b.vsub(T,b),b.vsub(G,b),b.vsub(i,b);const ee=Math.abs(j),ae=b.length();if(ee<u[J].length()&&ae<f){if(a)return!0;p=!0;const W=this.createContactEquation(o,A,e,t,h,d);G.vadd(T,W.rj),W.rj.copy(W.rj),b.negate(W.ni),W.ni.normalize(),W.ri.copy(W.rj),W.ri.vadd(i,W.ri),W.ri.vsub(n,W.ri),W.ri.normalize(),W.ri.scale(f,W.ri),W.ri.vadd(n,W.ri),W.ri.vsub(o.position,W.ri),W.rj.vadd(i,W.rj),W.rj.vsub(A.position,W.rj),this.result.push(W),this.createFrictionEquationsFromContact(W,this.frictionResult)}}c.release(D,G,O,T,b)}planeBox(e,t,n,i,s,r,o,A,h,d,a){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,t.convexPolyhedronRepresentation.id=t.id,this.planeConvex(e,t.convexPolyhedronRepresentation,n,i,s,r,o,A,e,t,a)}convexConvex(e,t,n,i,s,r,o,A,h,d,a,c,u){const f=jB;if(!(n.distanceTo(i)>e.boundingSphereRadius+t.boundingSphereRadius)&&e.findSeparatingAxis(t,n,s,i,r,f,c,u)){const p=[],m=WB;e.clipAgainstHull(n,s,t,i,r,f,-100,100,p);let g=0;for(let B=0;B!==p.length;B++){if(a)return!0;const I=this.createContactEquation(o,A,e,t,h,d),_=I.ri,C=I.rj;f.negate(I.ni),p[B].normal.negate(m),m.scale(p[B].depth,m),p[B].point.vadd(m,_),C.copy(p[B].point),_.vsub(n,_),C.vsub(i,C),_.vadd(n,_),_.vsub(o.position,_),C.vadd(i,C),C.vsub(A.position,C),this.result.push(I),g++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(I,this.frictionResult)}this.enableFrictionReduction&&g&&this.createFrictionFromAverage(g)}}sphereConvex(e,t,n,i,s,r,o,A,h,d,a){const c=this.v3pool;n.vsub(i,LB);const u=t.faceNormals,f=t.faces,p=t.vertices,m=e.radius;let g=!1;for(let B=0;B!==p.length;B++){const I=p[B],_=UB;r.vmult(I,_),i.vadd(_,_);const C=kB;if(_.vsub(n,C),C.lengthSquared()<m*m){if(a)return!0;g=!0;const E=this.createContactEquation(o,A,e,t,h,d);E.ri.copy(C),E.ri.normalize(),E.ni.copy(E.ri),E.ri.scale(m,E.ri),_.vsub(i,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(o.position,E.ri),E.rj.vadd(i,E.rj),E.rj.vsub(A.position,E.rj),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult);return}}for(let B=0,I=f.length;B!==I&&g===!1;B++){const _=u[B],C=f[B],E=NB;r.vmult(_,E);const v=HB;r.vmult(p[C[0]],v),v.vadd(i,v);const x=JB;E.scale(-m,x),n.vadd(x,x);const w=zB;x.vsub(v,w);const D=w.dot(E),G=KB;if(n.vsub(v,G),D<0&&G.dot(E)>0){const O=[];for(let T=0,b=C.length;T!==b;T++){const F=c.get();r.vmult(p[C[T]],F),i.vadd(F,F),O.push(F)}if(MB(O,E,n)){if(a)return!0;g=!0;const T=this.createContactEquation(o,A,e,t,h,d);E.scale(-m,T.ri),E.negate(T.ni);const b=c.get();E.scale(-D,b);const F=c.get();E.scale(-m,F),n.vsub(i,T.rj),T.rj.vadd(F,T.rj),T.rj.vadd(b,T.rj),T.rj.vadd(i,T.rj),T.rj.vsub(A.position,T.rj),T.ri.vadd(n,T.ri),T.ri.vsub(o.position,T.ri),c.release(b),c.release(F),this.result.push(T),this.createFrictionEquationsFromContact(T,this.frictionResult);for(let U=0,te=O.length;U!==te;U++)c.release(O[U]);return}else for(let T=0;T!==C.length;T++){const b=c.get(),F=c.get();r.vmult(p[C[(T+1)%C.length]],b),r.vmult(p[C[(T+2)%C.length]],F),i.vadd(b,b),i.vadd(F,F);const U=GB;F.vsub(b,U);const te=PB;U.unit(te);const j=c.get(),J=c.get();n.vsub(b,J);const ee=J.dot(te);te.scale(ee,j),j.vadd(b,j);const ae=c.get();if(j.vsub(n,ae),ee>0&&ee*ee<U.lengthSquared()&&ae.lengthSquared()<m*m){if(a)return!0;const W=this.createContactEquation(o,A,e,t,h,d);j.vsub(i,W.rj),j.vsub(n,W.ni),W.ni.normalize(),W.ni.scale(m,W.ri),W.rj.vadd(i,W.rj),W.rj.vsub(A.position,W.rj),W.ri.vadd(n,W.ri),W.ri.vsub(o.position,W.ri),this.result.push(W),this.createFrictionEquationsFromContact(W,this.frictionResult);for(let _e=0,Ee=O.length;_e!==Ee;_e++)c.release(O[_e]);c.release(b),c.release(F),c.release(j),c.release(ae),c.release(J);return}c.release(b),c.release(F),c.release(j),c.release(ae),c.release(J)}for(let T=0,b=O.length;T!==b;T++)c.release(O[T])}}}planeConvex(e,t,n,i,s,r,o,A,h,d,a){const c=YB,u=qB;u.set(0,0,1),s.vmult(u,u);let f=0;const p=VB;for(let m=0;m!==t.vertices.length;m++)if(c.copy(t.vertices[m]),r.vmult(c,c),i.vadd(c,c),c.vsub(n,p),u.dot(p)<=0){if(a)return!0;const B=this.createContactEquation(o,A,e,t,h,d),I=XB;u.scale(u.dot(p),I),c.vsub(I,I),I.vsub(n,B.ri),B.ni.copy(u),c.vsub(i,B.rj),B.ri.vadd(n,B.ri),B.ri.vsub(o.position,B.ri),B.rj.vadd(i,B.rj),B.rj.vsub(A.position,B.rj),this.result.push(B),f++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(B,this.frictionResult)}this.enableFrictionReduction&&f&&this.createFrictionFromAverage(f)}boxConvex(e,t,n,i,s,r,o,A,h,d,a){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t,n,i,s,r,o,A,e,t,a)}sphereHeightfield(e,t,n,i,s,r,o,A,h,d,a){const c=t.data,u=e.radius,f=t.elementSize,p=lC,m=AC;Pe.pointToLocalFrame(i,r,n,m);let g=Math.floor((m.x-u)/f)-1,B=Math.ceil((m.x+u)/f)+1,I=Math.floor((m.y-u)/f)-1,_=Math.ceil((m.y+u)/f)+1;if(B<0||_<0||g>c.length||I>c[0].length)return;g<0&&(g=0),B<0&&(B=0),I<0&&(I=0),_<0&&(_=0),g>=c.length&&(g=c.length-1),B>=c.length&&(B=c.length-1),_>=c[0].length&&(_=c[0].length-1),I>=c[0].length&&(I=c[0].length-1);const C=[];t.getRectMinMax(g,I,B,_,C);const E=C[0],v=C[1];if(m.z-u>v||m.z+u<E)return;const x=this.result;for(let w=g;w<B;w++)for(let D=I;D<_;D++){const G=x.length;let O=!1;if(t.getConvexTrianglePillar(w,D,!1),Pe.pointToWorldFrame(i,r,t.pillarOffset,p),n.distanceTo(p)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(O=this.sphereConvex(e,t.pillarConvex,n,p,s,r,o,A,e,t,a)),a&&O||(t.getConvexTrianglePillar(w,D,!0),Pe.pointToWorldFrame(i,r,t.pillarOffset,p),n.distanceTo(p)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(O=this.sphereConvex(e,t.pillarConvex,n,p,s,r,o,A,e,t,a)),a&&O))return!0;if(x.length-G>2)return}}boxHeightfield(e,t,n,i,s,r,o,A,h,d,a){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,t,n,i,s,r,o,A,e,t,a)}convexHeightfield(e,t,n,i,s,r,o,A,h,d,a){const c=t.data,u=t.elementSize,f=e.boundingSphereRadius,p=oC,m=aC,g=rC;Pe.pointToLocalFrame(i,r,n,g);let B=Math.floor((g.x-f)/u)-1,I=Math.ceil((g.x+f)/u)+1,_=Math.floor((g.y-f)/u)-1,C=Math.ceil((g.y+f)/u)+1;if(I<0||C<0||B>c.length||_>c[0].length)return;B<0&&(B=0),I<0&&(I=0),_<0&&(_=0),C<0&&(C=0),B>=c.length&&(B=c.length-1),I>=c.length&&(I=c.length-1),C>=c[0].length&&(C=c[0].length-1),_>=c[0].length&&(_=c[0].length-1);const E=[];t.getRectMinMax(B,_,I,C,E);const v=E[0],x=E[1];if(!(g.z-f>x||g.z+f<v))for(let w=B;w<I;w++)for(let D=_;D<C;D++){let G=!1;if(t.getConvexTrianglePillar(w,D,!1),Pe.pointToWorldFrame(i,r,t.pillarOffset,p),n.distanceTo(p)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(G=this.convexConvex(e,t.pillarConvex,n,p,s,r,o,A,null,null,a,m,null)),a&&G||(t.getConvexTrianglePillar(w,D,!0),Pe.pointToWorldFrame(i,r,t.pillarOffset,p),n.distanceTo(p)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(G=this.convexConvex(e,t.pillarConvex,n,p,s,r,o,A,null,null,a,m,null)),a&&G))return!0}}sphereParticle(e,t,n,i,s,r,o,A,h,d,a){const c=tC;if(c.set(0,0,1),i.vsub(n,c),c.lengthSquared()<=e.radius*e.radius){if(a)return!0;const f=this.createContactEquation(A,o,t,e,h,d);c.normalize(),f.rj.copy(c),f.rj.scale(e.radius,f.rj),f.ni.copy(c),f.ni.negate(f.ni),f.ri.set(0,0,0),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}planeParticle(e,t,n,i,s,r,o,A,h,d,a){const c=ZB;c.set(0,0,1),o.quaternion.vmult(c,c);const u=$B;if(i.vsub(o.position,u),c.dot(u)<=0){if(a)return!0;const p=this.createContactEquation(A,o,t,e,h,d);p.ni.copy(c),p.ni.negate(p.ni),p.ri.set(0,0,0);const m=eC;c.scale(c.dot(i),m),i.vsub(m,m),p.rj.copy(m),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}}boxParticle(e,t,n,i,s,r,o,A,h,d,a){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,t,n,i,s,r,o,A,e,t,a)}convexParticle(e,t,n,i,s,r,o,A,h,d,a){let c=-1;const u=iC,f=sC;let p=null;const m=nC;if(m.copy(i),m.vsub(n,m),s.conjugate(ml),ml.vmult(m,m),e.pointIsInside(m)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(n,s),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(s);for(let g=0,B=e.faces.length;g!==B;g++){const I=[e.worldVertices[e.faces[g][0]]],_=e.worldFaceNormals[g];i.vsub(I[0],Bl);const C=-_.dot(Bl);if(p===null||Math.abs(C)<Math.abs(p)){if(a)return!0;p=C,c=g,u.copy(_)}}if(c!==-1){const g=this.createContactEquation(A,o,t,e,h,d);u.scale(p,f),f.vadd(i,f),f.vsub(n,f),g.rj.copy(f),u.negate(g.ni),g.ri.set(0,0,0);const B=g.ri,I=g.rj;B.vadd(i,B),B.vsub(A.position,B),I.vadd(n,I),I.vsub(o.position,I),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(e,t,n,i,s,r,o,A,h,d,a){return this.convexHeightfield(t,e,i,n,r,s,A,o,h,d,a)}particleCylinder(e,t,n,i,s,r,o,A,h,d,a){return this.convexParticle(t,e,i,n,r,s,A,o,h,d,a)}sphereTrimesh(e,t,n,i,s,r,o,A,h,d,a){const c=dB,u=fB,f=pB,p=gB,m=mB,g=BB,B=IB,I=uB,_=cB,C=yB;Pe.pointToLocalFrame(i,r,n,m);const E=e.radius;B.lowerBound.set(m.x-E,m.y-E,m.z-E),B.upperBound.set(m.x+E,m.y+E,m.z+E),t.getTrianglesInAABB(B,C);const v=hB,x=e.radius*e.radius;for(let T=0;T<C.length;T++)for(let b=0;b<3;b++)if(t.getVertex(t.indices[C[T]*3+b],v),v.vsub(m,_),_.lengthSquared()<=x){if(I.copy(v),Pe.pointToWorldFrame(i,r,I,v),v.vsub(n,_),a)return!0;let F=this.createContactEquation(o,A,e,t,h,d);F.ni.copy(_),F.ni.normalize(),F.ri.copy(F.ni),F.ri.scale(e.radius,F.ri),F.ri.vadd(n,F.ri),F.ri.vsub(o.position,F.ri),F.rj.copy(v),F.rj.vsub(A.position,F.rj),this.result.push(F),this.createFrictionEquationsFromContact(F,this.frictionResult)}for(let T=0;T<C.length;T++)for(let b=0;b<3;b++){t.getVertex(t.indices[C[T]*3+b],c),t.getVertex(t.indices[C[T]*3+(b+1)%3],u),u.vsub(c,f),m.vsub(u,g);const F=g.dot(f);m.vsub(c,g);let U=g.dot(f);if(U>0&&F<0&&(m.vsub(c,g),p.copy(f),p.normalize(),U=g.dot(p),p.scale(U,g),g.vadd(c,g),g.distanceTo(m)<e.radius)){if(a)return!0;const j=this.createContactEquation(o,A,e,t,h,d);g.vsub(m,j.ni),j.ni.normalize(),j.ni.scale(e.radius,j.ri),j.ri.vadd(n,j.ri),j.ri.vsub(o.position,j.ri),Pe.pointToWorldFrame(i,r,g,g),g.vsub(A.position,j.rj),Pe.vectorToWorldFrame(r,j.ni,j.ni),Pe.vectorToWorldFrame(r,j.ri,j.ri),this.result.push(j),this.createFrictionEquationsFromContact(j,this.frictionResult)}}const w=CB,D=_B,G=EB,O=lB;for(let T=0,b=C.length;T!==b;T++){t.getTriangleVertices(C[T],w,D,G),t.getNormal(C[T],O),m.vsub(w,g);let F=g.dot(O);if(O.scale(F,g),m.vsub(g,g),F=g.distanceTo(m),ht.pointInTriangle(g,w,D,G)&&F<e.radius){if(a)return!0;let U=this.createContactEquation(o,A,e,t,h,d);g.vsub(m,U.ni),U.ni.normalize(),U.ni.scale(e.radius,U.ri),U.ri.vadd(n,U.ri),U.ri.vsub(o.position,U.ri),Pe.pointToWorldFrame(i,r,g,g),g.vsub(A.position,U.rj),Pe.vectorToWorldFrame(r,U.ni,U.ni),Pe.vectorToWorldFrame(r,U.ri,U.ri),this.result.push(U),this.createFrictionEquationsFromContact(U,this.frictionResult)}}C.length=0}planeTrimesh(e,t,n,i,s,r,o,A,h,d,a){const c=new M,u=oB;u.set(0,0,1),s.vmult(u,u);for(let f=0;f<t.vertices.length/3;f++){t.getVertex(f,c);const p=new M;p.copy(c),Pe.pointToWorldFrame(i,r,p,c);const m=aB;if(c.vsub(n,m),u.dot(m)<=0){if(a)return!0;const B=this.createContactEquation(o,A,e,t,h,d);B.ni.copy(u);const I=AB;u.scale(m.dot(u),I),c.vsub(I,I),B.ri.copy(I),B.ri.vsub(o.position,B.ri),B.rj.copy(c),B.rj.vsub(A.position,B.rj),this.result.push(B),this.createFrictionEquationsFromContact(B,this.frictionResult)}}}}const Ei=new M,Ki=new M,Yi=new M,nB=new M,iB=new M,sB=new ft,rB=new ft,oB=new M,aB=new M,AB=new M,lB=new M,cB=new M;new M;const hB=new M,uB=new M,dB=new M,fB=new M,pB=new M,gB=new M,mB=new M,BB=new M,CB=new M,_B=new M,EB=new M,IB=new Wt,yB=[],br=new M,gl=new M,vB=new M,wB=new M,xB=new M;function MB(l,e,t){let n=null;const i=l.length;for(let s=0;s!==i;s++){const r=l[s],o=vB;l[(s+1)%i].vsub(r,o);const A=wB;o.cross(e,A);const h=xB;t.vsub(r,h);const d=A.dot(h);if(n===null||d>0&&n===!0||d<=0&&n===!1){n===null&&(n=d>0);continue}else return!1}return!0}const Sr=new M,TB=new M,QB=new M,DB=new M,bB=[new M,new M,new M,new M,new M,new M],SB=new M,FB=new M,RB=new M,OB=new M,LB=new M,GB=new M,PB=new M,kB=new M,UB=new M,NB=new M,HB=new M,JB=new M,zB=new M,KB=new M;new M;new M;const YB=new M,qB=new M,VB=new M,XB=new M,jB=new M,WB=new M,ZB=new M,$B=new M,eC=new M,tC=new M,ml=new ft,nC=new M;new M;const iC=new M,Bl=new M,sC=new M,rC=new M,oC=new M,aC=[0],AC=new M,lC=new M;class Cl{constructor(){this.current=[],this.previous=[]}getKey(e,t){if(t<e){const n=t;t=e,e=n}return e<<16|t}set(e,t){const n=this.getKey(e,t),i=this.current;let s=0;for(;n>i[s];)s++;if(n!==i[s]){for(let r=i.length-1;r>=s;r--)i[r+1]=i[r];i[s]=n}}tick(){const e=this.current;this.current=this.previous,this.previous=e,this.current.length=0}getDiff(e,t){const n=this.current,i=this.previous,s=n.length,r=i.length;let o=0;for(let A=0;A<s;A++){let h=!1;const d=n[A];for(;d>i[o];)o++;h=d===i[o],h||_l(e,d)}o=0;for(let A=0;A<r;A++){let h=!1;const d=i[A];for(;d>n[o];)o++;h=n[o]===d,h||_l(t,d)}}}function _l(l,e){l.push((e&4294901760)>>16,e&65535)}const qo=(l,e)=>l<e?`${l}-${e}`:`${e}-${l}`;class cC{constructor(){this.data={keys:[]}}get(e,t){const n=qo(e,t);return this.data[n]}set(e,t,n){const i=qo(e,t);this.get(e,t)||this.data.keys.push(i),this.data[i]=n}delete(e,t){const n=qo(e,t),i=this.data.keys.indexOf(n);i!==-1&&this.data.keys.splice(i,1),delete this.data[n]}reset(){const e=this.data,t=e.keys;for(;t.length>0;){const n=t.pop();delete e[n]}}}let hC=class extends dh{constructor(e){e===void 0&&(e={}),super(),this.dt=-1,this.allowSleep=!!e.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=e.quatNormalizeSkip!==void 0?e.quatNormalizeSkip:0,this.quatNormalizeFast=e.quatNormalizeFast!==void 0?e.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new M,e.gravity&&this.gravity.copy(e.gravity),e.frictionGravity&&(this.frictionGravity=new M,this.frictionGravity.copy(e.frictionGravity)),this.broadphase=e.broadphase!==void 0?e.broadphase:new Bm,this.bodies=[],this.hasActiveBodies=!1,this.solver=e.solver!==void 0?e.solver:new Xm,this.constraints=[],this.narrowphase=new tB(this),this.collisionMatrix=new rl,this.collisionMatrixPrevious=new rl,this.bodyOverlapKeeper=new Cl,this.shapeOverlapKeeper=new Cl,this.contactmaterials=[],this.contactMaterialTable=new cC,this.defaultMaterial=new co("default"),this.defaultContactMaterial=new lo(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(e,t){return this.contactMaterialTable.get(e.id,t.id)}collisionMatrixTick(){const e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(e){this.constraints.push(e)}removeConstraint(e){const t=this.constraints.indexOf(e);t!==-1&&this.constraints.splice(t,1)}rayTest(e,t,n){n instanceof jr?this.raycastClosest(e,t,{skipBackfaces:!0},n):this.raycastAll(e,t,{skipBackfaces:!0},n)}raycastAll(e,t,n,i){return n===void 0&&(n={}),n.mode=ht.ALL,n.from=e,n.to=t,n.callback=i,Vo.intersectWorld(this,n)}raycastAny(e,t,n,i){return n===void 0&&(n={}),n.mode=ht.ANY,n.from=e,n.to=t,n.result=i,Vo.intersectWorld(this,n)}raycastClosest(e,t,n,i){return n===void 0&&(n={}),n.mode=ht.CLOSEST,n.from=e,n.to=t,n.result=i,Vo.intersectWorld(this,n)}addBody(e){this.bodies.includes(e)||(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof Be&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.idToBodyMap[e.id]=e,this.dispatchEvent(this.addBodyEvent))}removeBody(e){e.world=null;const t=this.bodies.length-1,n=this.bodies,i=n.indexOf(e);if(i!==-1){n.splice(i,1);for(let s=0;s!==n.length;s++)n[s].index=s;this.collisionMatrix.setNumObjects(t),this.removeBodyEvent.body=e,delete this.idToBodyMap[e.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(e){return this.idToBodyMap[e]}getShapeById(e){const t=this.bodies;for(let n=0;n<t.length;n++){const i=t[n].shapes;for(let s=0;s<i.length;s++){const r=i[s];if(r.id===e)return r}}return null}addContactMaterial(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e)}removeContactMaterial(e){const t=this.contactmaterials.indexOf(e);t!==-1&&(this.contactmaterials.splice(t,1),this.contactMaterialTable.delete(e.materials[0].id,e.materials[1].id))}fixedStep(e,t){e===void 0&&(e=1/60),t===void 0&&(t=10);const n=gt.now()/1e3;if(!this.lastCallTime)this.step(e,void 0,t);else{const i=n-this.lastCallTime;this.step(e,i,t)}this.lastCallTime=n}step(e,t,n){if(n===void 0&&(n=10),t===void 0)this.internalStep(e),this.time+=e;else{this.accumulator+=t;const i=gt.now();let s=0;for(;this.accumulator>=e&&s<n&&(this.internalStep(e),this.accumulator-=e,s++,!(gt.now()-i>e*1e3)););this.accumulator=this.accumulator%e;const r=this.accumulator/e;for(let o=0;o!==this.bodies.length;o++){const A=this.bodies[o];A.previousPosition.lerp(A.position,r,A.interpolatedPosition),A.previousQuaternion.slerp(A.quaternion,r,A.interpolatedQuaternion),A.previousQuaternion.normalize()}this.time+=t}}internalStep(e){this.dt=e;const t=this.contacts,n=gC,i=mC,s=this.bodies.length,r=this.bodies,o=this.solver,A=this.gravity,h=this.doProfiling,d=this.profile,a=Be.DYNAMIC;let c=-1/0;const u=this.constraints,f=pC;A.length();const p=A.x,m=A.y,g=A.z;let B=0;for(h&&(c=gt.now()),B=0;B!==s;B++){const T=r[B];if(T.type===a){const b=T.force,F=T.mass;b.x+=F*p,b.y+=F*m,b.z+=F*g}}for(let T=0,b=this.subsystems.length;T!==b;T++)this.subsystems[T].update();h&&(c=gt.now()),n.length=0,i.length=0,this.broadphase.collisionPairs(this,n,i),h&&(d.broadphase=gt.now()-c);let I=u.length;for(B=0;B!==I;B++){const T=u[B];if(!T.collideConnected)for(let b=n.length-1;b>=0;b-=1)(T.bodyA===n[b]&&T.bodyB===i[b]||T.bodyB===n[b]&&T.bodyA===i[b])&&(n.splice(b,1),i.splice(b,1))}this.collisionMatrixTick(),h&&(c=gt.now());const _=fC,C=t.length;for(B=0;B!==C;B++)_.push(t[B]);t.length=0;const E=this.frictionEquations.length;for(B=0;B!==E;B++)f.push(this.frictionEquations[B]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(n,i,this,t,_,this.frictionEquations,f),h&&(d.narrowphase=gt.now()-c),h&&(c=gt.now()),B=0;B<this.frictionEquations.length;B++)o.addEquation(this.frictionEquations[B]);const v=t.length;for(let T=0;T!==v;T++){const b=t[T],F=b.bi,U=b.bj,te=b.si,j=b.sj;let J;if(F.material&&U.material?J=this.getContactMaterial(F.material,U.material)||this.defaultContactMaterial:J=this.defaultContactMaterial,J.friction,F.material&&U.material&&(F.material.friction>=0&&U.material.friction>=0&&F.material.friction*U.material.friction,F.material.restitution>=0&&U.material.restitution>=0&&(b.restitution=F.material.restitution*U.material.restitution)),o.addEquation(b),F.allowSleep&&F.type===Be.DYNAMIC&&F.sleepState===Be.SLEEPING&&U.sleepState===Be.AWAKE&&U.type!==Be.STATIC){const ee=U.velocity.lengthSquared()+U.angularVelocity.lengthSquared(),ae=U.sleepSpeedLimit**2;ee>=ae*2&&(F.wakeUpAfterNarrowphase=!0)}if(U.allowSleep&&U.type===Be.DYNAMIC&&U.sleepState===Be.SLEEPING&&F.sleepState===Be.AWAKE&&F.type!==Be.STATIC){const ee=F.velocity.lengthSquared()+F.angularVelocity.lengthSquared(),ae=F.sleepSpeedLimit**2;ee>=ae*2&&(U.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(F,U,!0),this.collisionMatrixPrevious.get(F,U)||(bs.body=U,bs.contact=b,F.dispatchEvent(bs),bs.body=F,U.dispatchEvent(bs)),this.bodyOverlapKeeper.set(F.id,U.id),this.shapeOverlapKeeper.set(te.id,j.id)}for(this.emitContactEvents(),h&&(d.makeContactConstraints=gt.now()-c,c=gt.now()),B=0;B!==s;B++){const T=r[B];T.wakeUpAfterNarrowphase&&(T.wakeUp(),T.wakeUpAfterNarrowphase=!1)}for(I=u.length,B=0;B!==I;B++){const T=u[B];T.update();for(let b=0,F=T.equations.length;b!==F;b++){const U=T.equations[b];o.addEquation(U)}}o.solve(e,this),h&&(d.solve=gt.now()-c),o.removeAllEquations();const x=Math.pow;for(B=0;B!==s;B++){const T=r[B];if(T.type&a){const b=x(1-T.linearDamping,e),F=T.velocity;F.scale(b,F);const U=T.angularVelocity;if(U){const te=x(1-T.angularDamping,e);U.scale(te,U)}}}this.dispatchEvent(dC),h&&(c=gt.now());const D=this.stepnumber%(this.quatNormalizeSkip+1)===0,G=this.quatNormalizeFast;for(B=0;B!==s;B++)r[B].integrate(e,D,G);this.clearForces(),this.broadphase.dirty=!0,h&&(d.integrate=gt.now()-c),this.stepnumber+=1,this.dispatchEvent(uC);let O=!0;if(this.allowSleep)for(O=!1,B=0;B!==s;B++){const T=r[B];T.sleepTick(this.time),T.sleepState!==Be.SLEEPING&&(O=!0)}this.hasActiveBodies=O}emitContactEvents(){const e=this.hasAnyEventListener("beginContact"),t=this.hasAnyEventListener("endContact");if((e||t)&&this.bodyOverlapKeeper.getDiff(kn,Un),e){for(let s=0,r=kn.length;s<r;s+=2)Ss.bodyA=this.getBodyById(kn[s]),Ss.bodyB=this.getBodyById(kn[s+1]),this.dispatchEvent(Ss);Ss.bodyA=Ss.bodyB=null}if(t){for(let s=0,r=Un.length;s<r;s+=2)Fs.bodyA=this.getBodyById(Un[s]),Fs.bodyB=this.getBodyById(Un[s+1]),this.dispatchEvent(Fs);Fs.bodyA=Fs.bodyB=null}kn.length=Un.length=0;const n=this.hasAnyEventListener("beginShapeContact"),i=this.hasAnyEventListener("endShapeContact");if((n||i)&&this.shapeOverlapKeeper.getDiff(kn,Un),n){for(let s=0,r=kn.length;s<r;s+=2){const o=this.getShapeById(kn[s]),A=this.getShapeById(kn[s+1]);Nn.shapeA=o,Nn.shapeB=A,o&&(Nn.bodyA=o.body),A&&(Nn.bodyB=A.body),this.dispatchEvent(Nn)}Nn.bodyA=Nn.bodyB=Nn.shapeA=Nn.shapeB=null}if(i){for(let s=0,r=Un.length;s<r;s+=2){const o=this.getShapeById(Un[s]),A=this.getShapeById(Un[s+1]);Hn.shapeA=o,Hn.shapeB=A,o&&(Hn.bodyA=o.body),A&&(Hn.bodyB=A.body),this.dispatchEvent(Hn)}Hn.bodyA=Hn.bodyB=Hn.shapeA=Hn.shapeB=null}}clearForces(){const e=this.bodies,t=e.length;for(let n=0;n!==t;n++){const i=e[n];i.force,i.torque,i.force.set(0,0,0),i.torque.set(0,0,0)}}};new Wt;const Vo=new ht,gt=globalThis.performance||{};if(!gt.now){let l=Date.now();gt.timing&&gt.timing.navigationStart&&(l=gt.timing.navigationStart),gt.now=()=>Date.now()-l}new M;const uC={type:"postStep"},dC={type:"preStep"},bs={type:Be.COLLIDE_EVENT_NAME,body:null,contact:null},fC=[],pC=[],gC=[],mC=[],kn=[],Un=[],Ss={type:"beginContact",bodyA:null,bodyB:null},Fs={type:"endContact",bodyA:null,bodyB:null},Nn={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Hn={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};var Nr={exports:{}},Hr={exports:{}},BC=Hr.exports,El;function CC(){return El||(El=1,function(l){(function(e,t){l.exports?l.exports=t():e.EvEmitter=t()})(typeof window<"u"?window:BC,function(){function e(){}let t=e.prototype;return t.on=function(n,i){if(!n||!i)return this;let s=this._events=this._events||{},r=s[n]=s[n]||[];return r.includes(i)||r.push(i),this},t.once=function(n,i){if(!n||!i)return this;this.on(n,i);let s=this._onceEvents=this._onceEvents||{},r=s[n]=s[n]||{};return r[i]=!0,this},t.off=function(n,i){let s=this._events&&this._events[n];if(!s||!s.length)return this;let r=s.indexOf(i);return r!=-1&&s.splice(r,1),this},t.emitEvent=function(n,i){let s=this._events&&this._events[n];if(!s||!s.length)return this;s=s.slice(0),i=i||[];let r=this._onceEvents&&this._onceEvents[n];for(let o of s)r&&r[o]&&(this.off(n,o),delete r[o]),o.apply(this,i);return this},t.allOff=function(){return delete this._events,delete this._onceEvents,this},e})}(Hr)),Hr.exports}/*!
 * imagesLoaded v5.0.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */var _C=Nr.exports,Il;function EC(){return Il||(Il=1,function(l){(function(e,t){l.exports?l.exports=t(e,CC()):e.imagesLoaded=t(e,e.EvEmitter)})(typeof window<"u"?window:_C,function(t,n){let i=t.jQuery,s=t.console;function r(c){return Array.isArray(c)?c:typeof c=="object"&&typeof c.length=="number"?[...c]:[c]}function o(c,u,f){if(!(this instanceof o))return new o(c,u,f);let p=c;if(typeof c=="string"&&(p=document.querySelectorAll(c)),!p){s.error(`Bad element for imagesLoaded ${p||c}`);return}this.elements=r(p),this.options={},typeof u=="function"?f=u:Object.assign(this.options,u),f&&this.on("always",f),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))}o.prototype=Object.create(n.prototype),o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const A=[1,9,11];o.prototype.addElementImages=function(c){c.nodeName==="IMG"&&this.addImage(c),this.options.background===!0&&this.addElementBackgroundImages(c);let{nodeType:u}=c;if(!u||!A.includes(u))return;let f=c.querySelectorAll("img");for(let p of f)this.addImage(p);if(typeof this.options.background=="string"){let p=c.querySelectorAll(this.options.background);for(let m of p)this.addElementBackgroundImages(m)}};const h=/url\((['"])?(.*?)\1\)/gi;o.prototype.addElementBackgroundImages=function(c){let u=getComputedStyle(c);if(!u)return;let f=h.exec(u.backgroundImage);for(;f!==null;){let p=f&&f[2];p&&this.addBackground(p,c),f=h.exec(u.backgroundImage)}},o.prototype.addImage=function(c){let u=new d(c);this.images.push(u)},o.prototype.addBackground=function(c,u){let f=new a(c,u);this.images.push(f)},o.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}let c=(u,f,p)=>{setTimeout(()=>{this.progress(u,f,p)})};this.images.forEach(function(u){u.once("progress",c),u.check()})},o.prototype.progress=function(c,u,f){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!c.isLoaded,this.emitEvent("progress",[this,c,u]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,c),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&s&&s.log(`progress: ${f}`,c,u)},o.prototype.complete=function(){let c=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(c,[this]),this.emitEvent("always",[this]),this.jqDeferred){let u=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[u](this)}};function d(c){this.img=c}d.prototype=Object.create(n.prototype),d.prototype.check=function(){if(this.getIsImageComplete()){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src},d.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},d.prototype.confirm=function(c,u){this.isLoaded=c;let{parentNode:f}=this.img,p=f.nodeName==="PICTURE"?f:this.img;this.emitEvent("progress",[this,p,u])},d.prototype.handleEvent=function(c){let u="on"+c.type;this[u]&&this[u](c)},d.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},d.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},d.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function a(c,u){this.url=c,this.element=u,this.img=new Image}return a.prototype=Object.create(d.prototype),a.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(c,u){this.isLoaded=c,this.emitEvent("progress",[this,this.element,u])},o.makeJQueryPlugin=function(c){c=c||t.jQuery,c&&(i=c,i.fn.imagesLoaded=function(u,f){return new o(this,u,f).jqDeferred.promise(i(this))})},o.makeJQueryPlugin(),o})}(Nr)),Nr.exports}EC();const IC=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop",yC="https://www.gstatic.com/draco/versioned/decoders/1.5.7/",vC=(l,e={})=>{const{unsuspend:t="loadedmetadata",crossOrigin:n="Anonymous",loop:i=!0,muted:s=!0,start:r=!0}=e;return new Promise(o=>{const A=Object.assign(document.createElement("video"),{src:l,crossOrigin:n,loop:i,muted:s,...e}),h=new bd(A);A.addEventListener(t,()=>{r&&h.image.play(),o(h)})})},ho=l=>{const e=[];return l.traverse(t=>{e.push(t)}),e},wC=(l,e)=>{const t=document.createElement("a");document.body.appendChild(t),t.style.display="none";const n=window.URL.createObjectURL(l);t.href=n,t.download=e,t.click()},xC=l=>new Promise(e=>setTimeout(e,l)),Eh=Math.sqrt(3),MC=.5*(Eh-1),Rs=(3-Eh)/6,TC=1/3,xn=1/6,$s=l=>Math.floor(l)|0,yl=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Xo=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function QC(l=Math.random){const e=Ih(l),t=new Float64Array(e).map(i=>yl[i%12*2]),n=new Float64Array(e).map(i=>yl[i%12*2+1]);return function(s,r){let o=0,A=0,h=0;const d=(s+r)*MC,a=$s(s+d),c=$s(r+d),u=(a+c)*Rs,f=a-u,p=c-u,m=s-f,g=r-p;let B,I;m>g?(B=1,I=0):(B=0,I=1);const _=m-B+Rs,C=g-I+Rs,E=m-1+2*Rs,v=g-1+2*Rs,x=a&255,w=c&255;let D=.5-m*m-g*g;if(D>=0){const T=x+e[w],b=t[T],F=n[T];D*=D,o=D*D*(b*m+F*g)}let G=.5-_*_-C*C;if(G>=0){const T=x+B+e[w+I],b=t[T],F=n[T];G*=G,A=G*G*(b*_+F*C)}let O=.5-E*E-v*v;if(O>=0){const T=x+1+e[w+1],b=t[T],F=n[T];O*=O,h=O*O*(b*E+F*v)}return 70*(o+A+h)}}function DC(l=Math.random){const e=Ih(l),t=new Float64Array(e).map(s=>Xo[s%12*3]),n=new Float64Array(e).map(s=>Xo[s%12*3+1]),i=new Float64Array(e).map(s=>Xo[s%12*3+2]);return function(r,o,A){let h,d,a,c;const u=(r+o+A)*TC,f=$s(r+u),p=$s(o+u),m=$s(A+u),g=(f+p+m)*xn,B=f-g,I=p-g,_=m-g,C=r-B,E=o-I,v=A-_;let x,w,D,G,O,T;C>=E?E>=v?(x=1,w=0,D=0,G=1,O=1,T=0):C>=v?(x=1,w=0,D=0,G=1,O=0,T=1):(x=0,w=0,D=1,G=1,O=0,T=1):E<v?(x=0,w=0,D=1,G=0,O=1,T=1):C<v?(x=0,w=1,D=0,G=0,O=1,T=1):(x=0,w=1,D=0,G=1,O=1,T=0);const b=C-x+xn,F=E-w+xn,U=v-D+xn,te=C-G+2*xn,j=E-O+2*xn,J=v-T+2*xn,ee=C-1+3*xn,ae=E-1+3*xn,W=v-1+3*xn,_e=f&255,Ee=p&255,N=m&255;let P=.6-C*C-E*E-v*v;if(P<0)h=0;else{const ie=_e+e[Ee+e[N]];P*=P,h=P*P*(t[ie]*C+n[ie]*E+i[ie]*v)}let R=.6-b*b-F*F-U*U;if(R<0)d=0;else{const ie=_e+x+e[Ee+w+e[N+D]];R*=R,d=R*R*(t[ie]*b+n[ie]*F+i[ie]*U)}let S=.6-te*te-j*j-J*J;if(S<0)a=0;else{const ie=_e+G+e[Ee+O+e[N+T]];S*=S,a=S*S*(t[ie]*te+n[ie]*j+i[ie]*J)}let Z=.6-ee*ee-ae*ae-W*W;if(Z<0)c=0;else{const ie=_e+1+e[Ee+1+e[N+1]];Z*=Z,c=Z*Z*(t[ie]*ee+n[ie]*ae+i[ie]*W)}return 32*(h+d+a+c)}}function Ih(l){const t=new Uint8Array(512);for(let n=0;n<512/2;n++)t[n]=n;for(let n=0;n<512/2-1;n++){const i=n+~~(l()*(256-n)),s=t[n];t[n]=t[i],t[i]=s}for(let n=256;n<512;n++)t[n]=t[n-256];return t}DC();new Qe;new Qe;new Qe;new we;class bC extends Jt{constructor(t,n,i={}){super(t);Y(this,"config");Y(this,"resourceList");Y(this,"items");Y(this,"toLoad");Y(this,"loaded");Y(this,"loaders");const{useDracoLoader:s=!1,useMeshoptDecoder:r=!1,dracoDecoderPath:o=yC,ktx2TranscoderPath:A="https://unpkg.com/three/examples/jsm/libs/basis/"}=i;this.config={useDracoLoader:s,useMeshoptDecoder:r,dracoDecoderPath:o,ktx2TranscoderPath:A},this.resourceList=n,this.items={},this.toLoad=n.length,this.loaded=0,this.loaders={},this.setLoaders(),s&&this.setDracoLoader(),r&&this.setMeshoptDecoder(),this.setKTX2Loader(),this.startLoading()}setLoaders(){this.loaders.gltfLoader=new gf,this.loaders.textureLoader=new oo,this.loaders.cubeTextureLoader=new Sd,this.loaders.fontLoader=new $f,this.loaders.fbxLoader=new Rg,this.loaders.audioLoader=new Fd,this.loaders.objLoader=new Lp,this.loaders.hdrTextureLoader=new Mp,this.loaders.svgLoader=new Dp,this.loaders.exrLoader=new Tp,this.loaders.ktx2Loader=new vp}setDracoLoader(){var n;const t=new Gp;t.setDecoderPath(this.config.dracoDecoderPath),(n=this.loaders.gltfLoader)==null||n.setDRACOLoader(t)}setMeshoptDecoder(){var n;const t=kp();(n=this.loaders.gltfLoader)==null||n.setMeshoptDecoder(t)}setKTX2Loader(){var t,n,i;(n=(t=this.loaders.ktx2Loader)==null?void 0:t.setTranscoderPath(this.config.ktx2TranscoderPath))==null||n.detectSupport(this.base.renderer),this.loaders.ktx2Loader&&((i=this.loaders.gltfLoader)==null||i.setKTX2Loader(this.loaders.ktx2Loader))}startLoading(){var t,n,i,s,r,o,A,h,d,a,c;for(const u of this.resourceList)u.type==="gltfModel"?(t=this.loaders.gltfLoader)==null||t.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="texture"?(n=this.loaders.textureLoader)==null||n.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="cubeTexture"?(i=this.loaders.cubeTextureLoader)==null||i.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="font"?(s=this.loaders.fontLoader)==null||s.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="fbxModel"?(r=this.loaders.fbxLoader)==null||r.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="audio"?(o=this.loaders.audioLoader)==null||o.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="objModel"?(A=this.loaders.objLoader)==null||A.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="hdrTexture"?(h=this.loaders.hdrTextureLoader)==null||h.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="svg"?(d=this.loaders.svgLoader)==null||d.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="exrTexture"?(a=this.loaders.exrLoader)==null||a.load(u.path,f=>{this.resourceLoaded(u,f)}):u.type==="video"?vC(u.path).then(f=>{this.resourceLoaded(u,f)}):u.type==="ktx2Texture"&&((c=this.loaders.ktx2Loader)==null||c.load(u.path,f=>{this.resourceLoaded(u,f)}))}resourceLoaded(t,n){this.items[t.name]=n,this.loaded+=1,this.isLoaded&&this.emit("ready")}get loadProgress(){return this.loaded/this.toLoad}get isLoaded(){return this.loaded===this.toLoad}}class SC extends Jt{constructor(t){super(t);Y(this,"clock");Y(this,"deltaTime");Y(this,"elapsedTime");const n=new Rd;this.clock=n,this.deltaTime=0,this.elapsedTime=0}update(t){const n=this.clock.getElapsedTime(),i=n-this.elapsedTime;this.deltaTime=i,this.elapsedTime=n,this.emit("tick")}}class FC extends Jt{constructor(t){super(t);Y(this,"shadertoyUniforms");this.shadertoyUniforms={iGlobalTime:{value:0},iTime:{value:0},iTimeDelta:{value:0},iResolution:{value:new Qe(window.innerWidth,window.innerHeight,1)},iMouse:{value:new bn(0,0,0,0)},iFrame:{value:0},iDate:{value:new bn(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate(),new Date().getHours())},iSampleRate:{value:44100},iChannelTime:{value:[0,0,0,0]}}}injectShadertoyUniforms(t=this.shadertoyUniforms){const n=this.base.clock.elapsedTime;t.iGlobalTime.value=n,t.iTime.value=n;const i=this.base.clock.deltaTime;t.iTimeDelta.value=i,t.iResolution.value=new Qe(window.innerWidth,window.innerHeight,1);const{x:s,y:r}=this.base.iMouse.mouse;t.iMouse.value=new bn(s,r,0,0),t.iDate.value=new bn(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate(),new Date().getHours()),t.iChannelTime.value=[n,n,n,n],t.iFrame.value+=1}}class RC extends Jt{constructor(t){super(t);Y(this,"mouse");Y(this,"mouseDOM");Y(this,"mouseScreen");Y(this,"prevMouseDOM");Y(this,"isMouseMoving");Y(this,"mouseMoveOffset");Y(this,"mouseDOMDelta");const n=new we(0,0);this.mouse=n;const i=new we(0,0);this.mouseDOM=i;const s=new we(0,0);this.mouseScreen=s,this.prevMouseDOM=new we(0,0),this.isMouseMoving=!1,this.mouseMoveOffset=4,this.mouseDOMDelta=new we(0,0)}getMouse(t,n){return new we(t,window.innerHeight-n)}getMouseDOM(t,n){return new we(t,n)}getMouseScreen(t,n){return new we(t-window.innerWidth/2,-(n-window.innerHeight/2))}listenForMouse(){const t=IC();t==="Desktop"?this.listenForDesktop():t==="Mobile"&&this.listenForMobile()}listenForDesktop(){window.addEventListener("mousemove",t=>{const n=this.getMouse(t.clientX,t.clientY);this.mouse=n;const i=this.getMouseDOM(t.clientX,t.clientY);this.mouseDOM=i;const s=this.getMouseScreen(t.clientX,t.clientY);this.mouseScreen=s})}listenForMobile(){window.addEventListener("touchstart",t=>{const n=this.getMouse(t.touches[0].clientX,t.touches[0].clientY);this.mouse=n;const i=this.getMouseDOM(t.touches[0].clientX,t.touches[0].clientY);this.mouseDOM=i;const s=this.getMouseScreen(t.touches[0].clientX,t.touches[0].clientY);this.mouseScreen=s}),window.addEventListener("touchmove",t=>{const n=this.getMouse(t.touches[0].clientX,t.touches[0].clientY);this.mouse=n;const i=this.getMouseDOM(t.touches[0].clientX,t.touches[0].clientY);this.mouseDOM=i;const s=this.getMouseScreen(t.touches[0].clientX,t.touches[0].clientY);this.mouseScreen=s})}syncMouseDOM(){this.prevMouseDOM.x=this.mouseDOM.x,this.prevMouseDOM.y=this.mouseDOM.y}judgeIsMouseMoving(){Math.abs(this.mouseDOMDelta.x)<this.mouseMoveOffset&&Math.abs(this.mouseDOMDelta.y)<this.mouseMoveOffset?this.isMouseMoving=!1:this.isMouseMoving=!0}getMouseDOMDelta(){const t=this.mouseDOM.x-this.prevMouseDOM.x,n=this.mouseDOM.y-this.prevMouseDOM.y,i=new we(t,n);this.mouseDOMDelta=i}update(t){this.getMouseDOMDelta(),this.judgeIsMouseMoving(),this.syncMouseDOM()}}const Jr=(l,e)=>{const t=e.x-l.x,n=e.y-l.y;return Math.sqrt(t*t+n*n)},OC=(l,e)=>{const t=e.x-l.x,n=e.y-l.y;return GC(Math.atan2(n,t))},LC=(l,e,t)=>{const n={x:0,y:0};return t=Da(t),n.x=l.x-e*Math.cos(t),n.y=l.y-e*Math.sin(t),n},Da=l=>l*(Math.PI/180),GC=l=>l*(180/Math.PI),PC=l=>isNaN(l.buttons)?l.pressure!==0:l.buttons!==0,jo=new Map,vl=l=>{jo.has(l)&&clearTimeout(jo.get(l)),jo.set(l,setTimeout(l,100))},Wr=(l,e,t)=>{const n=e.split(/[ ,]+/g);let i;for(let s=0;s<n.length;s+=1)i=n[s],l.addEventListener?l.addEventListener(i,t,!1):l.attachEvent&&l.attachEvent(i,t)},wl=(l,e,t)=>{const n=e.split(/[ ,]+/g);let i;for(let s=0;s<n.length;s+=1)i=n[s],l.removeEventListener?l.removeEventListener(i,t):l.detachEvent&&l.detachEvent(i,t)},yh=l=>(l.preventDefault(),l.type.match(/^touch/)?l.changedTouches:l),xl=()=>{const l=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:l,y:e}},Ml=(l,e)=>{e.top||e.right||e.bottom||e.left?(l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left):(l.style.left=e.x+"px",l.style.top=e.y+"px")},rA=(l,e,t)=>{const n=vh(l);for(let i in n)if(n.hasOwnProperty(i))if(typeof e=="string")n[i]=e+" "+t;else{let s="";for(let r=0,o=e.length;r<o;r+=1)s+=e[r]+" "+t+", ";n[i]=s.slice(0,-2)}return n},kC=(l,e)=>{const t=vh(l);for(let n in t)t.hasOwnProperty(n)&&(t[n]=e);return t},vh=l=>{const e={};return e[l]="",["webkit","Moz","o"].forEach(function(n){e[n+l.charAt(0).toUpperCase()+l.slice(1)]=""}),e},Wo=(l,e)=>{for(let t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);return l},UC=(l,e)=>{const t={};for(let n in l)l.hasOwnProperty(n)&&e.hasOwnProperty(n)?t[n]=e[n]:l.hasOwnProperty(n)&&(t[n]=l[n]);return t},ba=(l,e)=>{if(l.length)for(let t=0,n=l.length;t<n;t+=1)e(l[t]);else e(l)},NC=(l,e,t)=>({x:Math.min(Math.max(l.x,e.x-t),e.x+t),y:Math.min(Math.max(l.y,e.y-t),e.y+t)});var HC="ontouchstart"in window,JC=!!window.PointerEvent,zC=!!window.MSPointerEvent,Os={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},is,Ar={};JC?is=Os.pointer:zC?is=Os.MSPointer:HC?(is=Os.touch,Ar=Os.mouse):is=Os.mouse;function Wn(){}Wn.prototype.on=function(l,e){var t=this,n=l.split(/[ ,]+/g),i;t._handlers_=t._handlers_||{};for(var s=0;s<n.length;s+=1)i=n[s],t._handlers_[i]=t._handlers_[i]||[],t._handlers_[i].push(e);return t};Wn.prototype.off=function(l,e){var t=this;return t._handlers_=t._handlers_||{},l===void 0?t._handlers_={}:e===void 0?t._handlers_[l]=null:t._handlers_[l]&&t._handlers_[l].indexOf(e)>=0&&t._handlers_[l].splice(t._handlers_[l].indexOf(e),1),t};Wn.prototype.trigger=function(l,e){var t=this,n=l.split(/[ ,]+/g),i;t._handlers_=t._handlers_||{};for(var s=0;s<n.length;s+=1)i=n[s],t._handlers_[i]&&t._handlers_[i].length&&t._handlers_[i].forEach(function(r){r.call(t,{type:i,target:t},e)})};Wn.prototype.config=function(l){var e=this;e.options=e.defaults||{},l&&(e.options=UC(e.options,l))};Wn.prototype.bindEvt=function(l,e){var t=this;return t._domHandlers_=t._domHandlers_||{},t._domHandlers_[e]=function(){typeof t["on"+e]=="function"?t["on"+e].apply(t,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},Wr(l,is[e],t._domHandlers_[e]),Ar[e]&&Wr(l,Ar[e],t._domHandlers_[e]),t};Wn.prototype.unbindEvt=function(l,e){var t=this;return t._domHandlers_=t._domHandlers_||{},wl(l,is[e],t._domHandlers_[e]),Ar[e]&&wl(l,Ar[e],t._domHandlers_[e]),delete t._domHandlers_[e],this};function mt(l,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=l,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=mt.id,mt.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}mt.prototype=new Wn;mt.constructor=mt;mt.id=0;mt.prototype.buildEl=function(l){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};mt.prototype.stylize=function(){if(this.options.dataOnly)return this;var l=this.options.fadeTime+"ms",e=kC("borderRadius","50%"),t=rA("transition","opacity",l),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},Wo(n.el,t),this.options.shape==="circle"&&Wo(n.back,e),Wo(n.front,e),this.applyStyles(n),this};mt.prototype.applyStyles=function(l){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var t in l[e])this.ui[e].style[t]=l[e][t];return this};mt.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};mt.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};mt.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};mt.prototype.show=function(l){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof l=="function"&&l.call(this)},e.options.fadeTime)),e};mt.prototype.hide=function(l){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var t=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=t,typeof l=="function"&&l.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){const t=e.options.restJoystick,n={};n.x=t===!0||t.x!==!1?0:e.instance.frontPosition.x,n.y=t===!0||t.y!==!1?0:e.instance.frontPosition.y,e.setPosition(l,n)}return e};mt.prototype.setPosition=function(l,e){var t=this;t.frontPosition={x:e.x,y:e.y};var n=t.options.fadeTime+"ms",i={};i.front=rA("transition",["transform"],n);var s={front:{}};s.front={transform:"translate("+t.frontPosition.x+"px,"+t.frontPosition.y+"px)"},t.applyStyles(i),t.applyStyles(s),t.restTimeout=setTimeout(function(){typeof l=="function"&&l.call(t),t.restCallback()},t.options.fadeTime)};mt.prototype.restCallback=function(){var l=this,e={};e.front=rA("transition","none",""),l.applyStyles(e),l.trigger("rested",l.instance)};mt.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};mt.prototype.computeDirection=function(l){var e=l.angle.radian,t=Math.PI/4,n=Math.PI/2,i,s,r;if(e>t&&e<t*3&&!l.lockX?i="up":e>-t&&e<=t&&!l.lockY?i="left":e>-t*3&&e<=-t&&!l.lockX?i="down":l.lockY||(i="right"),l.lockY||(e>-n&&e<n?s="left":s="right"),l.lockX||(e>0?r="up":r="down"),l.force>this.options.threshold){var o={},A;for(A in this.direction)this.direction.hasOwnProperty(A)&&(o[A]=this.direction[A]);var h={};this.direction={x:s,y:r,angle:i},l.direction=this.direction;for(A in o)o[A]===this.direction[A]&&(h[A]=!0);if(h.x&&h.y&&h.angle)return l;(!h.x||!h.y)&&this.trigger("plain",l),h.x||this.trigger("plain:"+s,l),h.y||this.trigger("plain:"+r,l),h.angle||this.trigger("dir dir:"+i,l)}else this.resetDirection();return l};function ct(l,e){var t=this;t.nipples=[],t.idles=[],t.actives=[],t.ids=[],t.pressureIntervals={},t.manager=l,t.id=ct.id,ct.id+=1,t.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},t.config(e),(t.options.mode==="static"||t.options.mode==="semi")&&(t.options.multitouch=!1),t.options.multitouch||(t.options.maxNumberOfNipples=1);const n=getComputedStyle(t.options.zone.parentElement);return n&&n.display==="flex"&&(t.parentIsFlex=!0),t.updateBox(),t.prepareNipples(),t.bindings(),t.begin(),t.nipples}ct.prototype=new Wn;ct.constructor=ct;ct.id=0;ct.prototype.prepareNipples=function(){var l=this,e=l.nipples;e.on=l.on.bind(l),e.off=l.off.bind(l),e.options=l.options,e.destroy=l.destroy.bind(l),e.ids=l.ids,e.id=l.id,e.processOnMove=l.processOnMove.bind(l),e.processOnEnd=l.processOnEnd.bind(l),e.get=function(t){if(t===void 0)return e[0];for(var n=0,i=e.length;n<i;n+=1)if(e[n].identifier===t)return e[n];return!1}};ct.prototype.bindings=function(){var l=this;l.bindEvt(l.options.zone,"start"),l.options.zone.style.touchAction="none",l.options.zone.style.msTouchAction="none"};ct.prototype.begin=function(){var l=this,e=l.options;if(e.mode==="static"){var t=l.createNipple(e.position,l.manager.getIdentifier());t.add(),l.idles.push(t)}};ct.prototype.createNipple=function(l,e){var t=this,n=t.manager.scroll,i={},s=t.options,r={x:t.parentIsFlex?n.x:n.x+t.box.left,y:t.parentIsFlex?n.y:n.y+t.box.top};if(l.x&&l.y)i={x:l.x-r.x,y:l.y-r.y};else if(l.top||l.right||l.bottom||l.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=l.top,o.style.right=l.right,o.style.bottom=l.bottom,o.style.left=l.left,o.style.position="absolute",s.zone.appendChild(o);var A=o.getBoundingClientRect();s.zone.removeChild(o),i=l,l={x:A.left+n.x,y:A.top+n.y}}var h=new mt(t,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:e,position:l,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(Ml(h.ui.el,i),Ml(h.ui.front,h.frontPosition)),t.nipples.push(h),t.trigger("added "+h.identifier+":added",h),t.manager.trigger("added "+h.identifier+":added",h),t.bindNipple(h),h};ct.prototype.updateBox=function(){var l=this;l.box=l.options.zone.getBoundingClientRect()};ct.prototype.bindNipple=function(l){var e=this,t,n=function(i,s){t=i.type+" "+s.id+":"+i.type,e.trigger(t,s)};l.on("destroyed",e.onDestroyed.bind(e)),l.on("shown hidden rested dir plain",n),l.on("dir:up dir:right dir:down dir:left",n),l.on("plain:up plain:right plain:down plain:left",n)};ct.prototype.pressureFn=function(l,e,t){var n=this,i=0;clearInterval(n.pressureIntervals[t]),n.pressureIntervals[t]=setInterval((function(){var s=l.force||l.pressure||l.webkitForce||0;s!==i&&(e.trigger("pressure",s),n.trigger("pressure "+e.identifier+":pressure",s),i=s)}).bind(n),100)};ct.prototype.onstart=function(l){var e=this,t=e.options,n=l;l=yh(l),e.updateBox();var i=function(s){e.actives.length<t.maxNumberOfNipples?e.processOnStart(s):n.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(r){if(Object.values(n.touches).findIndex(function(A){return A.identifier===r})<0){var o=[l[0]];o.identifier=r,e.processOnEnd(o)}}),e.actives.length<t.maxNumberOfNipples&&e.processOnStart(s))};return ba(l,i),e.manager.bindDocument(),!1};ct.prototype.processOnStart=function(l){var e=this,t=e.options,n,i=e.manager.getIdentifier(l),s=l.force||l.pressure||l.webkitForce||0,r={x:l.pageX,y:l.pageY},o=e.getOrCreate(i,r);o.identifier!==i&&e.manager.removeIdentifier(o.identifier),o.identifier=i;var A=function(d){d.trigger("start",d),e.trigger("start "+d.id+":start",d),d.show(),s>0&&e.pressureFn(l,d,d.identifier),e.processOnMove(l)};if((n=e.idles.indexOf(o))>=0&&e.idles.splice(n,1),e.actives.push(o),e.ids.push(o.identifier),t.mode!=="semi")A(o);else{var h=Jr(r,o.position);if(h<=t.catchDistance)A(o);else{o.destroy(),e.processOnStart(l);return}}return o};ct.prototype.getOrCreate=function(l,e){var t=this,n=t.options,i;return/(semi|static)/.test(n.mode)?(i=t.idles[0],i?(t.idles.splice(0,1),i):n.mode==="semi"?t.createNipple(e,l):(console.warn("Coudln't find the needed nipple."),!1)):(i=t.createNipple(e,l),i)};ct.prototype.processOnMove=function(l){var e=this,t=e.options,n=e.manager.getIdentifier(l),i=e.nipples.get(n),s=e.manager.scroll;if(!PC(l)){this.processOnEnd(l);return}if(!i){console.error("Found zombie joystick with ID "+n),e.manager.removeIdentifier(n);return}if(t.dynamicPage){var r=i.el.getBoundingClientRect();i.position={x:s.x+r.left,y:s.y+r.top}}i.identifier=n;var o=i.options.size/2,A={x:l.pageX,y:l.pageY};t.lockX&&(A.y=i.position.y),t.lockY&&(A.x=i.position.x);var h=Jr(A,i.position),d=OC(A,i.position),a=Da(d),c=h/o,u={distance:h,position:A},f,p;if(i.options.shape==="circle"?(f=Math.min(h,o),p=LC(i.position,f,d)):(p=NC(A,i.position,o),f=Jr(p,i.position)),t.follow){if(h>o){let I=A.x-p.x,_=A.y-p.y;i.position.x+=I,i.position.y+=_,i.el.style.top=i.position.y-(e.box.top+s.y)+"px",i.el.style.left=i.position.x-(e.box.left+s.x)+"px",h=Jr(A,i.position)}}else A=p,h=f;var m=A.x-i.position.x,g=A.y-i.position.y;i.frontPosition={x:m,y:g},t.dataOnly||(i.ui.front.style.transform="translate("+m+"px,"+g+"px)");var B={identifier:i.identifier,position:A,force:c,pressure:l.force||l.pressure||l.webkitForce||0,distance:h,angle:{radian:a,degree:d},vector:{x:m/o,y:-g/o},raw:u,instance:i,lockX:t.lockX,lockY:t.lockY};B=i.computeDirection(B),B.angle={radian:Da(180-d),degree:180-d},i.trigger("move",B),e.trigger("move "+i.id+":move",B)};ct.prototype.processOnEnd=function(l){var e=this,t=e.options,n=e.manager.getIdentifier(l),i=e.nipples.get(n),s=e.manager.removeIdentifier(i.identifier);i&&(t.dataOnly||i.hide(function(){t.mode==="dynamic"&&(i.trigger("removed",i),e.trigger("removed "+i.id+":removed",i),e.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(e.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),e.trigger("end "+i.id+":end",i),e.ids.indexOf(i.identifier)>=0&&e.ids.splice(e.ids.indexOf(i.identifier),1),e.actives.indexOf(i)>=0&&e.actives.splice(e.actives.indexOf(i),1),/(semi|static)/.test(t.mode)?e.idles.push(i):e.nipples.indexOf(i)>=0&&e.nipples.splice(e.nipples.indexOf(i),1),e.manager.unbindDocument(),/(semi|static)/.test(t.mode)&&(e.manager.ids[s.id]=s.identifier))};ct.prototype.onDestroyed=function(l,e){var t=this;t.nipples.indexOf(e)>=0&&t.nipples.splice(t.nipples.indexOf(e),1),t.actives.indexOf(e)>=0&&t.actives.splice(t.actives.indexOf(e),1),t.idles.indexOf(e)>=0&&t.idles.splice(t.idles.indexOf(e),1),t.ids.indexOf(e.identifier)>=0&&t.ids.splice(t.ids.indexOf(e.identifier),1),t.manager.removeIdentifier(e.identifier),t.manager.unbindDocument()};ct.prototype.destroy=function(){var l=this;l.unbindEvt(l.options.zone,"start"),l.nipples.forEach(function(t){t.destroy()});for(var e in l.pressureIntervals)l.pressureIntervals.hasOwnProperty(e)&&clearInterval(l.pressureIntervals[e]);l.trigger("destroyed",l.nipples),l.manager.unbindDocument(),l.off()};function Ct(l){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=xl(),e.config(l),e.prepareCollections();var t=function(){var i;e.collections.forEach(function(s){s.forEach(function(r){i=r.el.getBoundingClientRect(),r.position={x:e.scroll.x+i.left,y:e.scroll.y+i.top}})})};Wr(window,"resize",function(){vl(t)});var n=function(){e.scroll=xl()};return Wr(window,"scroll",function(){vl(n)}),e.collections}Ct.prototype=new Wn;Ct.constructor=Ct;Ct.prototype.prepareCollections=function(){var l=this;l.collections.create=l.create.bind(l),l.collections.on=l.on.bind(l),l.collections.off=l.off.bind(l),l.collections.destroy=l.destroy.bind(l),l.collections.get=function(e){var t;return l.collections.every(function(n){return t=n.get(e),!t}),t}};Ct.prototype.create=function(l){return this.createCollection(l)};Ct.prototype.createCollection=function(l){var e=this,t=new ct(e,l);return e.bindCollection(t),e.collections.push(t),t};Ct.prototype.bindCollection=function(l){var e=this,t,n=function(i,s){t=i.type+" "+s.id+":"+i.type,e.trigger(t,s)};l.on("destroyed",e.onDestroyed.bind(e)),l.on("shown hidden rested dir plain",n),l.on("dir:up dir:right dir:down dir:left",n),l.on("plain:up plain:right plain:down plain:left",n)};Ct.prototype.bindDocument=function(){var l=this;l.binded||(l.bindEvt(document,"move").bindEvt(document,"end"),l.binded=!0)};Ct.prototype.unbindDocument=function(l){var e=this;(!Object.keys(e.ids).length||l===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};Ct.prototype.getIdentifier=function(l){var e;return l?(e=l.identifier===void 0?l.pointerId:l.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};Ct.prototype.removeIdentifier=function(l){var e={};for(var t in this.ids)if(this.ids[t]===l){e.id=t,e.identifier=this.ids[t],delete this.ids[t];break}return e};Ct.prototype.onmove=function(l){var e=this;return e.onAny("move",l),!1};Ct.prototype.onend=function(l){var e=this;return e.onAny("end",l),!1};Ct.prototype.oncancel=function(l){var e=this;return e.onAny("end",l),!1};Ct.prototype.onAny=function(l,e){var t=this,n,i="processOn"+l.charAt(0).toUpperCase()+l.slice(1);e=yh(e);var s=function(o,A,h){h.ids.indexOf(A)>=0&&(h[i](o),o._found_=!0)},r=function(o){n=t.getIdentifier(o),ba(t.collections,s.bind(null,o,n)),o._found_||t.removeIdentifier(n)};return ba(e,r),!1};Ct.prototype.destroy=function(){var l=this;l.unbindDocument(!0),l.ids={},l.index=0,l.collections.forEach(function(e){e.destroy()}),l.off()};Ct.prototype.onDestroyed=function(l,e){var t=this;if(t.collections.indexOf(e)<0)return!1;t.collections.splice(t.collections.indexOf(e),1)};new Ct;class KC{constructor(){Y(this,"keys");this.keys={}}listenForKey(){window.addEventListener("keydown",e=>{this.onKeyDown(e)}),window.addEventListener("keyup",e=>{this.onKeyUp(e)})}onKeyDown(e){this.keys[e.key]=!0}onKeyUp(e){this.keys[e.key]=!1}get isUpKeyDown(){return this.keys.w||this.keys.ArrowUp}get isDownKeyDown(){return this.keys.s||this.keys.ArrowDown}get isLeftKeyDown(){return this.keys.a||this.keys.ArrowLeft}get isRightKeyDown(){return this.keys.d||this.keys.ArrowRight}get isSpaceKeyDown(){return this.keys[" "]}get isEnterKeyDown(){return this.keys.Enter}get isBackspaceKeyDown(){return this.keys.Backspace}get isCtrlKeyDown(){return this.keys.Control}get isShiftKeyDown(){return this.keys.Shift}get isTabKeyDown(){return this.keys.Tab}get isEscKeyDown(){return this.keys.Escape}}class YC extends Jt{constructor(t){super(t);Y(this,"world");Y(this,"meshPhysicsObjects");const n=new hC;n.gravity.set(0,-9.82,0),this.world=n,this.meshPhysicsObjects=[]}add({mesh:t,body:n,copyPosition:i=!0,copyQuaternion:s=!0}){const r=new qC(t,n,i,s);this.base.physics.world.addBody(n),this.meshPhysicsObjects.push(r)}tick(){const t=this.world,n=this.base.clock.deltaTime;t.step(1/60,n,3)}sync(){this.meshPhysicsObjects.forEach(t=>{const{mesh:n,body:i,copyPosition:s,copyQuaternion:r}=t;s&&n.position.copy(i.position),r&&n.quaternion.copy(i.quaternion)})}update(t){this.sync(),this.tick()}}class qC{constructor(e,t,n=!0,i=!0){Y(this,"mesh");Y(this,"body");Y(this,"copyPosition");Y(this,"copyQuaternion");this.mesh=e,this.body=t,this.copyPosition=n,this.copyQuaternion=i}}class VC extends ro{constructor(t={}){const n=window.innerWidth/window.innerHeight,{frustum:i=5.7,near:s=.1,far:r=2e3,useAspect:o=!0}=t,A=o?n:1;super(A*i*-.5,A*i*.5,i*.5,i*-.5,s,r);Y(this,"frustum");Y(this,"useAspect");this.frustum=i,this.useAspect=o}}new oo;class XC extends Jt{constructor(t,n={}){super(t);Y(this,"enabled");Y(this,"autoAdaptMobile");this.enabled=!0;const{autoAdaptMobile:i=!1}=n;this.autoAdaptMobile=i,this.autoAdaptMobile&&this.resize()}get aspect(){return window.innerWidth/window.innerHeight}resizeRenderer(t){t.setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(Math.min(2,window.devicePixelRatio))}resizeComposer(t){t.setSize(window.innerWidth,window.innerHeight),t.setPixelRatio&&t.setPixelRatio(Math.min(2,window.devicePixelRatio))}resizeCamera(t){const{aspect:n}=this;if(t instanceof Fi)t.aspect=n,t.updateProjectionMatrix();else if(t instanceof VC){const{frustum:i,useAspect:s}=t;if(i){const r=s?n:1;[t.left,t.right,t.top,t.bottom]=[r*i*-.5,r*i*.5,i*.5,i*-.5],t.updateProjectionMatrix()}}}resize(){const{base:t}=this,{renderer:n,camera:i,composer:s}=t;this.resizeRenderer(n),s&&this.resizeComposer(s),this.resizeCamera(i),this.autoAdaptMobile&&this.adaptMobile(),this.emit("resize")}listenForResize(){window.addEventListener("resize",()=>{this.enabled&&this.resize()})}enable(){this.enabled=!0}disable(){this.enabled=!1}adaptMobile(){const{base:t}=this,{renderer:n,camera:i}=t,s=document.documentElement.clientWidth,r=document.documentElement.clientHeight;s>r?(n.setSize(s,r),i instanceof Fi&&(i.aspect=s/r,i.updateProjectionMatrix())):(n.setSize(r,s),i instanceof Fi&&(i.aspect=r/s,i.updateProjectionMatrix()))}}var zr={exports:{}},jC=zr.exports,Tl;function WC(){return Tl||(Tl=1,function(l,e){(function(t,n){l.exports=n()})(jC,function(){var t=function(){function n(u){return r.appendChild(u.dom),u}function i(u){for(var f=0;f<r.children.length;f++)r.children[f].style.display=f===u?"block":"none";s=u}var s=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(u){u.preventDefault(),i(++s%r.children.length)},!1);var o=(performance||Date).now(),A=o,h=0,d=n(new t.Panel("FPS","#0ff","#002")),a=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=n(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:r,addPanel:n,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){h++;var u=(performance||Date).now();if(a.update(u-o,200),u>A+1e3&&(d.update(1e3*h/(u-A),100),A=u,h=0,c)){var f=performance.memory;c.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return u},update:function(){o=this.end()},domElement:r,setMode:i}};return t.Panel=function(n,i,s){var r=1/0,o=0,A=Math.round,h=A(window.devicePixelRatio||1),d=80*h,a=48*h,c=3*h,u=2*h,f=3*h,p=15*h,m=74*h,g=30*h,B=document.createElement("canvas");B.width=d,B.height=a,B.style.cssText="width:80px;height:48px";var I=B.getContext("2d");return I.font="bold "+9*h+"px Helvetica,Arial,sans-serif",I.textBaseline="top",I.fillStyle=s,I.fillRect(0,0,d,a),I.fillStyle=i,I.fillText(n,c,u),I.fillRect(f,p,m,g),I.fillStyle=s,I.globalAlpha=.9,I.fillRect(f,p,m,g),{dom:B,update:function(_,C){r=Math.min(r,_),o=Math.max(o,_),I.fillStyle=s,I.globalAlpha=1,I.fillRect(0,0,d,p),I.fillStyle=i,I.fillText(A(_)+" "+n+" ("+A(r)+"-"+A(o)+")",c,u),I.drawImage(B,f+h,p,m-h,g,f,p,m-h,g),I.fillRect(f+m-h,p,h,g),I.fillStyle=s,I.globalAlpha=.9,I.fillRect(f+m-h,p,h,A((1-_/C)*g))}}},t})}(zr)),zr.exports}WC();class ZC{constructor(e="#sketch",t={}){Y(this,"camera");Y(this,"scene");Y(this,"renderer");Y(this,"container");Y(this,"animator");Y(this,"interactionManager");Y(this,"composer");Y(this,"clock");Y(this,"iMouse");Y(this,"physics");Y(this,"resizer");Y(this,"keyboard");const{hello:n=!0,gl:i={},autoAdaptMobile:s=!1,autoRender:r=!0}=t;n&&console.log("%c- powered by kokomi.js -","padding: 5px 10px; background: #030A8C; font-size: 11px");const o=new Fi(70,window.innerWidth/window.innerHeight,.01,100);o.position.z=1,this.camera=o;const A=new fc;this.scene=A;const h=new Od({antialias:!0,alpha:!0,...i});h.setSize(window.innerWidth,window.innerHeight),h.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.renderer=h;const d=document.querySelector(e);d==null||d.appendChild(h.domElement),this.container=d;const a=new Wd(this,{autoRender:r});this.animator=a;const c=new jd(this.renderer,this.camera,this.renderer.domElement);this.interactionManager=c,this.composer=null;const u=new SC(this);this.clock=u;const f=new RC(this);this.iMouse=f;const p=new YC(this);this.physics=p;const m=new XC(this,{autoAdaptMobile:s});this.resizer=m;const g=new KC;this.keyboard=g,this.init(),this.addEventListeners()}addEventListeners(){this.resizer.listenForResize(),this.iMouse.listenForMouse(),this.keyboard.listenForKey()}update(e){this.animator.add(e)}init(){this.update(()=>{this.interactionManager.update()}),this.animator.update()}render(){this.composer?this.composer.render():this.renderer.render(this.scene,this.camera)}async saveScreenshot(e="screenshot.png"){this.render();const t=await new Promise(n=>{this.renderer.domElement.toBlob(n,"image/png")});t&&wC(t,e)}destroy(){this.scene.traverse(e=>{var t;e instanceof _n&&((t=e.geometry)==null||t.dispose(),Object.values(e.material).forEach(n=>{n&&typeof n.dispose=="function"&&n.dispose()}))}),this.renderer.dispose()}}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const it={LEFT:1,RIGHT:2,MIDDLE:4},z=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),qi={NONE:0,IN:1,OUT:-1};function Ii(l){return l.isPerspectiveCamera}function ri(l){return l.isOrthographicCamera}const Vi=Math.PI*2,Ql=Math.PI/2,wh=1e-5,Ls=Math.PI/180;function mn(l,e,t){return Math.max(e,Math.min(t,l))}function Xe(l,e=wh){return Math.abs(l)<e}function ke(l,e,t=wh){return Xe(l-e,t)}function Dl(l,e){return Math.round(l/e)*e}function Gs(l){return isFinite(l)?l:l<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Ps(l){return Math.abs(l)<Number.MAX_VALUE?l:l*(1/0)}function Fr(l,e,t,n,i=1/0,s){n=Math.max(1e-4,n);const r=2/n,o=r*s,A=1/(1+o+.48*o*o+.235*o*o*o);let h=l-e;const d=e,a=i*n;h=mn(h,-a,a),e=l-h;const c=(t.value+r*h)*s;t.value=(t.value-r*c)*A;let u=e+(h+c)*A;return d-l>0==u>d&&(u=d,t.value=(u-d)/s),u}function bl(l,e,t,n,i=1/0,s,r){n=Math.max(1e-4,n);const o=2/n,A=o*s,h=1/(1+A+.48*A*A+.235*A*A*A);let d=e.x,a=e.y,c=e.z,u=l.x-d,f=l.y-a,p=l.z-c;const m=d,g=a,B=c,I=i*n,_=I*I,C=u*u+f*f+p*p;if(C>_){const F=Math.sqrt(C);u=u/F*I,f=f/F*I,p=p/F*I}d=l.x-u,a=l.y-f,c=l.z-p;const E=(t.x+o*u)*s,v=(t.y+o*f)*s,x=(t.z+o*p)*s;t.x=(t.x-o*E)*h,t.y=(t.y-o*v)*h,t.z=(t.z-o*x)*h,r.x=d+(u+E)*h,r.y=a+(f+v)*h,r.z=c+(p+x)*h;const w=m-l.x,D=g-l.y,G=B-l.z,O=r.x-m,T=r.y-g,b=r.z-B;return w*O+D*T+G*b>0&&(r.x=m,r.y=g,r.z=B,t.x=(r.x-m)/s,t.y=(r.y-g)/s,t.z=(r.z-B)/s),r}function Zo(l,e){e.set(0,0),l.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=l.length,e.y/=l.length}function $o(l,e){return ri(l)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class $C{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,r=i.length;s<r;s++)i[s].call(this,e)}}}var ea;const e_="2.10.1",Rr=1/8,t_=/Mac/.test((ea=globalThis==null?void 0:globalThis.navigator)===null||ea===void 0?void 0:ea.platform);let ve,Sl,Or,ta,Ot,Me,Le,Xi,ks,Mn,Tn,yi,Fl,Rl,sn,Us,ji,Ol,na,Ll,ia,sa,Lr,Gl=class Sa extends $C{static install(e){ve=e.THREE,Sl=Object.freeze(new ve.Vector3(0,0,0)),Or=Object.freeze(new ve.Vector3(0,1,0)),ta=Object.freeze(new ve.Vector3(0,0,1)),Ot=new ve.Vector2,Me=new ve.Vector3,Le=new ve.Vector3,Xi=new ve.Vector3,ks=new ve.Vector3,Mn=new ve.Vector3,Tn=new ve.Vector3,yi=new ve.Vector3,Fl=new ve.Vector3,Rl=new ve.Vector3,sn=new ve.Spherical,Us=new ve.Spherical,ji=new ve.Box3,Ol=new ve.Box3,na=new ve.Sphere,Ll=new ve.Quaternion,ia=new ve.Quaternion,sa=new ve.Matrix4,Lr=new ve.Raycaster}static get ACTION(){return z}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=z.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=qi.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new ve.Vector3,this._focalOffsetVelocity=new ve.Vector3,this._zoomVelocity={value:0},this._truckInternal=(g,B,I,_)=>{let C,E;if(Ii(this._camera)){const v=Me.copy(this._camera.position).sub(this._target),x=this._camera.getEffectiveFOV()*Ls,w=v.length()*Math.tan(x*.5);C=this.truckSpeed*g*w/this._elementRect.height,E=this.truckSpeed*B*w/this._elementRect.height}else if(ri(this._camera)){const v=this._camera;C=this.truckSpeed*g*(v.right-v.left)/v.zoom/this._elementRect.width,E=this.truckSpeed*B*(v.top-v.bottom)/v.zoom/this._elementRect.height}else return;_?(I?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(C,0,!0),this.forward(-E,!0)):I?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y+E,this._focalOffsetEnd.z,!0):this.truck(C,E,!0)},this._rotateInternal=(g,B)=>{const I=Vi*this.azimuthRotateSpeed*g/this._elementRect.height,_=Vi*this.polarRotateSpeed*B/this._elementRect.height;this.rotate(I,_,!0)},this._dollyInternal=(g,B,I)=>{const _=Math.pow(.95,-g*this.dollySpeed),C=this._sphericalEnd.radius,E=this._sphericalEnd.radius*_,v=mn(E,this.minDistance,this.maxDistance),x=v-E;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(E,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(x,!0),this._dollyToNoClamp(v,!0)):this._dollyToNoClamp(v,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?E:v)-C,this._dollyControlCoord.set(B,I)),this._lastDollyDirection=Math.sign(-g)},this._zoomInternal=(g,B,I)=>{const _=Math.pow(.95,g*this.dollySpeed),C=this._zoom,E=this._zoom*_;this.zoomTo(E,!0),this.dollyToCursor&&(this._changedZoom+=E-C,this._dollyControlCoord.set(B,I))},typeof ve>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new ve.Quaternion().setFromUnitVectors(this._camera.up,Or),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=z.NONE,this._target=new ve.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new ve.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new ve.Spherical().setFromVector3(Me.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new ve.Vector3,new ve.Vector3,new ve.Vector3,new ve.Vector3],this._updateNearPlaneCorners(),this._boundary=new ve.Box3(new ve.Vector3(-1/0,-1/0,-1/0),new ve.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new ve.Vector2,this.mouseButtons={left:z.ROTATE,middle:z.DOLLY,right:z.TRUCK,wheel:Ii(this._camera)?z.DOLLY:ri(this._camera)?z.ZOOM:z.NONE},this.touches={one:z.TOUCH_ROTATE,two:Ii(this._camera)?z.TOUCH_DOLLY_TRUCK:ri(this._camera)?z.TOUCH_ZOOM_TRUCK:z.NONE,three:z.TOUCH_TRUCK};const n=new ve.Vector2,i=new ve.Vector2,s=new ve.Vector2,r=g=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const _=this._domElement.getBoundingClientRect(),C=g.clientX/_.width,E=g.clientY/_.height;if(C<this._interactiveArea.left||C>this._interactiveArea.right||E<this._interactiveArea.top||E>this._interactiveArea.bottom)return}const B=g.pointerType!=="mouse"?null:(g.buttons&it.LEFT)===it.LEFT?it.LEFT:(g.buttons&it.MIDDLE)===it.MIDDLE?it.MIDDLE:(g.buttons&it.RIGHT)===it.RIGHT?it.RIGHT:null;if(B!==null){const _=this._findPointerByMouseButton(B);_&&this._disposePointer(_)}if((g.buttons&it.LEFT)===it.LEFT&&this._lockedPointer)return;const I={pointerId:g.pointerId,clientX:g.clientX,clientY:g.clientY,deltaX:0,deltaY:0,mouseButton:B};this._activePointers.push(I),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",A),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",A),this._isDragging=!0,c(g)},o=g=>{g.cancelable&&g.preventDefault();const B=g.pointerId,I=this._lockedPointer||this._findPointerById(B);if(I){if(I.clientX=g.clientX,I.clientY=g.clientY,I.deltaX=g.movementX,I.deltaY=g.movementY,this._state=0,g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(g.buttons&it.LEFT)===it.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(g.buttons&it.MIDDLE)===it.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(g.buttons&it.RIGHT)===it.RIGHT&&(this._state=this._state|this.mouseButtons.right);u()}},A=g=>{const B=this._findPointerById(g.pointerId);if(!(B&&B===this._lockedPointer)){if(B&&this._disposePointer(B),g.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=z.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=z.NONE;f()}};let h=-1;const d=g=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===z.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),v=g.clientX/E.width,x=g.clientY/E.height;if(v<this._interactiveArea.left||v>this._interactiveArea.right||x<this._interactiveArea.top||x>this._interactiveArea.bottom)return}if(g.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===z.ROTATE||this.mouseButtons.wheel===z.TRUCK){const E=performance.now();h-E<1e3&&this._getClientRect(this._elementRect),h=E}const B=t_?-1:-3,I=g.deltaMode===1||g.ctrlKey?g.deltaY/B:g.deltaY/(B*10),_=this.dollyToCursor?(g.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(g.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case z.ROTATE:{this._rotateInternal(g.deltaX,g.deltaY),this._isUserControllingRotate=!0;break}case z.TRUCK:{this._truckInternal(g.deltaX,g.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case z.SCREEN_PAN:{this._truckInternal(g.deltaX,g.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case z.OFFSET:{this._truckInternal(g.deltaX,g.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case z.DOLLY:{this._dollyInternal(-I,_,C),this._isUserControllingDolly=!0;break}case z.ZOOM:{this._zoomInternal(-I,_,C),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},a=g=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Sa.ACTION.NONE){const B=g instanceof PointerEvent?g.pointerId:0,I=this._findPointerById(B);I&&this._disposePointer(I),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",A);return}g.preventDefault()}},c=g=>{if(!this._enabled)return;if(Zo(this._activePointers,Ot),this._getClientRect(this._elementRect),n.copy(Ot),i.copy(Ot),this._activePointers.length>=2){const I=Ot.x-this._activePointers[1].clientX,_=Ot.y-this._activePointers[1].clientY,C=Math.sqrt(I*I+_*_);s.set(0,C);const E=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,v=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(E,v)}if(this._state=0,!g)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in g&&g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(g.buttons&it.LEFT)===it.LEFT&&(this._state=this._state|this.mouseButtons.left),(g.buttons&it.MIDDLE)===it.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(g.buttons&it.RIGHT)===it.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&z.ROTATE)===z.ROTATE||(this._state&z.TOUCH_ROTATE)===z.TOUCH_ROTATE||(this._state&z.TOUCH_DOLLY_ROTATE)===z.TOUCH_DOLLY_ROTATE||(this._state&z.TOUCH_ZOOM_ROTATE)===z.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&z.TRUCK)===z.TRUCK||(this._state&z.SCREEN_PAN)===z.SCREEN_PAN||(this._state&z.TOUCH_TRUCK)===z.TOUCH_TRUCK||(this._state&z.TOUCH_SCREEN_PAN)===z.TOUCH_SCREEN_PAN||(this._state&z.TOUCH_DOLLY_TRUCK)===z.TOUCH_DOLLY_TRUCK||(this._state&z.TOUCH_DOLLY_SCREEN_PAN)===z.TOUCH_DOLLY_SCREEN_PAN||(this._state&z.TOUCH_ZOOM_TRUCK)===z.TOUCH_ZOOM_TRUCK||(this._state&z.TOUCH_ZOOM_SCREEN_PAN)===z.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&z.DOLLY)===z.DOLLY||(this._state&z.TOUCH_DOLLY)===z.TOUCH_DOLLY||(this._state&z.TOUCH_DOLLY_TRUCK)===z.TOUCH_DOLLY_TRUCK||(this._state&z.TOUCH_DOLLY_SCREEN_PAN)===z.TOUCH_DOLLY_SCREEN_PAN||(this._state&z.TOUCH_DOLLY_OFFSET)===z.TOUCH_DOLLY_OFFSET||(this._state&z.TOUCH_DOLLY_ROTATE)===z.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&z.ZOOM)===z.ZOOM||(this._state&z.TOUCH_ZOOM)===z.TOUCH_ZOOM||(this._state&z.TOUCH_ZOOM_TRUCK)===z.TOUCH_ZOOM_TRUCK||(this._state&z.TOUCH_ZOOM_SCREEN_PAN)===z.TOUCH_ZOOM_SCREEN_PAN||(this._state&z.TOUCH_ZOOM_OFFSET)===z.TOUCH_ZOOM_OFFSET||(this._state&z.TOUCH_ZOOM_ROTATE)===z.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&z.OFFSET)===z.OFFSET||(this._state&z.TOUCH_OFFSET)===z.TOUCH_OFFSET||(this._state&z.TOUCH_DOLLY_OFFSET)===z.TOUCH_DOLLY_OFFSET||(this._state&z.TOUCH_ZOOM_OFFSET)===z.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},u=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Zo(this._activePointers,Ot);const B=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,I=B?-B.deltaX:i.x-Ot.x,_=B?-B.deltaY:i.y-Ot.y;if(i.copy(Ot),((this._state&z.ROTATE)===z.ROTATE||(this._state&z.TOUCH_ROTATE)===z.TOUCH_ROTATE||(this._state&z.TOUCH_DOLLY_ROTATE)===z.TOUCH_DOLLY_ROTATE||(this._state&z.TOUCH_ZOOM_ROTATE)===z.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(I,_),this._isUserControllingRotate=!0),(this._state&z.DOLLY)===z.DOLLY||(this._state&z.ZOOM)===z.ZOOM){const C=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,E=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,v=this.dollyDragInverted?-1:1;(this._state&z.DOLLY)===z.DOLLY?(this._dollyInternal(v*_*Rr,C,E),this._isUserControllingDolly=!0):(this._zoomInternal(v*_*Rr,C,E),this._isUserControllingZoom=!0)}if((this._state&z.TOUCH_DOLLY)===z.TOUCH_DOLLY||(this._state&z.TOUCH_ZOOM)===z.TOUCH_ZOOM||(this._state&z.TOUCH_DOLLY_TRUCK)===z.TOUCH_DOLLY_TRUCK||(this._state&z.TOUCH_ZOOM_TRUCK)===z.TOUCH_ZOOM_TRUCK||(this._state&z.TOUCH_DOLLY_SCREEN_PAN)===z.TOUCH_DOLLY_SCREEN_PAN||(this._state&z.TOUCH_ZOOM_SCREEN_PAN)===z.TOUCH_ZOOM_SCREEN_PAN||(this._state&z.TOUCH_DOLLY_OFFSET)===z.TOUCH_DOLLY_OFFSET||(this._state&z.TOUCH_ZOOM_OFFSET)===z.TOUCH_ZOOM_OFFSET||(this._state&z.TOUCH_DOLLY_ROTATE)===z.TOUCH_DOLLY_ROTATE||(this._state&z.TOUCH_ZOOM_ROTATE)===z.TOUCH_ZOOM_ROTATE){const C=Ot.x-this._activePointers[1].clientX,E=Ot.y-this._activePointers[1].clientY,v=Math.sqrt(C*C+E*E),x=s.y-v;s.set(0,v);const w=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&z.TOUCH_DOLLY)===z.TOUCH_DOLLY||(this._state&z.TOUCH_DOLLY_ROTATE)===z.TOUCH_DOLLY_ROTATE||(this._state&z.TOUCH_DOLLY_TRUCK)===z.TOUCH_DOLLY_TRUCK||(this._state&z.TOUCH_DOLLY_SCREEN_PAN)===z.TOUCH_DOLLY_SCREEN_PAN||(this._state&z.TOUCH_DOLLY_OFFSET)===z.TOUCH_DOLLY_OFFSET?(this._dollyInternal(x*Rr,w,D),this._isUserControllingDolly=!0):(this._zoomInternal(x*Rr,w,D),this._isUserControllingZoom=!0)}((this._state&z.TRUCK)===z.TRUCK||(this._state&z.TOUCH_TRUCK)===z.TOUCH_TRUCK||(this._state&z.TOUCH_DOLLY_TRUCK)===z.TOUCH_DOLLY_TRUCK||(this._state&z.TOUCH_ZOOM_TRUCK)===z.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(I,_,!1,!1),this._isUserControllingTruck=!0),((this._state&z.SCREEN_PAN)===z.SCREEN_PAN||(this._state&z.TOUCH_SCREEN_PAN)===z.TOUCH_SCREEN_PAN||(this._state&z.TOUCH_DOLLY_SCREEN_PAN)===z.TOUCH_DOLLY_SCREEN_PAN||(this._state&z.TOUCH_ZOOM_SCREEN_PAN)===z.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(I,_,!1,!0),this._isUserControllingTruck=!0),((this._state&z.OFFSET)===z.OFFSET||(this._state&z.TOUCH_OFFSET)===z.TOUCH_OFFSET||(this._state&z.TOUCH_DOLLY_OFFSET)===z.TOUCH_DOLLY_OFFSET||(this._state&z.TOUCH_ZOOM_OFFSET)===z.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(I,_,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},f=()=>{Zo(this._activePointers,Ot),i.copy(Ot),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",A),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",A),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",p),this._domElement.ownerDocument.addEventListener("pointerlockerror",m),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",A),c())},this.unlockPointer=()=>{var g,B,I;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(g=this._domElement)===null||g===void 0||g.ownerDocument.exitPointerLock(),(B=this._domElement)===null||B===void 0||B.ownerDocument.removeEventListener("pointerlockchange",p),(I=this._domElement)===null||I===void 0||I.ownerDocument.removeEventListener("pointerlockerror",m),this.cancel()};const p=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},m=()=>{this.unlockPointer()};this._addAllEventListeners=g=>{this._domElement=g,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",r),this._domElement.addEventListener("pointercancel",A),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",a)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",r),this._domElement.removeEventListener("pointercancel",A),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",a),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",A),this._domElement.ownerDocument.removeEventListener("pointerlockchange",p),this._domElement.ownerDocument.removeEventListener("pointerlockerror",m))},this.cancel=()=>{this._state!==z.NONE&&(this._state=z.NONE,this._activePointers.length=0,f())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=mn(e.width,0,1),this._interactiveArea.height=mn(e.height,0,1),this._interactiveArea.x=mn(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=mn(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const i=mn(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=mn(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const r=!n||ke(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ke(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(r)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=qi.NONE,this._changedDolly=0,this._dollyToNoClamp(mn(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const r=this._collisionTest(),o=ke(r,this._spherical.radius);if(!(n>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,r)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||ke(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(ks).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||ke(this._target.x,this._targetEnd.x,this.restThreshold)&&ke(this._target.y,this._targetEnd.y,this.restThreshold)&&ke(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=mn(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||ke(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),Mn.setFromMatrixColumn(this._camera.matrix,0),Tn.setFromMatrixColumn(this._camera.matrix,1),Mn.multiplyScalar(e),Tn.multiplyScalar(-t);const i=Me.copy(Mn).add(Tn),s=Le.copy(this._targetEnd).add(i);return this.moveTo(s.x,s.y,s.z,n)}forward(e,t=!1){Me.setFromMatrixColumn(this._camera.matrix,0),Me.crossVectors(this._camera.up,Me),Me.multiplyScalar(e);const n=Le.copy(this._targetEnd).add(Me);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return Me.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Me.x,this._targetEnd.y+Me.y,this._targetEnd.z+Me.z,t)}moveTo(e,t,n,i=!1){this._isUserControllingTruck=!1;const s=Me.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const r=!i||ke(this._target.x,this._targetEnd.x,this.restThreshold)&&ke(this._target.y,this._targetEnd.y,this.restThreshold)&&ke(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}lookInDirectionOf(e,t,n,i=!1){const o=Me.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(o.x,o.y,o.z,i)}fitToBox(e,t,{cover:n=!1,paddingLeft:i=0,paddingRight:s=0,paddingBottom:r=0,paddingTop:o=0}={}){const A=[],h=e.isBox3?ji.copy(e):ji.setFromObject(e);h.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=Dl(this._sphericalEnd.theta,Ql),a=Dl(this._sphericalEnd.phi,Ql);A.push(this.rotateTo(d,a,t));const c=Me.setFromSpherical(this._sphericalEnd).normalize(),u=Ll.setFromUnitVectors(c,ta),f=ke(Math.abs(c.y),1);f&&u.multiply(ia.setFromAxisAngle(Or,d)),u.multiply(this._yAxisUpSpaceInverse);const p=Ol.makeEmpty();Le.copy(h.min).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.min).setX(h.max.x).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.min).setY(h.max.y).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.max).setZ(h.min.z).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.min).setZ(h.max.z).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.max).setY(h.min.y).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.max).setX(h.min.x).applyQuaternion(u),p.expandByPoint(Le),Le.copy(h.max).applyQuaternion(u),p.expandByPoint(Le),p.min.x-=i,p.min.y-=r,p.max.x+=s,p.max.y+=o,u.setFromUnitVectors(ta,c),f&&u.premultiply(ia.invert()),u.premultiply(this._yAxisUpSpace);const m=p.getSize(Me),g=p.getCenter(Le).applyQuaternion(u);if(Ii(this._camera)){const B=this.getDistanceToFitBox(m.x,m.y,m.z,n);A.push(this.moveTo(g.x,g.y,g.z,t)),A.push(this.dollyTo(B,t)),A.push(this.setFocalOffset(0,0,0,t))}else if(ri(this._camera)){const B=this._camera,I=B.right-B.left,_=B.top-B.bottom,C=n?Math.max(I/m.x,_/m.y):Math.min(I/m.x,_/m.y);A.push(this.moveTo(g.x,g.y,g.z,t)),A.push(this.zoomTo(C,t)),A.push(this.setFocalOffset(0,0,0,t))}return Promise.all(A)}fitToSphere(e,t){const n=[],s="isObject3D"in e?Sa.createBoundingSphere(e,na):na.copy(e);if(n.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Ii(this._camera)){const r=this.getDistanceToFitSphere(s.radius);n.push(this.dollyTo(r,t))}else if(ri(this._camera)){const r=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,A=2*s.radius,h=Math.min(r/A,o/A);n.push(this.zoomTo(h,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,i,s,r,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=qi.NONE,this._changedDolly=0;const A=Le.set(i,s,r),h=Me.set(e,t,n);this._targetEnd.copy(A),this._sphericalEnd.setFromVector3(h.sub(A).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!o||ke(this._target.x,this._targetEnd.x,this.restThreshold)&&ke(this._target.y,this._targetEnd.y,this.restThreshold)&&ke(this._target.z,this._targetEnd.z,this.restThreshold)&&ke(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ke(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ke(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(e,t,n,i,s,r,o,A,h,d,a,c,u,f=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=qi.NONE,this._changedDolly=0;const p=Me.set(i,s,r),m=Le.set(e,t,n);sn.setFromVector3(m.sub(p).applyQuaternion(this._yAxisUpSpace));const g=Xi.set(d,a,c),B=Le.set(o,A,h);Us.setFromVector3(B.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(g,u));const I=Us.theta-sn.theta,_=Us.phi-sn.phi,C=Us.radius-sn.radius;this._sphericalEnd.set(sn.radius+C*u,sn.phi+_*u,sn.theta+I*u),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const E=!f||ke(this._target.x,this._targetEnd.x,this.restThreshold)&&ke(this._target.y,this._targetEnd.y,this.restThreshold)&&ke(this._target.z,this._targetEnd.z,this.restThreshold)&&ke(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ke(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ke(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(E)}setPosition(e,t,n,i=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(e,t,n,i=!1){const s=this.getPosition(Me),r=this.setLookAt(s.x,s.y,s.z,e,t,n,i);return this._sphericalEnd.phi=mn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),r}setFocalOffset(e,t,n,i=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);const s=!i||ke(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&ke(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&ke(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),Mn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Tn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),yi.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=Me.set(e,t,n),s=i.distanceTo(this._camera.position),r=i.sub(this._camera.position);Mn.multiplyScalar(r.x),Tn.multiplyScalar(r.y),yi.multiplyScalar(r.z),Me.copy(Mn).add(Tn).add(yi),Me.z=Me.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Me.x,Me.y,-Me.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,i){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new ve.Vector4,typeof e=="number"?this._viewport.set(e,t,n,i):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,i=!1){if($o(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,r=this._camera.getEffectiveFOV()*Ls,o=this._camera.aspect;return((i?s>o:s<o)?t:e/o)*.5/Math.tan(r*.5)+n*.5}getDistanceToFitSphere(e){if($o(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Ls,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?t:n;return e/Math.sin(i*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new ve.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new ve.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new ve.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new ve.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Vi,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Vi),this._spherical.theta+=Vi*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Vi)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!ke(this._camera.up.x,this._cameraUp0.x)||!ke(this._camera.up.y,this._cameraUp0.y)||!ke(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(Me);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Or),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Me.subVectors(this._target,this._camera.position).normalize(),t=Le.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(Me);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,s=Fl.subVectors(this._targetEnd,this._target),r=Rl.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(Xe(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const a=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Fr(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,a,1/0,e),this._needsUpdate=!0}if(Xe(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const a=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Fr(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,a,1/0,e),this._needsUpdate=!0}if(Xe(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const a=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Fr(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,a,this.maxSpeed,e),this._needsUpdate=!0}if(Xe(s.x)&&Xe(s.y)&&Xe(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const a=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;bl(this._target,this._targetEnd,this._targetVelocity,a,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Xe(r.x)&&Xe(r.y)&&Xe(r.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const a=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;bl(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,a,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Xe(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const a=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Fr(this._zoom,this._zoomEnd,this._zoomVelocity,a,1/0,e)}if(this.dollyToCursor){if(Ii(this._camera)&&this._changedDolly!==0){const a=this._spherical.radius-this._lastDistance,c=this._camera,u=this._getCameraDirection(ks),f=Me.copy(u).cross(c.up).normalize();f.lengthSq()===0&&(f.x=1);const p=Le.crossVectors(f,u),m=this._sphericalEnd.radius*Math.tan(c.getEffectiveFOV()*Ls*.5),B=(this._sphericalEnd.radius-a-this._sphericalEnd.radius)/this._sphericalEnd.radius,I=Xi.copy(this._targetEnd).add(f.multiplyScalar(this._dollyControlCoord.x*m*c.aspect)).add(p.multiplyScalar(this._dollyControlCoord.y*m)),_=Me.copy(this._targetEnd).lerp(I,B),C=this._lastDollyDirection===qi.IN&&this._spherical.radius<=this.minDistance,E=this._lastDollyDirection===qi.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(C||E)){this._sphericalEnd.radius-=a,this._spherical.radius-=a;const x=Le.copy(u).multiplyScalar(-a);_.add(x)}this._boundary.clampPoint(_,_);const v=Le.subVectors(_,this._targetEnd);this._targetEnd.copy(_),this._target.add(v),this._changedDolly-=a,Xe(this._changedDolly)&&(this._changedDolly=0)}else if(ri(this._camera)&&this._changedZoom!==0){const a=this._zoom-this._lastZoom,c=this._camera,u=Me.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(c.near+c.far)/(c.near-c.far)).unproject(c),f=Le.set(0,0,-1).applyQuaternion(c.quaternion),p=Xi.copy(u).add(f.multiplyScalar(-u.dot(c.up))),g=-(this._zoom-a-this._zoom)/this._zoom,B=this._getCameraDirection(ks),I=this._targetEnd.dot(B),_=Me.copy(this._targetEnd).lerp(p,g),C=_.dot(B),E=B.multiplyScalar(C-I);_.sub(E),this._boundary.clampPoint(_,_);const v=Le.subVectors(_,this._targetEnd);this._targetEnd.copy(_),this._target.add(v),this._changedZoom-=a,Xe(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const A=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,A),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Xe(this._focalOffset.x)||!Xe(this._focalOffset.y)||!Xe(this._focalOffset.z))&&(Mn.setFromMatrixColumn(this._camera.matrix,0),Tn.setFromMatrixColumn(this._camera.matrix,1),yi.setFromMatrixColumn(this._camera.matrix,2),Mn.multiplyScalar(this._focalOffset.x),Tn.multiplyScalar(-this._focalOffset.y),yi.multiplyScalar(this._focalOffset.z),Me.copy(Mn).add(Tn).add(yi),this._camera.position.add(Me),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Me.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),Xe(t,this.restThreshold)&&Xe(n,this.restThreshold)&&Xe(i,this.restThreshold)&&Xe(s.x,this.restThreshold)&&Xe(s.y,this.restThreshold)&&Xe(s.z,this.restThreshold)&&Xe(r.x,this.restThreshold)&&Xe(r.y,this.restThreshold)&&Xe(r.z,this.restThreshold)&&Xe(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Gs(this.maxDistance),minZoom:this.minZoom,maxZoom:Gs(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Gs(this.maxPolarAngle),minAzimuthAngle:Gs(this.minAzimuthAngle),maxAzimuthAngle:Gs(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Me.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Ps(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Ps(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Ps(n.maxPolarAngle),this.minAzimuthAngle=Ps(n.minAzimuthAngle),this.maxAzimuthAngle=Ps(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),sn.setFromVector3(Me.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(sn.theta,sn.phi,t),this.dollyTo(sn.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",e_),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const i=t.lengthSq();if(i===0)return e;const s=Le.copy(t).add(e),o=this._boundary.clampPoint(s,Xi).sub(s),A=o.lengthSq();if(A===0)return e.add(t);if(A===i)return e;if(n===0)return e.add(t).add(o);{const h=1+n*A/t.dot(o);return e.add(Le.copy(t).multiplyScalar(h)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Ii(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*Ls,i=Math.tan(n*.5)*t,s=i*e.aspect;this._nearPlaneCorners[0].set(-s,-i,0),this._nearPlaneCorners[1].set(s,-i,0),this._nearPlaneCorners[2].set(s,i,0),this._nearPlaneCorners[3].set(-s,i,0)}else if(ri(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,i=e.right*t,s=e.top*t,r=e.bottom*t;this._nearPlaneCorners[0].set(n,s,0),this._nearPlaneCorners[1].set(i,s,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(n,r,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||$o(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(ks);sa.lookAt(Sl,n,this._camera.up);for(let i=0;i<4;i++){const s=Le.copy(this._nearPlaneCorners[i]);s.applyMatrix4(sa);const r=Xi.addVectors(this._target,s);Lr.set(r,n),Lr.far=this._spherical.radius+1;const o=Lr.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new ve.Sphere){const n=t,i=n.center;ji.makeEmpty(),e.traverseVisible(r=>{r.isMesh&&ji.expandByObject(r)}),ji.getCenter(i);let s=0;return e.traverseVisible(r=>{if(!r.isMesh)return;const o=r;if(!o.geometry)return;const A=o.geometry.clone();A.applyMatrix4(o.matrixWorld);const d=A.attributes.position;for(let a=0,c=d.count;a<c;a++)Me.fromBufferAttribute(d,a),s=Math.max(s,i.distanceToSquared(Me))}),n.radius=Math.sqrt(s),n}};class n_ extends Jt{constructor(t){super(t);Y(this,"controls");Gl.install({THREE:Vr});const n=new Gl(t.camera,t.renderer.domElement);this.controls=n}update(t){this.controls.update(this.base.clock.deltaTime)}}class i_ extends Jt{constructor(t,n={}){super(t);Y(this,"fbo");Y(this,"cubeCamera");Y(this,"virtualScene");Y(this,"ignoreObjects");const{resolution:i=256,near:s=1,far:r=1e3,scene:o=null,options:A={},textureType:h=St,ignoreObjects:d=[]}=n;this.ignoreObjects=d;const a=new Ld(i,A);a.texture.type=h,this.fbo=a;const c=new Gd(s,r,a);this.cubeCamera=c;const u=o||new fc;this.virtualScene=u}update(){this.ignoreObjects.forEach(t=>{t.visible=!1}),this.cubeCamera.update(this.base.renderer,this.virtualScene),this.ignoreObjects.forEach(t=>{t.visible=!0})}add(t){this.virtualScene.add(t)}get texture(){return this.fbo.texture}}function Kn(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function xh(l,e){l.prototype=Object.create(e.prototype),l.prototype.constructor=l,l.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Vt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},hs={duration:.5,overwrite:!1,delay:0},oA,Et,tt,hn=1e8,Ye=1/hn,Fa=Math.PI*2,s_=Fa/4,r_=0,Mh=Math.sqrt,o_=Math.cos,a_=Math.sin,_t=function(e){return typeof e=="string"},ot=function(e){return typeof e=="function"},Xn=function(e){return typeof e=="number"},aA=function(e){return typeof e>"u"},On=function(e){return typeof e=="object"},Pt=function(e){return e!==!1},AA=function(){return typeof window<"u"},Gr=function(e){return ot(e)||_t(e)},Th=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},xt=Array.isArray,Ra=/(?:-?\.?\d|\.)+/gi,Qh=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ss=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ra=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Dh=/[+-]=-?[.\d]+/,bh=/[^,'"\[\]\s]+/gi,A_=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,st,Qn,Oa,lA,Xt={},Zr={},Sh,Fh=function(e){return(Zr=us(e,Xt))&&Ht},cA=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},lr=function(e,t){return!t&&console.warn(e)},Rh=function(e,t){return e&&(Xt[e]=t)&&Zr&&(Zr[e]=t)||Xt},cr=function(){return 0},l_={suppressEvents:!0,isStart:!0,kill:!1},Kr={suppressEvents:!0,kill:!1},c_={suppressEvents:!0},hA={},di=[],La={},Oh,Kt={},oa={},Pl=30,Yr=[],uA="",dA=function(e){var t=e[0],n,i;if(On(t)||ot(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=Yr.length;i--&&!Yr[i].targetTest(t););n=Yr[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new ru(e[i],n)))||e.splice(i,1);return e},Ri=function(e){return e._gsap||dA(un(e))[0]._gsap},Lh=function(e,t,n){return(n=e[t])&&ot(n)?e[t]():aA(n)&&e.getAttribute&&e.getAttribute(t)||n},kt=function(e,t){return(e=e.split(",")).forEach(t)||e},lt=function(e){return Math.round(e*1e5)/1e5||0},dt=function(e){return Math.round(e*1e7)/1e7||0},As=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},h_=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},$r=function(){var e=di.length,t=di.slice(0),n,i;for(La={},di.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},fA=function(e){return!!(e._initted||e._startAt||e.add)},Gh=function(e,t,n,i){di.length&&!Et&&$r(),e.render(t,n,!!(Et&&t<0&&fA(e))),di.length&&!Et&&$r()},Ph=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(bh).length<2?t:_t(e)?e.trim():e},kh=function(e){return e},jt=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},u_=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},us=function(e,t){for(var n in t)e[n]=t[n];return e},kl=function l(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=On(t[n])?l(e[n]||(e[n]={}),t[n]):t[n]);return e},eo=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},er=function(e){var t=e.parent||st,n=e.keyframes?u_(xt(e.keyframes)):jt;if(Pt(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},d_=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},Uh=function(e,t,n,i,s){var r=e[i],o;if(s)for(o=t[s];r&&r[s]>o;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=r,t.parent=t._dp=e,t},uo=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,r=t._next;s?s._next=r:e[n]===t&&(e[n]=r),r?r._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},gi=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Oi=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},f_=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Ga=function(e,t,n,i){return e._startAt&&(Et?e._startAt.revert(Kr):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},p_=function l(e){return!e||e._ts&&l(e.parent)},Ul=function(e){return e._repeat?ds(e._tTime,e=e.duration()+e._rDelay)*e:0},ds=function(e,t){var n=Math.floor(e=dt(e/t));return e&&n===e?n-1:n},to=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},fo=function(e){return e._end=dt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ye)||0))},po=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=dt(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),fo(e),n._dirty||Oi(n,e)),e},Nh=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=to(e.rawTime(),t),(!t._dur||_r(0,t.totalDuration(),n)-t._tTime>Ye)&&t.render(n,!0)),Oi(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Ye}},Dn=function(e,t,n,i){return t.parent&&gi(t),t._start=dt((Xn(n)?n:n||e!==st?rn(e,n,t):e._time)+t._delay),t._end=dt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Uh(e,t,"_first","_last",e._sort?"_start":0),Pa(t)||(e._recent=t),i||Nh(e,t),e._ts<0&&po(e,e._tTime),e},Hh=function(e,t){return(Xt.ScrollTrigger||cA("scrollTrigger",t))&&Xt.ScrollTrigger.create(t,e)},Jh=function(e,t,n,i,s){if(gA(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!Et&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Oh!==Yt.frame)return di.push(e),e._lazy=[s,i],1},g_=function l(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||l(t))},Pa=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},m_=function(e,t,n,i){var s=e.ratio,r=t<0||!t&&(!e._start&&g_(e)&&!(!e._initted&&Pa(e))||(e._ts<0||e._dp._ts<0)&&!Pa(e))?0:1,o=e._rDelay,A=0,h,d,a;if(o&&e._repeat&&(A=_r(0,e._tDur,t),d=ds(A,o),e._yoyo&&d&1&&(r=1-r),d!==ds(e._tTime,o)&&(s=1-r,e.vars.repeatRefresh&&e._initted&&e.invalidate())),r!==s||Et||i||e._zTime===Ye||!t&&e._zTime){if(!e._initted&&Jh(e,t,i,n,A))return;for(a=e._zTime,e._zTime=t||(n?Ye:0),n||(n=t&&!a),e.ratio=r,e._from&&(r=1-r),e._time=0,e._tTime=A,h=e._pt;h;)h.r(r,h.d),h=h._next;t<0&&Ga(e,t,n,!0),e._onUpdate&&!n&&qt(e,"onUpdate"),A&&e._repeat&&!n&&e.parent&&qt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===r&&(r&&gi(e,1),!n&&!Et&&(qt(e,r?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},B_=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},fs=function(e,t,n,i){var s=e._repeat,r=dt(t)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=r/e._dur),e._dur=r,e._tDur=s?s<0?1e10:dt(r*(s+1)+e._rDelay*s):r,o>0&&!i&&po(e,e._tTime=e._tDur*o),e.parent&&fo(e),n||Oi(e.parent,e),e},Nl=function(e){return e instanceof bt?Oi(e):fs(e,e._dur)},C_={_start:0,endTime:cr,totalDuration:cr},rn=function l(e,t,n){var i=e.labels,s=e._recent||C_,r=e.duration()>=hn?s.endTime(!1):e._dur,o,A,h;return _t(t)&&(isNaN(t)||t in i)?(A=t.charAt(0),h=t.substr(-1)==="%",o=t.indexOf("="),A==="<"||A===">"?(o>=0&&(t=t.replace(/=/,"")),(A==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(o<0?s:n).totalDuration()/100:1)):o<0?(t in i||(i[t]=r),i[t]):(A=parseFloat(t.charAt(o-1)+t.substr(o+1)),h&&n&&(A=A/100*(xt(n)?n[0]:n).totalDuration()),o>1?l(e,t.substr(0,o-1),n)+A:r+A)):t==null?r:+t},tr=function(e,t,n){var i=Xn(t[1]),s=(i?2:1)+(e<2?0:1),r=t[s],o,A;if(i&&(r.duration=t[1]),r.parent=n,e){for(o=r,A=n;A&&!("immediateRender"in o);)o=A.vars.defaults||{},A=Pt(A.vars.inherit)&&A.parent;r.immediateRender=Pt(o.immediateRender),e<2?r.runBackwards=1:r.startAt=t[s-1]}return new ut(t[0],r,t[s+1])},Bi=function(e,t){return e||e===0?t(e):t},_r=function(e,t,n){return n<e?e:n>t?t:n},wt=function(e,t){return!_t(e)||!(t=A_.exec(e))?"":t[1]},__=function(e,t,n){return Bi(n,function(i){return _r(e,t,i)})},ka=[].slice,zh=function(e,t){return e&&On(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&On(e[0]))&&!e.nodeType&&e!==Qn},E_=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return _t(i)&&!t||zh(i,1)?(s=n).push.apply(s,un(i)):n.push(i)})||n},un=function(e,t,n){return tt&&!t&&tt.selector?tt.selector(e):_t(e)&&!n&&(Oa||!ps())?ka.call((t||lA).querySelectorAll(e),0):xt(e)?E_(e,n):zh(e)?ka.call(e,0):e?[e]:[]},Ua=function(e){return e=un(e)[0]||lr("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return un(t,n.querySelectorAll?n:n===e?lr("Invalid scope")||lA.createElement("div"):e)}},Kh=function(e){return e.sort(function(){return .5-Math.random()})},Yh=function(e){if(ot(e))return e;var t=On(e)?e:{each:e},n=Li(t.ease),i=t.from||0,s=parseFloat(t.base)||0,r={},o=i>0&&i<1,A=isNaN(i)||o,h=t.axis,d=i,a=i;return _t(i)?d=a={center:.5,edges:.5,end:1}[i]||0:!o&&A&&(d=i[0],a=i[1]),function(c,u,f){var p=(f||t).length,m=r[p],g,B,I,_,C,E,v,x,w;if(!m){if(w=t.grid==="auto"?0:(t.grid||[1,hn])[1],!w){for(v=-hn;v<(v=f[w++].getBoundingClientRect().left)&&w<p;);w<p&&w--}for(m=r[p]=[],g=A?Math.min(w,p)*d-.5:i%w,B=w===hn?0:A?p*a/w-.5:i/w|0,v=0,x=hn,E=0;E<p;E++)I=E%w-g,_=B-(E/w|0),m[E]=C=h?Math.abs(h==="y"?_:I):Mh(I*I+_*_),C>v&&(v=C),C<x&&(x=C);i==="random"&&Kh(m),m.max=v-x,m.min=x,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(w>p?p-1:h?h==="y"?p/w:w:Math.max(w,p/w))||0)*(i==="edges"?-1:1),m.b=p<0?s-p:s,m.u=wt(t.amount||t.each)||0,n=n&&p<0?nu(n):n}return p=(m[c]-m.min)/m.max||0,dt(m.b+(n?n(p):p)*m.v)+m.u}},Na=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=dt(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(Xn(n)?0:wt(n))}},qh=function(e,t){var n=xt(e),i,s;return!n&&On(e)&&(i=n=e.radius||hn,e.values?(e=un(e.values),(s=!Xn(e[0]))&&(i*=i)):e=Na(e.increment)),Bi(t,n?ot(e)?function(r){return s=e(r),Math.abs(s-r)<=i?s:r}:function(r){for(var o=parseFloat(s?r.x:r),A=parseFloat(s?r.y:0),h=hn,d=0,a=e.length,c,u;a--;)s?(c=e[a].x-o,u=e[a].y-A,c=c*c+u*u):c=Math.abs(e[a]-o),c<h&&(h=c,d=a);return d=!i||h<=i?e[d]:r,s||d===r||Xn(r)?d:d+wt(r)}:Na(e))},Vh=function(e,t,n,i){return Bi(xt(e)?!t:n===!0?!!(n=0):!i,function(){return xt(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},I_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,r){return r(s)},i)}},y_=function(e,t){return function(n){return e(parseFloat(n))+(t||wt(n))}},v_=function(e,t,n){return jh(e,t,0,1,n)},Xh=function(e,t,n){return Bi(n,function(i){return e[~~t(i)]})},w_=function l(e,t,n){var i=t-e;return xt(e)?Xh(e,l(0,e.length),t):Bi(n,function(s){return(i+(s-e)%i)%i+e})},x_=function l(e,t,n){var i=t-e,s=i*2;return xt(e)?Xh(e,l(0,e.length-1),t):Bi(n,function(r){return r=(s+(r-e)%s)%s||0,e+(r>i?s-r:r)})},hr=function(e){for(var t=0,n="",i,s,r,o;~(i=e.indexOf("random(",t));)r=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,r-i-7).match(o?bh:Ra),n+=e.substr(t,i-t)+Vh(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=r+1;return n+e.substr(t,e.length-t)},jh=function(e,t,n,i,s){var r=t-e,o=i-n;return Bi(s,function(A){return n+((A-e)/r*o||0)})},M_=function l(e,t,n,i){var s=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!s){var r=_t(e),o={},A,h,d,a,c;if(n===!0&&(i=1)&&(n=null),r)e={p:e},t={p:t};else if(xt(e)&&!xt(t)){for(d=[],a=e.length,c=a-2,h=1;h<a;h++)d.push(l(e[h-1],e[h]));a--,s=function(f){f*=a;var p=Math.min(c,~~f);return d[p](f-p)},n=t}else i||(e=us(xt(e)?[]:{},e));if(!d){for(A in t)pA.call(o,e,A,"get",t[A]);s=function(f){return CA(f,o)||(r?e.p:e)}}}return Bi(n,s)},Hl=function(e,t,n){var i=e.labels,s=hn,r,o,A;for(r in i)o=i[r]-t,o<0==!!n&&o&&s>(o=Math.abs(o))&&(A=r,s=o);return A},qt=function(e,t,n){var i=e.vars,s=i[t],r=tt,o=e._ctx,A,h,d;if(s)return A=i[t+"Params"],h=i.callbackScope||e,n&&di.length&&$r(),o&&(tt=o),d=A?s.apply(h,A):s.call(h),tt=r,d},zs=function(e){return gi(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Et),e.progress()<1&&qt(e,"onInterrupt"),e},rs,Wh=[],Zh=function(e){if(e)if(e=!e.name&&e.default||e,AA()||e.headless){var t=e.name,n=ot(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:cr,render:CA,add:pA,kill:J_,modifier:H_,rawVars:0},r={targetTest:0,get:0,getSetter:BA,aliases:{},register:0};if(ps(),e!==i){if(Kt[t])return;jt(i,jt(eo(e,s),r)),us(i.prototype,us(s,eo(e,r))),Kt[i.prop=t]=i,e.targetTest&&(Yr.push(i),hA[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Rh(t,i),e.register&&e.register(Ht,i,Ut)}else Wh.push(e)},Ke=255,Ks={aqua:[0,Ke,Ke],lime:[0,Ke,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ke],navy:[0,0,128],white:[Ke,Ke,Ke],olive:[128,128,0],yellow:[Ke,Ke,0],orange:[Ke,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ke,0,0],pink:[Ke,192,203],cyan:[0,Ke,Ke],transparent:[Ke,Ke,Ke,0]},aa=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Ke+.5|0},$h=function(e,t,n){var i=e?Xn(e)?[e>>16,e>>8&Ke,e&Ke]:0:Ks.black,s,r,o,A,h,d,a,c,u,f;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ks[e])i=Ks[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),r=e.charAt(2),o=e.charAt(3),e="#"+s+s+r+r+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Ke,i&Ke,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Ke,e&Ke]}else if(e.substr(0,3)==="hsl"){if(i=f=e.match(Ra),!t)A=+i[0]%360/360,h=+i[1]/100,d=+i[2]/100,r=d<=.5?d*(h+1):d+h-d*h,s=d*2-r,i.length>3&&(i[3]*=1),i[0]=aa(A+1/3,s,r),i[1]=aa(A,s,r),i[2]=aa(A-1/3,s,r);else if(~e.indexOf("="))return i=e.match(Qh),n&&i.length<4&&(i[3]=1),i}else i=e.match(Ra)||Ks.transparent;i=i.map(Number)}return t&&!f&&(s=i[0]/Ke,r=i[1]/Ke,o=i[2]/Ke,a=Math.max(s,r,o),c=Math.min(s,r,o),d=(a+c)/2,a===c?A=h=0:(u=a-c,h=d>.5?u/(2-a-c):u/(a+c),A=a===s?(r-o)/u+(r<o?6:0):a===r?(o-s)/u+2:(s-r)/u+4,A*=60),i[0]=~~(A+.5),i[1]=~~(h*100+.5),i[2]=~~(d*100+.5)),n&&i.length<4&&(i[3]=1),i},eu=function(e){var t=[],n=[],i=-1;return e.split(fi).forEach(function(s){var r=s.match(ss)||[];t.push.apply(t,r),n.push(i+=r.length+1)}),t.c=n,t},Jl=function(e,t,n){var i="",s=(e+i).match(fi),r=t?"hsla(":"rgba(",o=0,A,h,d,a;if(!s)return e;if(s=s.map(function(c){return(c=$h(c,t,1))&&r+(t?c[0]+","+c[1]+"%,"+c[2]+"%,"+c[3]:c.join(","))+")"}),n&&(d=eu(e),A=n.c,A.join(i)!==d.c.join(i)))for(h=e.replace(fi,"1").split(ss),a=h.length-1;o<a;o++)i+=h[o]+(~A.indexOf(o)?s.shift()||r+"0,0,0,0)":(d.length?d:s.length?s:n).shift());if(!h)for(h=e.split(fi),a=h.length-1;o<a;o++)i+=h[o]+s[o];return i+h[a]},fi=function(){var l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ks)l+="|"+e+"\\b";return new RegExp(l+")","gi")}(),T_=/hsl[a]?\(/,tu=function(e){var t=e.join(" "),n;if(fi.lastIndex=0,fi.test(t))return n=T_.test(t),e[1]=Jl(e[1],n),e[0]=Jl(e[0],n,eu(e[1])),!0},ur,Yt=function(){var l=Date.now,e=500,t=33,n=l(),i=n,s=1e3/240,r=s,o=[],A,h,d,a,c,u,f=function p(m){var g=l()-i,B=m===!0,I,_,C,E;if((g>e||g<0)&&(n+=g-t),i+=g,C=i-n,I=C-r,(I>0||B)&&(E=++a.frame,c=C-a.time*1e3,a.time=C=C/1e3,r+=I+(I>=s?4:s-I),_=1),B||(A=h(p)),_)for(u=0;u<o.length;u++)o[u](C,c,E,m)};return a={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(m){return c/(1e3/(m||60))},wake:function(){Sh&&(!Oa&&AA()&&(Qn=Oa=window,lA=Qn.document||{},Xt.gsap=Ht,(Qn.gsapVersions||(Qn.gsapVersions=[])).push(Ht.version),Fh(Zr||Qn.GreenSockGlobals||!Qn.gsap&&Qn||{}),Wh.forEach(Zh)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,A&&a.sleep(),h=d||function(m){return setTimeout(m,r-a.time*1e3+1|0)},ur=1,f(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(A),ur=0,h=cr},lagSmoothing:function(m,g){e=m||1/0,t=Math.min(g||33,e)},fps:function(m){s=1e3/(m||240),r=a.time*1e3+s},add:function(m,g,B){var I=g?function(_,C,E,v){m(_,C,E,v),a.remove(I)}:m;return a.remove(m),o[B?"unshift":"push"](I),ps(),I},remove:function(m,g){~(g=o.indexOf(m))&&o.splice(g,1)&&u>=g&&u--},_listeners:o},a}(),ps=function(){return!ur&&Yt.wake()},Oe={},Q_=/^[\d.\-M][\d.\-,\s]/,D_=/["']/g,b_=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,r=n.length,o,A,h;s<r;s++)A=n[s],o=s!==r-1?A.lastIndexOf(","):A.length,h=A.substr(0,o),t[i]=isNaN(h)?h.replace(D_,"").trim():+h,i=A.substr(o+1).trim();return t},S_=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},F_=function(e){var t=(e+"").split("("),n=Oe[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[b_(t[1])]:S_(e).split(",").map(Ph)):Oe._CE&&Q_.test(e)?Oe._CE("",e):n},nu=function(e){return function(t){return 1-e(1-t)}},iu=function l(e,t){for(var n=e._first,i;n;)n instanceof bt?l(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?l(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Li=function(e,t){return e&&(ot(e)?e:Oe[e]||F_(e))||t},Ui=function(e,t,n,i){n===void 0&&(n=function(A){return 1-t(1-A)}),i===void 0&&(i=function(A){return A<.5?t(A*2)/2:1-t((1-A)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},r;return kt(e,function(o){Oe[o]=Xt[o]=s,Oe[r=o.toLowerCase()]=n;for(var A in s)Oe[r+(A==="easeIn"?".in":A==="easeOut"?".out":".inOut")]=Oe[o+"."+A]=s[A]}),s},su=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Aa=function l(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),r=s/Fa*(Math.asin(1/i)||0),o=function(d){return d===1?1:i*Math.pow(2,-10*d)*a_((d-r)*s)+1},A=e==="out"?o:e==="in"?function(h){return 1-o(1-h)}:su(o);return s=Fa/s,A.config=function(h,d){return l(e,h,d)},A},la=function l(e,t){t===void 0&&(t=1.70158);var n=function(r){return r?--r*r*((t+1)*r+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:su(n);return i.config=function(s){return l(e,s)},i};kt("Linear,Quad,Cubic,Quart,Quint,Strong",function(l,e){var t=e<5?e+1:e;Ui(l+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Oe.Linear.easeNone=Oe.none=Oe.Linear.easeIn;Ui("Elastic",Aa("in"),Aa("out"),Aa());(function(l,e){var t=1/e,n=2*t,i=2.5*t,s=function(o){return o<t?l*o*o:o<n?l*Math.pow(o-1.5/e,2)+.75:o<i?l*(o-=2.25/e)*o+.9375:l*Math.pow(o-2.625/e,2)+.984375};Ui("Bounce",function(r){return 1-s(1-r)},s)})(7.5625,2.75);Ui("Expo",function(l){return Math.pow(2,10*(l-1))*l+l*l*l*l*l*l*(1-l)});Ui("Circ",function(l){return-(Mh(1-l*l)-1)});Ui("Sine",function(l){return l===1?1:-o_(l*s_)+1});Ui("Back",la("in"),la("out"),la());Oe.SteppedEase=Oe.steps=Xt.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,r=1-Ye;return function(o){return((i*_r(0,r,o)|0)+s)*n}}};hs.ease=Oe["quad.out"];kt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(l){return uA+=l+","+l+"Params,"});var ru=function(e,t){this.id=r_++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Lh,this.set=t?t.getSetter:BA},dr=function(){function l(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,fs(this,+t.duration,1,1),this.data=t.data,tt&&(this._ctx=tt,tt.data.push(this)),ur||Yt.wake()}var e=l.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,fs(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(ps(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(po(this,n),!s._dp||s.parent||Nh(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Dn(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Ye||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Gh(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Ul(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Ul(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?ds(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-Ye?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?to(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ye?0:this._rts,this.totalTime(_r(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),fo(this),f_(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ps(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ye&&(this._tTime-=Ye)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Dn(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Pt(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?to(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=c_);var i=Et;return Et=n,fA(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Et=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Nl(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,Nl(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(rn(this,n),Pt(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Pt(i)),this._dur||(this._zTime=-Ye),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ye:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ye,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-Ye)},e.eventCallback=function(n,i,s){var r=this.vars;return arguments.length>1?(i?(r[n]=i,s&&(r[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete r[n],this):r[n]},e.then=function(n){var i=this;return new Promise(function(s){var r=ot(n)?n:kh,o=function(){var h=i.then;i.then=null,ot(r)&&(r=r(i))&&(r.then||r===i)&&(i.then=h),s(r),i.then=h};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){zs(this)},l}();jt(dr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ye,_prom:0,_ps:!1,_rts:1});var bt=function(l){xh(e,l);function e(n,i){var s;return n===void 0&&(n={}),s=l.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Pt(n.sortChildren),st&&Dn(n.parent||st,Kn(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&Hh(Kn(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,r){return tr(0,arguments,this),this},t.from=function(i,s,r){return tr(1,arguments,this),this},t.fromTo=function(i,s,r,o){return tr(2,arguments,this),this},t.set=function(i,s,r){return s.duration=0,s.parent=this,er(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new ut(i,s,rn(this,r),1),this},t.call=function(i,s,r){return Dn(this,ut.delayedCall(0,i,s),r)},t.staggerTo=function(i,s,r,o,A,h,d){return r.duration=s,r.stagger=r.stagger||o,r.onComplete=h,r.onCompleteParams=d,r.parent=this,new ut(i,r,rn(this,A)),this},t.staggerFrom=function(i,s,r,o,A,h,d){return r.runBackwards=1,er(r).immediateRender=Pt(r.immediateRender),this.staggerTo(i,s,r,o,A,h,d)},t.staggerFromTo=function(i,s,r,o,A,h,d,a){return o.startAt=r,er(o).immediateRender=Pt(o.immediateRender),this.staggerTo(i,s,o,A,h,d,a)},t.render=function(i,s,r){var o=this._time,A=this._dirty?this.totalDuration():this._tDur,h=this._dur,d=i<=0?0:dt(i),a=this._zTime<0!=i<0&&(this._initted||!h),c,u,f,p,m,g,B,I,_,C,E,v;if(this!==st&&d>A&&i>=0&&(d=A),d!==this._tTime||r||a){if(o!==this._time&&h&&(d+=this._time-o,i+=this._time-o),c=d,_=this._start,I=this._ts,g=!I,a&&(h||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(E=this._yoyo,m=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,s,r);if(c=dt(d%m),d===A?(p=this._repeat,c=h):(C=dt(d/m),p=~~C,p&&p===C&&(c=h,p--),c>h&&(c=h)),C=ds(this._tTime,m),!o&&this._tTime&&C!==p&&this._tTime-C*m-this._dur<=0&&(C=p),E&&p&1&&(c=h-c,v=1),p!==C&&!this._lock){var x=E&&C&1,w=x===(E&&p&1);if(p<C&&(x=!x),o=x?0:d%h?h:d,this._lock=1,this.render(o||(v?0:dt(p*m)),s,!h)._lock=0,this._tTime=d,!s&&this.parent&&qt(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),o&&o!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,A=this._tDur,w&&(this._lock=2,o=x?h:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;iu(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(B=B_(this,dt(o),dt(c)),B&&(d-=c-(c=B._start))),this._tTime=d,this._time=c,this._act=!I,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&d&&!s&&!C&&(qt(this,"onStart"),this._tTime!==d))return this;if(c>=o&&i>=0)for(u=this._first;u;){if(f=u._next,(u._act||c>=u._start)&&u._ts&&B!==u){if(u.parent!==this)return this.render(i,s,r);if(u.render(u._ts>0?(c-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(c-u._start)*u._ts,s,r),c!==this._time||!this._ts&&!g){B=0,f&&(d+=this._zTime=-Ye);break}}u=f}else{u=this._last;for(var D=i<0?i:c;u;){if(f=u._prev,(u._act||D<=u._end)&&u._ts&&B!==u){if(u.parent!==this)return this.render(i,s,r);if(u.render(u._ts>0?(D-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(D-u._start)*u._ts,s,r||Et&&fA(u)),c!==this._time||!this._ts&&!g){B=0,f&&(d+=this._zTime=D?-Ye:Ye);break}}u=f}}if(B&&!s&&(this.pause(),B.render(c>=o?0:-Ye)._zTime=c>=o?1:-1,this._ts))return this._start=_,fo(this),this.render(i,s,r);this._onUpdate&&!s&&qt(this,"onUpdate",!0),(d===A&&this._tTime>=this.totalDuration()||!d&&o)&&(_===this._start||Math.abs(I)!==Math.abs(this._ts))&&(this._lock||((i||!h)&&(d===A&&this._ts>0||!d&&this._ts<0)&&gi(this,1),!s&&!(i<0&&!o)&&(d||o||!A)&&(qt(this,d===A&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<A&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var r=this;if(Xn(s)||(s=rn(this,s,i)),!(i instanceof dr)){if(xt(i))return i.forEach(function(o){return r.add(o,s)}),this;if(_t(i))return this.addLabel(i,s);if(ot(i))i=ut.delayedCall(0,i);else return this}return this!==i?Dn(this,i,s):this},t.getChildren=function(i,s,r,o){i===void 0&&(i=!0),s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=-hn);for(var A=[],h=this._first;h;)h._start>=o&&(h instanceof ut?s&&A.push(h):(r&&A.push(h),i&&A.push.apply(A,h.getChildren(!0,s,r)))),h=h._next;return A},t.getById=function(i){for(var s=this.getChildren(1,1,1),r=s.length;r--;)if(s[r].vars.id===i)return s[r]},t.remove=function(i){return _t(i)?this.removeLabel(i):ot(i)?this.killTweensOf(i):(i.parent===this&&uo(this,i),i===this._recent&&(this._recent=this._last),Oi(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=dt(Yt.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),l.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=rn(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,r){var o=ut.delayedCall(0,s||cr,r);return o.data="isPause",this._hasPause=1,Dn(this,o,rn(this,i))},t.removePause=function(i){var s=this._first;for(i=rn(this,i);s;)s._start===i&&s.data==="isPause"&&gi(s),s=s._next},t.killTweensOf=function(i,s,r){for(var o=this.getTweensOf(i,r),A=o.length;A--;)li!==o[A]&&o[A].kill(i,s);return this},t.getTweensOf=function(i,s){for(var r=[],o=un(i),A=this._first,h=Xn(s),d;A;)A instanceof ut?h_(A._targets,o)&&(h?(!li||A._initted&&A._ts)&&A.globalTime(0)<=s&&A.globalTime(A.totalDuration())>s:!s||A.isActive())&&r.push(A):(d=A.getTweensOf(o,s)).length&&r.push.apply(r,d),A=A._next;return r},t.tweenTo=function(i,s){s=s||{};var r=this,o=rn(r,i),A=s,h=A.startAt,d=A.onStart,a=A.onStartParams,c=A.immediateRender,u,f=ut.to(r,jt({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(h&&"time"in h?h.time:r._time))/r.timeScale())||Ye,onStart:function(){if(r.pause(),!u){var m=s.duration||Math.abs((o-(h&&"time"in h?h.time:r._time))/r.timeScale());f._dur!==m&&fs(f,m,0,1).render(f._time,!0,!0),u=1}d&&d.apply(f,a||[])}},s));return c?f.render(0):f},t.tweenFromTo=function(i,s,r){return this.tweenTo(s,jt({startAt:{time:rn(this,i)}},r))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),Hl(this,rn(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),Hl(this,rn(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Ye)},t.shiftChildren=function(i,s,r){r===void 0&&(r=0);for(var o=this._first,A=this.labels,h;o;)o._start>=r&&(o._start+=i,o._end+=i),o=o._next;if(s)for(h in A)A[h]>=r&&(A[h]+=i);return Oi(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return l.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,r;s;)r=s._next,this.remove(s),s=r;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Oi(this)},t.totalDuration=function(i){var s=0,r=this,o=r._last,A=hn,h,d,a;if(arguments.length)return r.timeScale((r._repeat<0?r.duration():r.totalDuration())/(r.reversed()?-i:i));if(r._dirty){for(a=r.parent;o;)h=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>A&&r._sort&&o._ts&&!r._lock?(r._lock=1,Dn(r,o,d-o._delay,1)._lock=0):A=d,d<0&&o._ts&&(s-=d,(!a&&!r._dp||a&&a.smoothChildTiming)&&(r._start+=d/r._ts,r._time-=d,r._tTime-=d),r.shiftChildren(-d,!1,-1/0),A=0),o._end>s&&o._ts&&(s=o._end),o=h;fs(r,r===st&&r._time>s?r._time:s,1,1),r._dirty=0}return r._tDur},e.updateRoot=function(i){if(st._ts&&(Gh(st,to(i,st)),Oh=Yt.frame),Yt.frame>=Pl){Pl+=Vt.autoSleep||120;var s=st._first;if((!s||!s._ts)&&Vt.autoSleep&&Yt._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Yt.sleep()}}},e}(dr);jt(bt.prototype,{_lock:0,_hasPause:0,_forcing:0});var R_=function(e,t,n,i,s,r,o){var A=new Ut(this._pt,e,t,0,1,hu,null,s),h=0,d=0,a,c,u,f,p,m,g,B;for(A.b=n,A.e=i,n+="",i+="",(g=~i.indexOf("random("))&&(i=hr(i)),r&&(B=[n,i],r(B,e,t),n=B[0],i=B[1]),c=n.match(ra)||[];a=ra.exec(i);)f=a[0],p=i.substring(h,a.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),f!==c[d++]&&(m=parseFloat(c[d-1])||0,A._pt={_next:A._pt,p:p||d===1?p:",",s:m,c:f.charAt(1)==="="?As(m,f)-m:parseFloat(f)-m,m:u&&u<4?Math.round:0},h=ra.lastIndex);return A.c=h<i.length?i.substring(h,i.length):"",A.fp=o,(Dh.test(i)||g)&&(A.e=0),this._pt=A,A},pA=function(e,t,n,i,s,r,o,A,h,d){ot(i)&&(i=i(s||0,e,r));var a=e[t],c=n!=="get"?n:ot(a)?h?e[t.indexOf("set")||!ot(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():a,u=ot(a)?h?k_:lu:mA,f;if(_t(i)&&(~i.indexOf("random(")&&(i=hr(i)),i.charAt(1)==="="&&(f=As(c,i)+(wt(c)||0),(f||f===0)&&(i=f))),!d||c!==i||Ha)return!isNaN(c*i)&&i!==""?(f=new Ut(this._pt,e,t,+c||0,i-(c||0),typeof a=="boolean"?N_:cu,0,u),h&&(f.fp=h),o&&f.modifier(o,this,e),this._pt=f):(!a&&!(t in e)&&cA(t,i),R_.call(this,e,t,c,i,u,A||Vt.stringFilter,h))},O_=function(e,t,n,i,s){if(ot(e)&&(e=nr(e,s,t,n,i)),!On(e)||e.style&&e.nodeType||xt(e)||Th(e))return _t(e)?nr(e,s,t,n,i):e;var r={},o;for(o in e)r[o]=nr(e[o],s,t,n,i);return r},ou=function(e,t,n,i,s,r){var o,A,h,d;if(Kt[e]&&(o=new Kt[e]).init(s,o.rawVars?t[e]:O_(t[e],i,s,r,n),n,i,r)!==!1&&(n._pt=A=new Ut(n._pt,s,e,0,1,o.render,o,0,o.priority),n!==rs))for(h=n._ptLookup[n._targets.indexOf(s)],d=o._props.length;d--;)h[o._props[d]]=A;return o},li,Ha,gA=function l(e,t,n){var i=e.vars,s=i.ease,r=i.startAt,o=i.immediateRender,A=i.lazy,h=i.onUpdate,d=i.runBackwards,a=i.yoyoEase,c=i.keyframes,u=i.autoRevert,f=e._dur,p=e._startAt,m=e._targets,g=e.parent,B=g&&g.data==="nested"?g.vars.targets:m,I=e._overwrite==="auto"&&!oA,_=e.timeline,C,E,v,x,w,D,G,O,T,b,F,U,te;if(_&&(!c||!s)&&(s="none"),e._ease=Li(s,hs.ease),e._yEase=a?nu(Li(a===!0?s:a,hs.ease)):0,a&&e._yoyo&&!e._repeat&&(a=e._yEase,e._yEase=e._ease,e._ease=a),e._from=!_&&!!i.runBackwards,!_||c&&!i.stagger){if(O=m[0]?Ri(m[0]).harness:0,U=O&&i[O.prop],C=eo(i,hA),p&&(p._zTime<0&&p.progress(1),t<0&&d&&o&&!u?p.render(-1,!0):p.revert(d&&f?Kr:l_),p._lazy=0),r){if(gi(e._startAt=ut.set(m,jt({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!p&&Pt(A),startAt:null,delay:0,onUpdate:h&&function(){return qt(e,"onUpdate")},stagger:0},r))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Et||!o&&!u)&&e._startAt.revert(Kr),o&&f&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(d&&f&&!p){if(t&&(o=!1),v=jt({overwrite:!1,data:"isFromStart",lazy:o&&!p&&Pt(A),immediateRender:o,stagger:0,parent:g},C),U&&(v[O.prop]=U),gi(e._startAt=ut.set(m,v)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Et?e._startAt.revert(Kr):e._startAt.render(-1,!0)),e._zTime=t,!o)l(e._startAt,Ye,Ye);else if(!t)return}for(e._pt=e._ptCache=0,A=f&&Pt(A)||A&&!f,E=0;E<m.length;E++){if(w=m[E],G=w._gsap||dA(m)[E]._gsap,e._ptLookup[E]=b={},La[G.id]&&di.length&&$r(),F=B===m?E:B.indexOf(w),O&&(T=new O).init(w,U||C,e,F,B)!==!1&&(e._pt=x=new Ut(e._pt,w,T.name,0,1,T.render,T,0,T.priority),T._props.forEach(function(j){b[j]=x}),T.priority&&(D=1)),!O||U)for(v in C)Kt[v]&&(T=ou(v,C,e,F,w,B))?T.priority&&(D=1):b[v]=x=pA.call(e,w,v,"get",C[v],F,B,0,i.stringFilter);e._op&&e._op[E]&&e.kill(w,e._op[E]),I&&e._pt&&(li=e,st.killTweensOf(w,b,e.globalTime(t)),te=!e.parent,li=0),e._pt&&A&&(La[G.id]=1)}D&&uu(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!te,c&&t<=0&&_.render(hn,!0,!0)},L_=function(e,t,n,i,s,r,o,A){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,a,c,u;if(!h)for(h=e._ptCache[t]=[],c=e._ptLookup,u=e._targets.length;u--;){if(d=c[u][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return Ha=1,e.vars[t]="+=0",gA(e,o),Ha=0,A?lr(t+" not eligible for reset"):1;h.push(d)}for(u=h.length;u--;)a=h[u],d=a._pt||a,d.s=(i||i===0)&&!s?i:d.s+(i||0)+r*d.c,d.c=n-d.s,a.e&&(a.e=lt(n)+wt(a.e)),a.b&&(a.b=d.s+wt(a.b))},G_=function(e,t){var n=e[0]?Ri(e[0]).harness:0,i=n&&n.aliases,s,r,o,A;if(!i)return t;s=us({},t);for(r in i)if(r in s)for(A=i[r].split(","),o=A.length;o--;)s[A[o]]=s[r];return s},P_=function(e,t,n,i){var s=t.ease||i||"power1.inOut",r,o;if(xt(t))o=n[e]||(n[e]=[]),t.forEach(function(A,h){return o.push({t:h/(t.length-1)*100,v:A,e:s})});else for(r in t)o=n[r]||(n[r]=[]),r==="ease"||o.push({t:parseFloat(e),v:t[r],e:s})},nr=function(e,t,n,i,s){return ot(e)?e.call(t,n,i,s):_t(e)&&~e.indexOf("random(")?hr(e):e},au=uA+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Au={};kt(au+",id,stagger,delay,duration,paused,scrollTrigger",function(l){return Au[l]=1});var ut=function(l){xh(e,l);function e(n,i,s,r){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=l.call(this,r?i:er(i))||this;var A=o.vars,h=A.duration,d=A.delay,a=A.immediateRender,c=A.stagger,u=A.overwrite,f=A.keyframes,p=A.defaults,m=A.scrollTrigger,g=A.yoyoEase,B=i.parent||st,I=(xt(n)||Th(n)?Xn(n[0]):"length"in i)?[n]:un(n),_,C,E,v,x,w,D,G;if(o._targets=I.length?dA(I):lr("GSAP target "+n+" not found. https://gsap.com",!Vt.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=u,f||c||Gr(h)||Gr(d)){if(i=o.vars,_=o.timeline=new bt({data:"nested",defaults:p||{},targets:B&&B.data==="nested"?B.vars.targets:I}),_.kill(),_.parent=_._dp=Kn(o),_._start=0,c||Gr(h)||Gr(d)){if(v=I.length,D=c&&Yh(c),On(c))for(x in c)~au.indexOf(x)&&(G||(G={}),G[x]=c[x]);for(C=0;C<v;C++)E=eo(i,Au),E.stagger=0,g&&(E.yoyoEase=g),G&&us(E,G),w=I[C],E.duration=+nr(h,Kn(o),C,w,I),E.delay=(+nr(d,Kn(o),C,w,I)||0)-o._delay,!c&&v===1&&E.delay&&(o._delay=d=E.delay,o._start+=d,E.delay=0),_.to(w,E,D?D(C,w,I):0),_._ease=Oe.none;_.duration()?h=d=0:o.timeline=0}else if(f){er(jt(_.vars.defaults,{ease:"none"})),_._ease=Li(f.ease||i.ease||"none");var O=0,T,b,F;if(xt(f))f.forEach(function(U){return _.to(I,U,">")}),_.duration();else{E={};for(x in f)x==="ease"||x==="easeEach"||P_(x,f[x],E,f.easeEach);for(x in E)for(T=E[x].sort(function(U,te){return U.t-te.t}),O=0,C=0;C<T.length;C++)b=T[C],F={ease:b.e,duration:(b.t-(C?T[C-1].t:0))/100*h},F[x]=b.v,_.to(I,F,O),O+=F.duration;_.duration()<h&&_.to({},{duration:h-_.duration()})}}h||o.duration(h=_.duration())}else o.timeline=0;return u===!0&&!oA&&(li=Kn(o),st.killTweensOf(I),li=0),Dn(B,Kn(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(a||!h&&!f&&o._start===dt(B._time)&&Pt(a)&&p_(Kn(o))&&B.data!=="nested")&&(o._tTime=-Ye,o.render(Math.max(0,-d)||0)),m&&Hh(Kn(o),m),o}var t=e.prototype;return t.render=function(i,s,r){var o=this._time,A=this._tDur,h=this._dur,d=i<0,a=i>A-Ye&&!d?A:i<Ye?0:i,c,u,f,p,m,g,B,I,_;if(!h)m_(this,i,s,r);else if(a!==this._tTime||!i||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(c=a,I=this.timeline,this._repeat){if(p=h+this._rDelay,this._repeat<-1&&d)return this.totalTime(p*100+i,s,r);if(c=dt(a%p),a===A?(f=this._repeat,c=h):(m=dt(a/p),f=~~m,f&&f===m?(c=h,f--):c>h&&(c=h)),g=this._yoyo&&f&1,g&&(_=this._yEase,c=h-c),m=ds(this._tTime,p),c===o&&!r&&this._initted&&f===m)return this._tTime=a,this;f!==m&&(I&&this._yEase&&iu(I,g),this.vars.repeatRefresh&&!g&&!this._lock&&c!==p&&this._initted&&(this._lock=r=1,this.render(dt(p*f),!0).invalidate()._lock=0))}if(!this._initted){if(Jh(this,d?i:c,r,s,a))return this._tTime=0,this;if(o!==this._time&&!(r&&this.vars.repeatRefresh&&f!==m))return this;if(h!==this._dur)return this.render(i,s,r)}if(this._tTime=a,this._time=c,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=B=(_||this._ease)(c/h),this._from&&(this.ratio=B=1-B),!o&&a&&!s&&!m&&(qt(this,"onStart"),this._tTime!==a))return this;for(u=this._pt;u;)u.r(B,u.d),u=u._next;I&&I.render(i<0?i:I._dur*I._ease(c/this._dur),s,r)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(d&&Ga(this,i,s,r),qt(this,"onUpdate")),this._repeat&&f!==m&&this.vars.onRepeat&&!s&&this.parent&&qt(this,"onRepeat"),(a===this._tDur||!a)&&this._tTime===a&&(d&&!this._onUpdate&&Ga(this,i,!0,!0),(i||!h)&&(a===this._tDur&&this._ts>0||!a&&this._ts<0)&&gi(this,1),!s&&!(d&&!o)&&(a||o||g)&&(qt(this,a===A?"onComplete":"onReverseComplete",!0),this._prom&&!(a<A&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),l.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,r,o,A){ur||Yt.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||gA(this,h),d=this._ease(h/this._dur),L_(this,i,s,r,o,d,h,A)?this.resetTo(i,s,r,o,1):(po(this,0),this.parent||Uh(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?zs(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Et),this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,li&&li.vars.overwrite!==!0)._first||zs(this),this.parent&&r!==this.timeline.totalDuration()&&fs(this,this._dur*this.timeline._tDur/r,0,1),this}var o=this._targets,A=i?un(i):o,h=this._ptLookup,d=this._pt,a,c,u,f,p,m,g;if((!s||s==="all")&&d_(o,A))return s==="all"&&(this._pt=0),zs(this);for(a=this._op=this._op||[],s!=="all"&&(_t(s)&&(p={},kt(s,function(B){return p[B]=1}),s=p),s=G_(o,s)),g=o.length;g--;)if(~A.indexOf(o[g])){c=h[g],s==="all"?(a[g]=s,f=c,u={}):(u=a[g]=a[g]||{},f=s);for(p in f)m=c&&c[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&uo(this,m,"_pt"),delete c[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&d&&zs(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return tr(1,arguments)},e.delayedCall=function(i,s,r,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:o})},e.fromTo=function(i,s,r){return tr(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,r){return st.killTweensOf(i,s,r)},e}(dr);jt(ut.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});kt("staggerTo,staggerFrom,staggerFromTo",function(l){ut[l]=function(){var e=new bt,t=ka.call(arguments,0);return t.splice(l==="staggerFromTo"?5:4,0,0),e[l].apply(e,t)}});var mA=function(e,t,n){return e[t]=n},lu=function(e,t,n){return e[t](n)},k_=function(e,t,n,i){return e[t](i.fp,n)},U_=function(e,t,n){return e.setAttribute(t,n)},BA=function(e,t){return ot(e[t])?lu:aA(e[t])&&e.setAttribute?U_:mA},cu=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},N_=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},hu=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},CA=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},H_=function(e,t,n,i){for(var s=this._pt,r;s;)r=s._next,s.p===i&&s.modifier(e,t,n),s=r},J_=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?uo(this,t,"_pt"):t.dep||(n=1),t=i;return!n},z_=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},uu=function(e){for(var t=e._pt,n,i,s,r;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:r)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:r=t,t=n}e._pt=s},Ut=function(){function l(t,n,i,s,r,o,A,h,d){this.t=n,this.s=s,this.c=r,this.p=i,this.r=o||cu,this.d=A||this,this.set=h||mA,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=l.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=z_,this.m=n,this.mt=s,this.tween=i},l}();kt(uA+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(l){return hA[l]=1});Xt.TweenMax=Xt.TweenLite=ut;Xt.TimelineLite=Xt.TimelineMax=bt;st=new bt({sortChildren:!1,defaults:hs,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Vt.stringFilter=tu;var Gi=[],qr={},K_=[],zl=0,Y_=0,ca=function(e){return(qr[e]||K_).map(function(t){return t()})},Ja=function(){var e=Date.now(),t=[];e-zl>2&&(ca("matchMediaInit"),Gi.forEach(function(n){var i=n.queries,s=n.conditions,r,o,A,h;for(o in i)r=Qn.matchMedia(i[o]).matches,r&&(A=1),r!==s[o]&&(s[o]=r,h=1);h&&(n.revert(),A&&t.push(n))}),ca("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),zl=e,ca("matchMedia"))},du=function(){function l(t,n){this.selector=n&&Ua(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Y_++,t&&this.add(t)}var e=l.prototype;return e.add=function(n,i,s){ot(n)&&(s=i,i=n,n=ot);var r=this,o=function(){var h=tt,d=r.selector,a;return h&&h!==r&&h.data.push(r),s&&(r.selector=Ua(s)),tt=r,a=i.apply(r,arguments),ot(a)&&r._r.push(a),tt=h,r.selector=d,r.isReverted=!1,a};return r.last=o,n===ot?o(r,function(A){return r.add(null,A)}):n?r[n]=o:o},e.ignore=function(n){var i=tt;tt=null,n(this),tt=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof l?n.push.apply(n,i.getTweens()):i instanceof ut&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var o=s.getTweens(),A=s.data.length,h;A--;)h=s.data[A],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,a){return a.g-d.g||-1/0}).forEach(function(d){return d.t.revert(n)}),A=s.data.length;A--;)h=s.data[A],h instanceof bt?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof ut)&&h.revert&&h.revert(n);s._r.forEach(function(d){return d(n,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var r=Gi.length;r--;)Gi[r].id===this.id&&Gi.splice(r,1)},e.revert=function(n){this.kill(n||{})},l}(),q_=function(){function l(t){this.contexts=[],this.scope=t,tt&&tt.data.push(this)}var e=l.prototype;return e.add=function(n,i,s){On(n)||(n={matches:n});var r=new du(0,s||this.scope),o=r.conditions={},A,h,d;tt&&!r.selector&&(r.selector=tt.selector),this.contexts.push(r),i=r.add("onMatch",i),r.queries=n;for(h in n)h==="all"?d=1:(A=Qn.matchMedia(n[h]),A&&(Gi.indexOf(r)<0&&Gi.push(r),(o[h]=A.matches)&&(d=1),A.addListener?A.addListener(Ja):A.addEventListener("change",Ja)));return d&&i(r,function(a){return r.add(null,a)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},l}(),no={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return Zh(i)})},timeline:function(e){return new bt(e)},getTweensOf:function(e,t){return st.getTweensOf(e,t)},getProperty:function(e,t,n,i){_t(e)&&(e=un(e)[0]);var s=Ri(e||{}).get,r=n?kh:Ph;return n==="native"&&(n=""),e&&(t?r((Kt[t]&&Kt[t].get||s)(e,t,n,i)):function(o,A,h){return r((Kt[o]&&Kt[o].get||s)(e,o,A,h))})},quickSetter:function(e,t,n){if(e=un(e),e.length>1){var i=e.map(function(d){return Ht.quickSetter(d,t,n)}),s=i.length;return function(d){for(var a=s;a--;)i[a](d)}}e=e[0]||{};var r=Kt[t],o=Ri(e),A=o.harness&&(o.harness.aliases||{})[t]||t,h=r?function(d){var a=new r;rs._pt=0,a.init(e,n?d+n:d,rs,0,[e]),a.render(1,a),rs._pt&&CA(1,rs)}:o.set(e,A);return r?h:function(d){return h(e,A,n?d+n:d,o,1)}},quickTo:function(e,t,n){var i,s=Ht.to(e,jt((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),r=function(A,h,d){return s.resetTo(t,A,h,d)};return r.tween=s,r},isTweening:function(e){return st.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Li(e.ease,hs.ease)),kl(hs,e||{})},config:function(e){return kl(Vt,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,r=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!Kt[o]&&!Xt[o]&&lr(t+" effect requires "+o+" plugin.")}),oa[t]=function(o,A,h){return n(un(o),jt(A||{},s),h)},r&&(bt.prototype[t]=function(o,A,h){return this.add(oa[t](o,On(A)?A:(h=A)&&{},this),h)})},registerEase:function(e,t){Oe[e]=Li(t)},parseEase:function(e,t){return arguments.length?Li(e,t):Oe},getById:function(e){return st.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new bt(e),i,s;for(n.smoothChildTiming=Pt(e.smoothChildTiming),st.remove(n),n._dp=0,n._time=n._tTime=st._time,i=st._first;i;)s=i._next,(t||!(!i._dur&&i instanceof ut&&i.vars.onComplete===i._targets[0]))&&Dn(n,i,i._start-i._delay),i=s;return Dn(st,n,0),n},context:function(e,t){return e?new du(e,t):tt},matchMedia:function(e){return new q_(e)},matchMediaRefresh:function(){return Gi.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||Ja()},addEventListener:function(e,t){var n=qr[e]||(qr[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=qr[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:w_,wrapYoyo:x_,distribute:Yh,random:Vh,snap:qh,normalize:v_,getUnit:wt,clamp:__,splitColor:$h,toArray:un,selector:Ua,mapRange:jh,pipe:I_,unitize:y_,interpolate:M_,shuffle:Kh},install:Fh,effects:oa,ticker:Yt,updateRoot:bt.updateRoot,plugins:Kt,globalTimeline:st,core:{PropTween:Ut,globals:Rh,Tween:ut,Timeline:bt,Animation:dr,getCache:Ri,_removeLinkedListItem:uo,reverting:function(){return Et},context:function(e){return e&&tt&&(tt.data.push(e),e._ctx=tt),tt},suppressOverwrites:function(e){return oA=e}}};kt("to,from,fromTo,delayedCall,set,killTweensOf",function(l){return no[l]=ut[l]});Yt.add(bt.updateRoot);rs=no.to({},{duration:0});var V_=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},X_=function(e,t){var n=e._targets,i,s,r;for(i in t)for(s=n.length;s--;)r=e._ptLookup[s][i],r&&(r=r.d)&&(r._pt&&(r=V_(r,i)),r&&r.modifier&&r.modifier(t[i],e,n[s],i))},ha=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,r){r._onInit=function(o){var A,h;if(_t(s)&&(A={},kt(s,function(d){return A[d]=1}),s=A),t){A={};for(h in s)A[h]=t(s[h]);s=A}X_(o,s)}}}},Ht=no.registerPlugin({name:"attr",init:function(e,t,n,i,s){var r,o,A;this.tween=n;for(r in t)A=e.getAttribute(r)||"",o=this.add(e,"setAttribute",(A||0)+"",t[r],i,s,0,0,r),o.op=r,o.b=A,this._props.push(r)},render:function(e,t){for(var n=t._pt;n;)Et?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},ha("roundProps",Na),ha("modifiers"),ha("snap",qh))||no;ut.version=bt.version=Ht.version="3.13.0";Sh=1;AA()&&ps();Oe.Power0;Oe.Power1;Oe.Power2;Oe.Power3;Oe.Power4;Oe.Linear;Oe.Quad;Oe.Cubic;Oe.Quart;Oe.Quint;Oe.Strong;Oe.Elastic;Oe.Back;Oe.SteppedEase;Oe.Bounce;Oe.Sine;Oe.Expo;Oe.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Kl,ci,ls,_A,bi,Yl,EA,j_=function(){return typeof window<"u"},jn={},Mi=180/Math.PI,cs=Math.PI/180,Wi=Math.atan2,ql=1e8,IA=/([A-Z])/g,W_=/(left|right|width|margin|padding|x)/i,Z_=/[\s,\(]\S/,Sn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},za=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},$_=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},e0=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},t0=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},fu=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},pu=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},n0=function(e,t,n){return e.style[t]=n},i0=function(e,t,n){return e.style.setProperty(t,n)},s0=function(e,t,n){return e._gsap[t]=n},r0=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},o0=function(e,t,n,i,s){var r=e._gsap;r.scaleX=r.scaleY=n,r.renderTransform(s,r)},a0=function(e,t,n,i,s){var r=e._gsap;r[t]=n,r.renderTransform(s,r)},rt="transform",Nt=rt+"Origin",A0=function l(e,t){var n=this,i=this.target,s=i.style,r=i._gsap;if(e in jn&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Sn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=Yn(i,o)}):this.tfm[e]=r.x?r[e]:Yn(i,e),e===Nt&&(this.tfm.zOrigin=r.zOrigin);else return Sn.transform.split(",").forEach(function(o){return l.call(n,o,t)});if(this.props.indexOf(rt)>=0)return;r.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Nt,t,"")),e=rt}(s||t)&&this.props.push(e,t,s[e])},gu=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},l0=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,r;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(IA,"-$1").toLowerCase());if(this.tfm){for(r in this.tfm)i[r]=this.tfm[r];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=EA(),(!s||!s.isStart)&&!n[rt]&&(gu(n),i.zOrigin&&n[Nt]&&(n[Nt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},mu=function(e,t){var n={target:e,props:[],revert:l0,save:A0};return e._gsap||Ht.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},Bu,Ka=function(e,t){var n=ci.createElementNS?ci.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ci.createElement(e);return n&&n.style?n:ci.createElement(e)},dn=function l(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(IA,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&l(e,gs(t)||t,1)||""},Vl="O,Moz,ms,Ms,Webkit".split(","),gs=function(e,t,n){var i=t||bi,s=i.style,r=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(Vl[r]+e in s););return r<0?null:(r===3?"ms":r>=0?Vl[r]:"")+e},Ya=function(){j_()&&window.document&&(Kl=window,ci=Kl.document,ls=ci.documentElement,bi=Ka("div")||{style:{}},Ka("div"),rt=gs(rt),Nt=rt+"Origin",bi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Bu=!!gs("perspective"),EA=Ht.core.reverting,_A=1)},Xl=function(e){var t=e.ownerSVGElement,n=Ka("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),ls.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),ls.removeChild(n),s},jl=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Cu=function(e){var t,n;try{t=e.getBBox()}catch{t=Xl(e),n=1}return t&&(t.width||t.height)||n||(t=Xl(e)),t&&!t.width&&!t.x&&!t.y?{x:+jl(e,["x","cx","x1"])||0,y:+jl(e,["y","cy","y1"])||0,width:0,height:0}:t},_u=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Cu(e))},Pi=function(e,t){if(t){var n=e.style,i;t in jn&&t!==Nt&&(t=rt),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(IA,"-$1").toLowerCase())):n.removeAttribute(t)}},hi=function(e,t,n,i,s,r){var o=new Ut(e._pt,t,n,0,1,r?pu:fu);return e._pt=o,o.b=i,o.e=s,e._props.push(n),o},Wl={deg:1,rad:1,turn:1},c0={grid:1,flex:1},mi=function l(e,t,n,i){var s=parseFloat(n)||0,r=(n+"").trim().substr((s+"").length)||"px",o=bi.style,A=W_.test(t),h=e.tagName.toLowerCase()==="svg",d=(h?"client":"offset")+(A?"Width":"Height"),a=100,c=i==="px",u=i==="%",f,p,m,g;if(i===r||!s||Wl[i]||Wl[r])return s;if(r!=="px"&&!c&&(s=l(e,t,n,"px")),g=e.getCTM&&_u(e),(u||r==="%")&&(jn[t]||~t.indexOf("adius")))return f=g?e.getBBox()[A?"width":"height"]:e[d],lt(u?s/f*a:s/100*f);if(o[A?"width":"height"]=a+(c?r:i),p=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!h?e:e.parentNode,g&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===ci||!p.appendChild)&&(p=ci.body),m=p._gsap,m&&u&&m.width&&A&&m.time===Yt.time&&!m.uncache)return lt(s/m.width*a);if(u&&(t==="height"||t==="width")){var B=e.style[t];e.style[t]=a+i,f=e[d],B?e.style[t]=B:Pi(e,t)}else(u||r==="%")&&!c0[dn(p,"display")]&&(o.position=dn(e,"position")),p===e&&(o.position="static"),p.appendChild(bi),f=bi[d],p.removeChild(bi),o.position="absolute";return A&&u&&(m=Ri(p),m.time=Yt.time,m.width=p[d]),lt(c?f*s/a:f&&s?a/f*s:0)},Yn=function(e,t,n,i){var s;return _A||Ya(),t in Sn&&t!=="transform"&&(t=Sn[t],~t.indexOf(",")&&(t=t.split(",")[0])),jn[t]&&t!=="transform"?(s=pr(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:so(dn(e,Nt))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=io[t]&&io[t](e,t,n)||dn(e,t)||Lh(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?mi(e,t,s,n)+n:s},h0=function(e,t,n,i){if(!n||n==="none"){var s=gs(t,e,1),r=s&&dn(e,s,1);r&&r!==n?(t=s,n=r):t==="borderColor"&&(n=dn(e,"borderTopColor"))}var o=new Ut(this._pt,e.style,t,0,1,hu),A=0,h=0,d,a,c,u,f,p,m,g,B,I,_,C;if(o.b=n,o.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=dn(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(p=e.style[t],e.style[t]=i,i=dn(e,t)||i,p?e.style[t]=p:Pi(e,t)),d=[n,i],tu(d),n=d[0],i=d[1],c=n.match(ss)||[],C=i.match(ss)||[],C.length){for(;a=ss.exec(i);)m=a[0],B=i.substring(A,a.index),f?f=(f+1)%5:(B.substr(-5)==="rgba("||B.substr(-5)==="hsla(")&&(f=1),m!==(p=c[h++]||"")&&(u=parseFloat(p)||0,_=p.substr((u+"").length),m.charAt(1)==="="&&(m=As(u,m)+_),g=parseFloat(m),I=m.substr((g+"").length),A=ss.lastIndex-I.length,I||(I=I||Vt.units[t]||_,A===i.length&&(i+=I,o.e+=I)),_!==I&&(u=mi(e,t,p,I)||0),o._pt={_next:o._pt,p:B||h===1?B:",",s:u,c:g-u,m:f&&f<4||t==="zIndex"?Math.round:0});o.c=A<i.length?i.substring(A,i.length):""}else o.r=t==="display"&&i==="none"?pu:fu;return Dh.test(i)&&(o.e=0),this._pt=o,o},Zl={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},u0=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=Zl[n]||n,t[1]=Zl[i]||i,t.join(" ")},d0=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,r=n._gsap,o,A,h;if(s==="all"||s===!0)i.cssText="",A=1;else for(s=s.split(","),h=s.length;--h>-1;)o=s[h],jn[o]&&(A=1,o=o==="transformOrigin"?Nt:rt),Pi(n,o);A&&(Pi(n,rt),r&&(r.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",pr(n,1),r.uncache=1,gu(i)))}},io={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var r=e._pt=new Ut(e._pt,t,n,0,0,d0);return r.u=i,r.pr=-10,r.tween=s,e._props.push(n),1}}},fr=[1,0,0,1,0,0],Eu={},Iu=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},$l=function(e){var t=dn(e,rt);return Iu(t)?fr:t.substr(7).match(Qh).map(lt)},yA=function(e,t){var n=e._gsap||Ri(e),i=e.style,s=$l(e),r,o,A,h;return n.svg&&e.getAttribute("transform")?(A=e.transform.baseVal.consolidate().matrix,s=[A.a,A.b,A.c,A.d,A.e,A.f],s.join(",")==="1,0,0,1,0,0"?fr:s):(s===fr&&!e.offsetParent&&e!==ls&&!n.svg&&(A=i.display,i.display="block",r=e.parentNode,(!r||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,o=e.nextElementSibling,ls.appendChild(e)),s=$l(e),A?i.display=A:Pi(e,"display"),h&&(o?r.insertBefore(e,o):r?r.appendChild(e):ls.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},qa=function(e,t,n,i,s,r){var o=e._gsap,A=s||yA(e,!0),h=o.xOrigin||0,d=o.yOrigin||0,a=o.xOffset||0,c=o.yOffset||0,u=A[0],f=A[1],p=A[2],m=A[3],g=A[4],B=A[5],I=t.split(" "),_=parseFloat(I[0])||0,C=parseFloat(I[1])||0,E,v,x,w;n?A!==fr&&(v=u*m-f*p)&&(x=_*(m/v)+C*(-p/v)+(p*B-m*g)/v,w=_*(-f/v)+C*(u/v)-(u*B-f*g)/v,_=x,C=w):(E=Cu(e),_=E.x+(~I[0].indexOf("%")?_/100*E.width:_),C=E.y+(~(I[1]||I[0]).indexOf("%")?C/100*E.height:C)),i||i!==!1&&o.smooth?(g=_-h,B=C-d,o.xOffset=a+(g*u+B*p)-g,o.yOffset=c+(g*f+B*m)-B):o.xOffset=o.yOffset=0,o.xOrigin=_,o.yOrigin=C,o.smooth=!!i,o.origin=t,o.originIsAbsolute=!!n,e.style[Nt]="0px 0px",r&&(hi(r,o,"xOrigin",h,_),hi(r,o,"yOrigin",d,C),hi(r,o,"xOffset",a,o.xOffset),hi(r,o,"yOffset",c,o.yOffset)),e.setAttribute("data-svg-origin",_+" "+C)},pr=function(e,t){var n=e._gsap||new ru(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,r="px",o="deg",A=getComputedStyle(e),h=dn(e,Nt)||"0",d,a,c,u,f,p,m,g,B,I,_,C,E,v,x,w,D,G,O,T,b,F,U,te,j,J,ee,ae,W,_e,Ee,N;return d=a=c=p=m=g=B=I=_=0,u=f=1,n.svg=!!(e.getCTM&&_u(e)),A.translate&&((A.translate!=="none"||A.scale!=="none"||A.rotate!=="none")&&(i[rt]=(A.translate!=="none"?"translate3d("+(A.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(A.rotate!=="none"?"rotate("+A.rotate+") ":"")+(A.scale!=="none"?"scale("+A.scale.split(" ").join(",")+") ":"")+(A[rt]!=="none"?A[rt]:"")),i.scale=i.rotate=i.translate="none"),v=yA(e,n.svg),n.svg&&(n.uncache?(j=e.getBBox(),h=n.xOrigin-j.x+"px "+(n.yOrigin-j.y)+"px",te=""):te=!t&&e.getAttribute("data-svg-origin"),qa(e,te||h,!!te||n.originIsAbsolute,n.smooth!==!1,v)),C=n.xOrigin||0,E=n.yOrigin||0,v!==fr&&(G=v[0],O=v[1],T=v[2],b=v[3],d=F=v[4],a=U=v[5],v.length===6?(u=Math.sqrt(G*G+O*O),f=Math.sqrt(b*b+T*T),p=G||O?Wi(O,G)*Mi:0,B=T||b?Wi(T,b)*Mi+p:0,B&&(f*=Math.abs(Math.cos(B*cs))),n.svg&&(d-=C-(C*G+E*T),a-=E-(C*O+E*b))):(N=v[6],_e=v[7],ee=v[8],ae=v[9],W=v[10],Ee=v[11],d=v[12],a=v[13],c=v[14],x=Wi(N,W),m=x*Mi,x&&(w=Math.cos(-x),D=Math.sin(-x),te=F*w+ee*D,j=U*w+ae*D,J=N*w+W*D,ee=F*-D+ee*w,ae=U*-D+ae*w,W=N*-D+W*w,Ee=_e*-D+Ee*w,F=te,U=j,N=J),x=Wi(-T,W),g=x*Mi,x&&(w=Math.cos(-x),D=Math.sin(-x),te=G*w-ee*D,j=O*w-ae*D,J=T*w-W*D,Ee=b*D+Ee*w,G=te,O=j,T=J),x=Wi(O,G),p=x*Mi,x&&(w=Math.cos(x),D=Math.sin(x),te=G*w+O*D,j=F*w+U*D,O=O*w-G*D,U=U*w-F*D,G=te,F=j),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,g=180-g),u=lt(Math.sqrt(G*G+O*O+T*T)),f=lt(Math.sqrt(U*U+N*N)),x=Wi(F,U),B=Math.abs(x)>2e-4?x*Mi:0,_=Ee?1/(Ee<0?-Ee:Ee):0),n.svg&&(te=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Iu(dn(e,rt)),te&&e.setAttribute("transform",te))),Math.abs(B)>90&&Math.abs(B)<270&&(s?(u*=-1,B+=p<=0?180:-180,p+=p<=0?180:-180):(f*=-1,B+=B<=0?180:-180)),t=t||n.uncache,n.x=d-((n.xPercent=d&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+r,n.y=a-((n.yPercent=a&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-a)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+r,n.z=c+r,n.scaleX=lt(u),n.scaleY=lt(f),n.rotation=lt(p)+o,n.rotationX=lt(m)+o,n.rotationY=lt(g)+o,n.skewX=B+o,n.skewY=I+o,n.transformPerspective=_+r,(n.zOrigin=parseFloat(h.split(" ")[2])||!t&&n.zOrigin||0)&&(i[Nt]=so(h)),n.xOffset=n.yOffset=0,n.force3D=Vt.force3D,n.renderTransform=n.svg?p0:Bu?yu:f0,n.uncache=0,n},so=function(e){return(e=e.split(" "))[0]+" "+e[1]},ua=function(e,t,n){var i=wt(t);return lt(parseFloat(t)+parseFloat(mi(e,"x",n+"px",i)))+i},f0=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,yu(e,t)},vi="0deg",Ns="0px",wi=") ",yu=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,r=n.x,o=n.y,A=n.z,h=n.rotation,d=n.rotationY,a=n.rotationX,c=n.skewX,u=n.skewY,f=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,B=n.target,I=n.zOrigin,_="",C=g==="auto"&&e&&e!==1||g===!0;if(I&&(a!==vi||d!==vi)){var E=parseFloat(d)*cs,v=Math.sin(E),x=Math.cos(E),w;E=parseFloat(a)*cs,w=Math.cos(E),r=ua(B,r,v*w*-I),o=ua(B,o,-Math.sin(E)*-I),A=ua(B,A,x*w*-I+I)}m!==Ns&&(_+="perspective("+m+wi),(i||s)&&(_+="translate("+i+"%, "+s+"%) "),(C||r!==Ns||o!==Ns||A!==Ns)&&(_+=A!==Ns||C?"translate3d("+r+", "+o+", "+A+") ":"translate("+r+", "+o+wi),h!==vi&&(_+="rotate("+h+wi),d!==vi&&(_+="rotateY("+d+wi),a!==vi&&(_+="rotateX("+a+wi),(c!==vi||u!==vi)&&(_+="skew("+c+", "+u+wi),(f!==1||p!==1)&&(_+="scale("+f+", "+p+wi),B.style[rt]=_||"translate(0, 0)"},p0=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,r=n.x,o=n.y,A=n.rotation,h=n.skewX,d=n.skewY,a=n.scaleX,c=n.scaleY,u=n.target,f=n.xOrigin,p=n.yOrigin,m=n.xOffset,g=n.yOffset,B=n.forceCSS,I=parseFloat(r),_=parseFloat(o),C,E,v,x,w;A=parseFloat(A),h=parseFloat(h),d=parseFloat(d),d&&(d=parseFloat(d),h+=d,A+=d),A||h?(A*=cs,h*=cs,C=Math.cos(A)*a,E=Math.sin(A)*a,v=Math.sin(A-h)*-c,x=Math.cos(A-h)*c,h&&(d*=cs,w=Math.tan(h-d),w=Math.sqrt(1+w*w),v*=w,x*=w,d&&(w=Math.tan(d),w=Math.sqrt(1+w*w),C*=w,E*=w)),C=lt(C),E=lt(E),v=lt(v),x=lt(x)):(C=a,x=c,E=v=0),(I&&!~(r+"").indexOf("px")||_&&!~(o+"").indexOf("px"))&&(I=mi(u,"x",r,"px"),_=mi(u,"y",o,"px")),(f||p||m||g)&&(I=lt(I+f-(f*C+p*v)+m),_=lt(_+p-(f*E+p*x)+g)),(i||s)&&(w=u.getBBox(),I=lt(I+i/100*w.width),_=lt(_+s/100*w.height)),w="matrix("+C+","+E+","+v+","+x+","+I+","+_+")",u.setAttribute("transform",w),B&&(u.style[rt]=w)},g0=function(e,t,n,i,s){var r=360,o=_t(s),A=parseFloat(s)*(o&&~s.indexOf("rad")?Mi:1),h=A-i,d=i+h+"deg",a,c;return o&&(a=s.split("_")[1],a==="short"&&(h%=r,h!==h%(r/2)&&(h+=h<0?r:-r)),a==="cw"&&h<0?h=(h+r*ql)%r-~~(h/r)*r:a==="ccw"&&h>0&&(h=(h-r*ql)%r-~~(h/r)*r)),e._pt=c=new Ut(e._pt,t,n,i,h,$_),c.e=d,c.u="deg",e._props.push(n),c},ec=function(e,t){for(var n in t)e[n]=t[n];return e},m0=function(e,t,n){var i=ec({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",r=n.style,o,A,h,d,a,c,u,f;i.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),r[rt]=t,o=pr(n,1),Pi(n,rt),n.setAttribute("transform",h)):(h=getComputedStyle(n)[rt],r[rt]=t,o=pr(n,1),r[rt]=h);for(A in jn)h=i[A],d=o[A],h!==d&&s.indexOf(A)<0&&(u=wt(h),f=wt(d),a=u!==f?mi(n,A,h,f):parseFloat(h),c=parseFloat(d),e._pt=new Ut(e._pt,o,A,a,c-a,za),e._pt.u=f||0,e._props.push(A));ec(o,i)};kt("padding,margin,Width,Radius",function(l,e){var t="Top",n="Right",i="Bottom",s="Left",r=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(o){return e<2?l+o:"border"+o+l});io[e>1?"border"+l:l]=function(o,A,h,d,a){var c,u;if(arguments.length<4)return c=r.map(function(f){return Yn(o,f,h)}),u=c.join(" "),u.split(c[0]).length===5?c[0]:u;c=(d+"").split(" "),u={},r.forEach(function(f,p){return u[f]=c[p]=c[p]||c[(p-1)/2|0]}),o.init(A,u,a)}});var vu={name:"css",register:Ya,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var r=this._props,o=e.style,A=n.vars.startAt,h,d,a,c,u,f,p,m,g,B,I,_,C,E,v,x;_A||Ya(),this.styles=this.styles||mu(e),x=this.styles.props,this.tween=n;for(p in t)if(p!=="autoRound"&&(d=t[p],!(Kt[p]&&ou(p,t,n,i,e,s)))){if(u=typeof d,f=io[p],u==="function"&&(d=d.call(n,i,e,s),u=typeof d),u==="string"&&~d.indexOf("random(")&&(d=hr(d)),f)f(this,e,p,d,n)&&(v=1);else if(p.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(p)+"").trim(),d+="",fi.lastIndex=0,fi.test(h)||(m=wt(h),g=wt(d)),g?m!==g&&(h=mi(e,p,h,g)+g):m&&(d+=m),this.add(o,"setProperty",h,d,i,s,0,0,p),r.push(p),x.push(p,0,o[p]);else if(u!=="undefined"){if(A&&p in A?(h=typeof A[p]=="function"?A[p].call(n,i,e,s):A[p],_t(h)&&~h.indexOf("random(")&&(h=hr(h)),wt(h+"")||h==="auto"||(h+=Vt.units[p]||wt(Yn(e,p))||""),(h+"").charAt(1)==="="&&(h=Yn(e,p))):h=Yn(e,p),c=parseFloat(h),B=u==="string"&&d.charAt(1)==="="&&d.substr(0,2),B&&(d=d.substr(2)),a=parseFloat(d),p in Sn&&(p==="autoAlpha"&&(c===1&&Yn(e,"visibility")==="hidden"&&a&&(c=0),x.push("visibility",0,o.visibility),hi(this,o,"visibility",c?"inherit":"hidden",a?"inherit":"hidden",!a)),p!=="scale"&&p!=="transform"&&(p=Sn[p],~p.indexOf(",")&&(p=p.split(",")[0]))),I=p in jn,I){if(this.styles.save(p),u==="string"&&d.substring(0,6)==="var(--"&&(d=dn(e,d.substring(4,d.indexOf(")"))),a=parseFloat(d)),_||(C=e._gsap,C.renderTransform&&!t.parseTransform||pr(e,t.parseTransform),E=t.smoothOrigin!==!1&&C.smooth,_=this._pt=new Ut(this._pt,o,rt,0,1,C.renderTransform,C,0,-1),_.dep=1),p==="scale")this._pt=new Ut(this._pt,C,"scaleY",C.scaleY,(B?As(C.scaleY,B+a):a)-C.scaleY||0,za),this._pt.u=0,r.push("scaleY",p),p+="X";else if(p==="transformOrigin"){x.push(Nt,0,o[Nt]),d=u0(d),C.svg?qa(e,d,0,E,0,this):(g=parseFloat(d.split(" ")[2])||0,g!==C.zOrigin&&hi(this,C,"zOrigin",C.zOrigin,g),hi(this,o,p,so(h),so(d)));continue}else if(p==="svgOrigin"){qa(e,d,1,E,0,this);continue}else if(p in Eu){g0(this,C,p,c,B?As(c,B+d):d);continue}else if(p==="smoothOrigin"){hi(this,C,"smooth",C.smooth,d);continue}else if(p==="force3D"){C[p]=d;continue}else if(p==="transform"){m0(this,d,e);continue}}else p in o||(p=gs(p)||p);if(I||(a||a===0)&&(c||c===0)&&!Z_.test(d)&&p in o)m=(h+"").substr((c+"").length),a||(a=0),g=wt(d)||(p in Vt.units?Vt.units[p]:m),m!==g&&(c=mi(e,p,h,g)),this._pt=new Ut(this._pt,I?C:o,p,c,(B?As(c,B+a):a)-c,!I&&(g==="px"||p==="zIndex")&&t.autoRound!==!1?t0:za),this._pt.u=g||0,m!==g&&g!=="%"&&(this._pt.b=h,this._pt.r=e0);else if(p in o)h0.call(this,e,p,h,B?B+d:d);else if(p in e)this.add(e,p,h||e[p],B?B+d:d,i,s);else if(p!=="parseTransform"){cA(p,d);continue}I||(p in o?x.push(p,0,o[p]):typeof e[p]=="function"?x.push(p,2,e[p]()):x.push(p,1,h||e[p])),r.push(p)}}v&&uu(this)},render:function(e,t){if(t.tween._time||!EA())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Yn,aliases:Sn,getSetter:function(e,t,n){var i=Sn[t];return i&&i.indexOf(",")<0&&(t=i),t in jn&&t!==Nt&&(e._gsap.x||Yn(e,"x"))?n&&Yl===n?t==="scale"?r0:s0:(Yl=n||{})&&(t==="scale"?o0:a0):e.style&&!aA(e.style[t])?n0:~t.indexOf("-")?i0:BA(e,t)},core:{_removeProperty:Pi,_getMatrix:yA}};Ht.utils.checkPrefix=gs;Ht.core.getStyleSaver=mu;(function(l,e,t,n){var i=kt(l+","+e+","+t,function(s){jn[s]=1});kt(e,function(s){Vt.units[s]="deg",Eu[s]=1}),Sn[i[13]]=l+","+e,kt(n,function(s){var r=s.split(":");Sn[r[1]]=i[r[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");kt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(l){Vt.units[l]="px"});Ht.registerPlugin(vu);var an=Ht.registerPlugin(vu)||Ht;an.core.Tween;var da={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var tc;function B0(){return tc||(tc=1,function(l){(function(){var e=function(){this.init()};e.prototype={init:function(){var a=this||t;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var c=this||t;if(a=parseFloat(a),c.ctx||d(),typeof a<"u"&&a>=0&&a<=1){if(c._volume=a,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a,t.ctx.currentTime);for(var u=0;u<c._howls.length;u++)if(!c._howls[u]._webAudio)for(var f=c._howls[u]._getSoundIds(),p=0;p<f.length;p++){var m=c._howls[u]._soundById(f[p]);m&&m._node&&(m._node.volume=m._volume*a)}return c}return c._volume},mute:function(a){var c=this||t;c.ctx||d(),c._muted=a,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a?0:c._volume,t.ctx.currentTime);for(var u=0;u<c._howls.length;u++)if(!c._howls[u]._webAudio)for(var f=c._howls[u]._getSoundIds(),p=0;p<f.length;p++){var m=c._howls[u]._soundById(f[p]);m&&m._node&&(m._node.muted=a?!0:m._muted)}return c},stop:function(){for(var a=this||t,c=0;c<a._howls.length;c++)a._howls[c].stop();return a},unload:function(){for(var a=this||t,c=a._howls.length-1;c>=0;c--)a._howls[c].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,d()),a},codecs:function(a){return(this||t)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||t;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var c=new Audio;c.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||t,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return a}if(!c||typeof c.canPlayType!="function")return a;var u=c.canPlayType("audio/mpeg;").replace(/^no$/,""),f=a._navigator?a._navigator.userAgent:"",p=f.match(/OPR\/(\d+)/g),m=p&&parseInt(p[0].split("/")[1],10)<33,g=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,B=f.match(/Version\/(.*?) /),I=g&&B&&parseInt(B[1],10)<15;return a._codecs={mp3:!!(!m&&(u||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!I&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!I&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||t;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var c=function(u){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,a._releaseHtml5Audio(f)}catch{a.noAudio=!0;break}for(var p=0;p<a._howls.length;p++)if(!a._howls[p]._webAudio)for(var m=a._howls[p]._getSoundIds(),g=0;g<m.length;g++){var B=a._howls[p]._soundById(m[g]);B&&B._node&&!B._node._unlocked&&(B._node._unlocked=!0,B._node.load())}a._autoResume();var I=a.ctx.createBufferSource();I.buffer=a._scratchBuffer,I.connect(a.ctx.destination),typeof I.start>"u"?I.noteOn(0):I.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),I.onended=function(){I.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var _=0;_<a._howls.length;_++)a._howls[_]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),a}},_obtainHtml5Audio:function(){var a=this||t;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var c=this||t;return a._unlocked&&c._html5AudioPool.push(a),c},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!t.usingWebAudio)){for(var c=0;c<a._howls.length;c++)if(a._howls[c]._webAudio){for(var u=0;u<a._howls[c]._sounds.length;u++)if(!a._howls[c]._sounds[u]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var f=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(f,f)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!t.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var c=0;c<a._howls.length;c++)a._howls[c]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var t=new e,n=function(a){var c=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(a)};n.prototype={init:function(a){var c=this;return t.ctx||d(),c._autoplay=a.autoplay||!1,c._format=typeof a.format!="string"?a.format:[a.format],c._html5=a.html5||!1,c._muted=a.mute||!1,c._loop=a.loop||!1,c._pool=a.pool||5,c._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,c._rate=a.rate||1,c._sprite=a.sprite||{},c._src=typeof a.src!="string"?a.src:[a.src],c._volume=a.volume!==void 0?a.volume:1,c._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=a.onend?[{fn:a.onend}]:[],c._onfade=a.onfade?[{fn:a.onfade}]:[],c._onload=a.onload?[{fn:a.onload}]:[],c._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],c._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],c._onpause=a.onpause?[{fn:a.onpause}]:[],c._onplay=a.onplay?[{fn:a.onplay}]:[],c._onstop=a.onstop?[{fn:a.onstop}]:[],c._onmute=a.onmute?[{fn:a.onmute}]:[],c._onvolume=a.onvolume?[{fn:a.onvolume}]:[],c._onrate=a.onrate?[{fn:a.onrate}]:[],c._onseek=a.onseek?[{fn:a.onseek}]:[],c._onunlock=a.onunlock?[{fn:a.onunlock}]:[],c._onresume=[],c._webAudio=t.usingWebAudio&&!c._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var a=this,c=null;if(t.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var u=0;u<a._src.length;u++){var f,p;if(a._format&&a._format[u])f=a._format[u];else{if(p=a._src[u],typeof p!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(p),f||(f=/\.([^.]+)$/.exec(p.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&t.codecs(f)){c=a._src[u];break}}if(!c){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=c,a._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new i(a),a._webAudio&&r(a),a},play:function(a,c){var u=this,f=null;if(typeof a=="number")f=a,a=null;else{if(typeof a=="string"&&u._state==="loaded"&&!u._sprite[a])return null;if(typeof a>"u"&&(a="__default",!u._playLock)){for(var p=0,m=0;m<u._sounds.length;m++)u._sounds[m]._paused&&!u._sounds[m]._ended&&(p++,f=u._sounds[m]._id);p===1?a=null:f=null}}var g=f?u._soundById(f):u._inactiveSound();if(!g)return null;if(f&&!a&&(a=g._sprite||"__default"),u._state!=="loaded"){g._sprite=a,g._ended=!1;var B=g._id;return u._queue.push({event:"play",action:function(){u.play(B)}}),B}if(f&&!g._paused)return c||u._loadQueue("play"),g._id;u._webAudio&&t._autoResume();var I=Math.max(0,g._seek>0?g._seek:u._sprite[a][0]/1e3),_=Math.max(0,(u._sprite[a][0]+u._sprite[a][1])/1e3-I),C=_*1e3/Math.abs(g._rate),E=u._sprite[a][0]/1e3,v=(u._sprite[a][0]+u._sprite[a][1])/1e3;g._sprite=a,g._ended=!1;var x=function(){g._paused=!1,g._seek=I,g._start=E,g._stop=v,g._loop=!!(g._loop||u._sprite[a][2])};if(I>=v){u._ended(g);return}var w=g._node;if(u._webAudio){var D=function(){u._playLock=!1,x(),u._refreshBuffer(g);var b=g._muted||u._muted?0:g._volume;w.gain.setValueAtTime(b,t.ctx.currentTime),g._playStart=t.ctx.currentTime,typeof w.bufferSource.start>"u"?g._loop?w.bufferSource.noteGrainOn(0,I,86400):w.bufferSource.noteGrainOn(0,I,_):g._loop?w.bufferSource.start(0,I,86400):w.bufferSource.start(0,I,_),C!==1/0&&(u._endTimers[g._id]=setTimeout(u._ended.bind(u,g),C)),c||setTimeout(function(){u._emit("play",g._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?D():(u._playLock=!0,u.once("resume",D),u._clearTimer(g._id))}else{var G=function(){w.currentTime=I,w.muted=g._muted||u._muted||t._muted||w.muted,w.volume=g._volume*t.volume(),w.playbackRate=g._rate;try{var b=w.play();if(b&&typeof Promise<"u"&&(b instanceof Promise||typeof b.then=="function")?(u._playLock=!0,x(),b.then(function(){u._playLock=!1,w._unlocked=!0,c?u._loadQueue():u._emit("play",g._id)}).catch(function(){u._playLock=!1,u._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):c||(u._playLock=!1,x(),u._emit("play",g._id)),w.playbackRate=g._rate,w.paused){u._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||g._loop?u._endTimers[g._id]=setTimeout(u._ended.bind(u,g),C):(u._endTimers[g._id]=function(){u._ended(g),w.removeEventListener("ended",u._endTimers[g._id],!1)},w.addEventListener("ended",u._endTimers[g._id],!1))}catch(F){u._emit("playerror",g._id,F)}};w.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(w.src=u._src,w.load());var O=window&&window.ejecta||!w.readyState&&t._navigator.isCocoonJS;if(w.readyState>=3||O)G();else{u._playLock=!0,u._state="loading";var T=function(){u._state="loaded",G(),w.removeEventListener(t._canPlayEvent,T,!1)};w.addEventListener(t._canPlayEvent,T,!1),u._clearTimer(g._id)}}return g._id},pause:function(a){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(a)}}),c;for(var u=c._getSoundIds(a),f=0;f<u.length;f++){c._clearTimer(u[f]);var p=c._soundById(u[f]);if(p&&!p._paused&&(p._seek=c.seek(u[f]),p._rateSeek=0,p._paused=!0,c._stopFade(u[f]),p._node))if(c._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),c._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||c._emit("pause",p?p._id:null)}return c},stop:function(a,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(a)}}),u;for(var f=u._getSoundIds(a),p=0;p<f.length;p++){u._clearTimer(f[p]);var m=u._soundById(f[p]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,u._stopFade(f[p]),m._node&&(u._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),u._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&u._clearSound(m._node))),c||u._emit("stop",m._id))}return u},mute:function(a,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(a,c)}}),u;if(typeof c>"u")if(typeof a=="boolean")u._muted=a;else return u._muted;for(var f=u._getSoundIds(c),p=0;p<f.length;p++){var m=u._soundById(f[p]);m&&(m._muted=a,m._interval&&u._stopFade(m._id),u._webAudio&&m._node?m._node.gain.setValueAtTime(a?0:m._volume,t.ctx.currentTime):m._node&&(m._node.muted=t._muted?!0:a),u._emit("mute",m._id))}return u},volume:function(){var a=this,c=arguments,u,f;if(c.length===0)return a._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var p=a._getSoundIds(),m=p.indexOf(c[0]);m>=0?f=parseInt(c[0],10):u=parseFloat(c[0])}else c.length>=2&&(u=parseFloat(c[0]),f=parseInt(c[1],10));var g;if(typeof u<"u"&&u>=0&&u<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,c)}}),a;typeof f>"u"&&(a._volume=u),f=a._getSoundIds(f);for(var B=0;B<f.length;B++)g=a._soundById(f[B]),g&&(g._volume=u,c[2]||a._stopFade(f[B]),a._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(u,t.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=u*t.volume()),a._emit("volume",g._id))}else return g=f?a._soundById(f):a._sounds[0],g?g._volume:0;return a},fade:function(a,c,u,f){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(a,c,u,f)}}),p;a=Math.min(Math.max(0,parseFloat(a)),1),c=Math.min(Math.max(0,parseFloat(c)),1),u=parseFloat(u),p.volume(a,f);for(var m=p._getSoundIds(f),g=0;g<m.length;g++){var B=p._soundById(m[g]);if(B){if(f||p._stopFade(m[g]),p._webAudio&&!B._muted){var I=t.ctx.currentTime,_=I+u/1e3;B._volume=a,B._node.gain.setValueAtTime(a,I),B._node.gain.linearRampToValueAtTime(c,_)}p._startFadeInterval(B,a,c,u,m[g],typeof f>"u")}}return p},_startFadeInterval:function(a,c,u,f,p,m){var g=this,B=c,I=u-c,_=Math.abs(I/.01),C=Math.max(4,_>0?f/_:f),E=Date.now();a._fadeTo=u,a._interval=setInterval(function(){var v=(Date.now()-E)/f;E=Date.now(),B+=I*v,B=Math.round(B*100)/100,I<0?B=Math.max(u,B):B=Math.min(u,B),g._webAudio?a._volume=B:g.volume(B,a._id,!0),m&&(g._volume=B),(u<c&&B<=u||u>c&&B>=u)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,g.volume(u,a._id),g._emit("fade",a._id))},C)},_stopFade:function(a){var c=this,u=c._soundById(a);return u&&u._interval&&(c._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,c.volume(u._fadeTo,a),u._fadeTo=null,c._emit("fade",a)),c},loop:function(){var a=this,c=arguments,u,f,p;if(c.length===0)return a._loop;if(c.length===1)if(typeof c[0]=="boolean")u=c[0],a._loop=u;else return p=a._soundById(parseInt(c[0],10)),p?p._loop:!1;else c.length===2&&(u=c[0],f=parseInt(c[1],10));for(var m=a._getSoundIds(f),g=0;g<m.length;g++)p=a._soundById(m[g]),p&&(p._loop=u,a._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=u,u&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,a.playing(m[g])&&(a.pause(m[g],!0),a.play(m[g],!0)))));return a},rate:function(){var a=this,c=arguments,u,f;if(c.length===0)f=a._sounds[0]._id;else if(c.length===1){var p=a._getSoundIds(),m=p.indexOf(c[0]);m>=0?f=parseInt(c[0],10):u=parseFloat(c[0])}else c.length===2&&(u=parseFloat(c[0]),f=parseInt(c[1],10));var g;if(typeof u=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,c)}}),a;typeof f>"u"&&(a._rate=u),f=a._getSoundIds(f);for(var B=0;B<f.length;B++)if(g=a._soundById(f[B]),g){a.playing(f[B])&&(g._rateSeek=a.seek(f[B]),g._playStart=a._webAudio?t.ctx.currentTime:g._playStart),g._rate=u,a._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):g._node&&(g._node.playbackRate=u);var I=a.seek(f[B]),_=(a._sprite[g._sprite][0]+a._sprite[g._sprite][1])/1e3-I,C=_*1e3/Math.abs(g._rate);(a._endTimers[f[B]]||!g._paused)&&(a._clearTimer(f[B]),a._endTimers[f[B]]=setTimeout(a._ended.bind(a,g),C)),a._emit("rate",g._id)}}else return g=a._soundById(f),g?g._rate:a._rate;return a},seek:function(){var a=this,c=arguments,u,f;if(c.length===0)a._sounds.length&&(f=a._sounds[0]._id);else if(c.length===1){var p=a._getSoundIds(),m=p.indexOf(c[0]);m>=0?f=parseInt(c[0],10):a._sounds.length&&(f=a._sounds[0]._id,u=parseFloat(c[0]))}else c.length===2&&(u=parseFloat(c[0]),f=parseInt(c[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,c)}}),a;var g=a._soundById(f);if(g)if(typeof u=="number"&&u>=0){var B=a.playing(f);B&&a.pause(f,!0),g._seek=u,g._ended=!1,a._clearTimer(f),!a._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=u);var I=function(){B&&a.play(f,!0),a._emit("seek",f)};if(B&&!a._webAudio){var _=function(){a._playLock?setTimeout(_,0):I()};setTimeout(_,0)}else I()}else if(a._webAudio){var C=a.playing(f)?t.ctx.currentTime-g._playStart:0,E=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(E+C*Math.abs(g._rate))}else return g._node.currentTime;return a},playing:function(a){var c=this;if(typeof a=="number"){var u=c._soundById(a);return u?!u._paused:!1}for(var f=0;f<c._sounds.length;f++)if(!c._sounds[f]._paused)return!0;return!1},duration:function(a){var c=this,u=c._duration,f=c._soundById(a);return f&&(u=c._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var a=this,c=a._sounds,u=0;u<c.length;u++)c[u]._paused||a.stop(c[u]._id),a._webAudio||(a._clearSound(c[u]._node),c[u]._node.removeEventListener("error",c[u]._errorFn,!1),c[u]._node.removeEventListener(t._canPlayEvent,c[u]._loadFn,!1),c[u]._node.removeEventListener("ended",c[u]._endFn,!1),t._releaseHtml5Audio(c[u]._node)),delete c[u]._node,a._clearTimer(c[u]._id);var f=t._howls.indexOf(a);f>=0&&t._howls.splice(f,1);var p=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===a._src||a._src.indexOf(t._howls[u]._src)>=0){p=!1;break}return s&&p&&delete s[a._src],t.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,c,u,f){var p=this,m=p["_on"+a];return typeof c=="function"&&m.push(f?{id:u,fn:c,once:f}:{id:u,fn:c}),p},off:function(a,c,u){var f=this,p=f["_on"+a],m=0;if(typeof c=="number"&&(u=c,c=null),c||u)for(m=0;m<p.length;m++){var g=u===p[m].id;if(c===p[m].fn&&g||!c&&g){p.splice(m,1);break}}else if(a)f["_on"+a]=[];else{var B=Object.keys(f);for(m=0;m<B.length;m++)B[m].indexOf("_on")===0&&Array.isArray(f[B[m]])&&(f[B[m]]=[])}return f},once:function(a,c,u){var f=this;return f.on(a,c,u,1),f},_emit:function(a,c,u){for(var f=this,p=f["_on"+a],m=p.length-1;m>=0;m--)(!p[m].id||p[m].id===c||a==="load")&&(setTimeout((function(g){g.call(this,c,u)}).bind(f,p[m].fn),0),p[m].once&&f.off(a,p[m].fn,p[m].id));return f._loadQueue(a),f},_loadQueue:function(a){var c=this;if(c._queue.length>0){var u=c._queue[0];u.event===a&&(c._queue.shift(),c._loadQueue()),a||u.action()}return c},_ended:function(a){var c=this,u=a._sprite;if(!c._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(c._ended.bind(c,a),100),c;var f=!!(a._loop||c._sprite[u][2]);if(c._emit("end",a._id),!c._webAudio&&f&&c.stop(a._id,!0).play(a._id),c._webAudio&&f){c._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=t.ctx.currentTime;var p=(a._stop-a._start)*1e3/Math.abs(a._rate);c._endTimers[a._id]=setTimeout(c._ended.bind(c,a),p)}return c._webAudio&&!f&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,c._clearTimer(a._id),c._cleanBuffer(a._node),t._autoSuspend()),!c._webAudio&&!f&&c.stop(a._id,!0),c},_clearTimer:function(a){var c=this;if(c._endTimers[a]){if(typeof c._endTimers[a]!="function")clearTimeout(c._endTimers[a]);else{var u=c._soundById(a);u&&u._node&&u._node.removeEventListener("ended",c._endTimers[a],!1)}delete c._endTimers[a]}return c},_soundById:function(a){for(var c=this,u=0;u<c._sounds.length;u++)if(a===c._sounds[u]._id)return c._sounds[u];return null},_inactiveSound:function(){var a=this;a._drain();for(var c=0;c<a._sounds.length;c++)if(a._sounds[c]._ended)return a._sounds[c].reset();return new i(a)},_drain:function(){var a=this,c=a._pool,u=0,f=0;if(!(a._sounds.length<c)){for(f=0;f<a._sounds.length;f++)a._sounds[f]._ended&&u++;for(f=a._sounds.length-1;f>=0;f--){if(u<=c)return;a._sounds[f]._ended&&(a._webAudio&&a._sounds[f]._node&&a._sounds[f]._node.disconnect(0),a._sounds.splice(f,1),u--)}}},_getSoundIds:function(a){var c=this;if(typeof a>"u"){for(var u=[],f=0;f<c._sounds.length;f++)u.push(c._sounds[f]._id);return u}else return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=t.ctx.createBufferSource(),a._node.bufferSource.buffer=s[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,t.ctx.currentTime),c},_cleanBuffer:function(a){var c=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return c;if(t._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),u))try{a.bufferSource.buffer=t._scratchBuffer}catch{}return a.bufferSource=null,c},_clearSound:function(a){var c=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);c||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(a){this._parent=a,this.init()};i.prototype={init:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++t._counter,c._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,u=t._muted||a._muted||a._parent._muted?0:a._volume;return c._webAudio?(a._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),a._node.gain.setValueAtTime(u,t.ctx.currentTime),a._node.paused=!0,a._node.connect(t.masterGain)):t.noAudio||(a._node=t._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(t._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=c._src,a._node.preload=c._preload===!0?"auto":c._preload,a._node.volume=u*t.volume(),a._node.load()),a},reset:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++t._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,c=a._parent;c._duration=Math.ceil(a._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),a._node.removeEventListener(t._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,c=a._parent;c._duration===1/0&&(c._duration=Math.ceil(a._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var s={},r=function(a){var c=a._src;if(s[c]){a._duration=s[c].duration,h(a);return}if(/^data:[^;]+;base64,/.test(c)){for(var u=atob(c.split(",")[1]),f=new Uint8Array(u.length),p=0;p<u.length;++p)f[p]=u.charCodeAt(p);A(f.buffer,a)}else{var m=new XMLHttpRequest;m.open(a._xhr.method,c,!0),m.withCredentials=a._xhr.withCredentials,m.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(g){m.setRequestHeader(g,a._xhr.headers[g])}),m.onload=function(){var g=(m.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}A(m.response,a)},m.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete s[c],a.load())},o(m)}},o=function(a){try{a.send()}catch{a.onerror()}},A=function(a,c){var u=function(){c._emit("loaderror",null,"Decoding audio data failed.")},f=function(p){p&&c._sounds.length>0?(s[c._src]=p,h(c,p)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(a).then(f).catch(u):t.ctx.decodeAudioData(a,f,u)},h=function(a,c){c&&!a._duration&&(a._duration=c.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},d=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),c=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=c?parseInt(c[1],10):null;if(a&&u&&u<9){var f=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!f&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};l.Howler=t,l.Howl=n,typeof Ts<"u"?(Ts.HowlerGlobal=e,Ts.Howler=t,Ts.Howl=n,Ts.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,r,o){var A=this;if(!A.ctx||!A.ctx.listener)return A;var h=A._orientation;if(n=typeof n!="number"?h[1]:n,i=typeof i!="number"?h[2]:i,s=typeof s!="number"?h[3]:s,r=typeof r!="number"?h[4]:r,o=typeof o!="number"?h[5]:o,typeof t=="number")A._orientation=[t,n,i,s,r,o],typeof A.ctx.listener.forwardX<"u"?(A.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),A.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),A.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),A.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),A.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),A.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):A.ctx.listener.setOrientation(t,n,i,s,r,o);else return h;return A},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var r=i._getSoundIds(n),o=0;o<r.length;o++){var A=i._soundById(r[o]);if(A)if(typeof t=="number")A._stereo=t,A._pos=[t,0,0],A._node&&(A._pannerAttr.panningModel="equalpower",(!A._panner||!A._panner.pan)&&e(A,s),s==="spatial"?typeof A._panner.positionX<"u"?(A._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),A._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),A._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):A._panner.setPosition(t,0,0):A._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",A._id);else return A._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"pos",action:function(){r.pos(t,n,i,s)}}),r;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")r._pos=[t,n,i];else return r._pos;for(var o=r._getSoundIds(s),A=0;A<o.length;A++){var h=r._soundById(o[A]);if(h)if(typeof t=="number")h._pos=[t,n,i],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setPosition(t,n,i)),r._emit("pos",h._id);else return h._pos}return r},Howl.prototype.orientation=function(t,n,i,s){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"orientation",action:function(){r.orientation(t,n,i,s)}}),r;if(n=typeof n!="number"?r._orientation[1]:n,i=typeof i!="number"?r._orientation[2]:i,typeof s>"u")if(typeof t=="number")r._orientation=[t,n,i];else return r._orientation;for(var o=r._getSoundIds(s),A=0;A<o.length;A++){var h=r._soundById(o[A]);if(h)if(typeof t=="number")h._orientation=[t,n,i],h._node&&(h._panner||(h._pos||(h._pos=r._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setOrientation(t,n,i)),r._emit("orientation",h._id);else return h._orientation}return r},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,r;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return r=t._soundById(parseInt(n[0],10)),r?r._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var o=t._getSoundIds(s),A=0;A<o.length;A++)if(r=t._soundById(o[A]),r){var h=r._pannerAttr;h={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:h.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:h.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:h.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:h.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:h.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:h.panningModel};var d=r._panner;d||(r._pos||(r._pos=t._pos||[0,0,-.5]),e(r,"spatial"),d=r._panner),d.coneInnerAngle=h.coneInnerAngle,d.coneOuterAngle=h.coneOuterAngle,d.coneOuterGain=h.coneOuterGain,d.distanceModel=h.distanceModel,d.maxDistance=h.maxDistance,d.refDistance=h.refDistance,d.rolloffFactor=h.rolloffFactor,d.panningModel=h.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(da)),da}var C0=B0(),_0=`uniform float iTime;
uniform vec3 iResolution;
uniform vec4 iMouse;

varying vec2 vUv;

void main(){
    vec3 p=position;
    gl_Position=vec4(p,1.);
    
    vUv=uv;
}`,E0=`uniform float iTime;
uniform vec3 iResolution;
uniform vec4 iMouse;

varying vec2 vUv;

uniform sampler2D uEnvmap1;
uniform sampler2D uEnvmap2;
uniform float uWeight;
uniform float uIntensity;

void main(){
    vec2 uv=vUv;
    vec3 envmap1=texture(uEnvmap1,uv).xyz;
    vec3 envmap2=texture(uEnvmap2,uv).xyz;
    vec3 col=mix(envmap1,envmap2,uWeight)*uIntensity;
    gl_FragColor=vec4(col,1.);
}`;const I0=an.timeline();class y0 extends Jt{constructor(t){super(t);Y(this,"rt");Y(this,"quad");Y(this,"material");const n=this.getEnvmapFromHDRTexture(this.base.renderer,t.am.items.ut_env_night),i=this.getEnvmapFromHDRTexture(this.base.renderer,this.base.am.items.ut_env_light),s=n==null?void 0:n.source.data,r=new dc(s.width,s.height,{minFilter:Rn,magFilter:Rn,type:St});this.rt=r,this.envmap.mapping=Pd;const o=new Ao({vertexShader:_0,fragmentShader:E0,uniforms:{uEnvmap1:{value:n},uEnvmap2:{value:i},uWeight:{value:0},uIntensity:{value:0}}});this.material=o;const A=new ff(o);this.quad=A}getEnvmapFromHDRTexture(t,n){const i=new kd(t);i.compileEquirectangularShader();const s=i.fromEquirectangular(n).texture;return i.dispose(),s}update(){this.base.renderer.setRenderTarget(this.rt),this.quad.render(this.base.renderer),this.base.renderer.setRenderTarget(null)}get envmap(){return this.rt.texture}setWeight(t){this.material.uniforms.uWeight.value=t}setIntensity(t){this.material.uniforms.uIntensity.value=t}lerpWeight(t,n){I0.to(this.material.uniforms.uWeight,{value:t,duration:n,ease:"power2.out"})}}class v0 extends Jt{constructor(t){super(t);Y(this,"model");Y(this,"lightMat");const n=this.base.am.items.sm_startroom;this.model=n;const i=ho(n.scene),r=i[1].material;r.emissive=new be(0),r.emissiveIntensity=0,r.toneMapped=!1,r.transparent=!0,r.alphaTest=.1,this.lightMat=r;const A=i[2].material;A.aoMap=this.base.am.items.ut_startroom_ao,A.lightMap=this.base.am.items.ut_startroom_light,A.normalMap=this.base.am.items.ut_floor_normal,A.roughnessMap=this.base.am.items.ut_floor_roughness,A.envMapIntensity=0}addExisting(){this.container.add(this.model.scene)}}class w0 extends Jt{constructor(t){super(t);Y(this,"model");Y(this,"modelParts");Y(this,"bodyMat");Y(this,"wheelModel");const n=this.base.am.items.sm_car;this.model=n;const i=ho(n.scene);this.modelParts=i,this.handleModel()}addExisting(){this.container.add(this.model.scene)}update(){var t;(t=this.wheelModel)==null||t.children.forEach(n=>{n.rotateZ(-this.base.params.speed*.03)})}handleModel(){const n=this.modelParts[2].material;this.base.params.isFurina?(n.color=new be(16777215),n.map=this.base.am.items.decal):n.color=new be("#26d6e9"),this.bodyMat=n,this.modelParts.forEach(s=>{if(s instanceof _n){const r=s.material;r.aoMap=this.base.am.items.ut_car_body_ao}});const i=this.modelParts[35];this.wheelModel=i}setBodyEnvmapIntensity(t){this.bodyMat&&(this.bodyMat.envMapIntensity=t)}}var x0=`uniform float iTime;
uniform vec3 iResolution;
uniform vec4 iMouse;

varying vec2 vUv;

void main(){
    vec3 p=position;
    gl_Position=projectionMatrix*modelViewMatrix*vec4(p,1.);
    
    vUv=uv;
}`,M0=`vec2 hash(vec2 p)
{\r
    p=vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3)));\r
    return-1.+2.*fract(sin(p)*43758.5453123);\r
}

float noise(in vec2 p)\r
{\r
    const float K1=.366025404;
    const float K2=.211324865;
    \r
    vec2 i=floor(p+(p.x+p.y)*K1);\r
    vec2 a=p-i+(i.x+i.y)*K2;\r
    float m=step(a.y,a.x);\r
    vec2 o=vec2(m,1.-m);\r
    vec2 b=a-o+K2;\r
    vec2 c=a-1.+2.*K2;\r
    vec3 h=max(.5-vec3(dot(a,a),dot(b,b),dot(c,c)),0.);\r
    vec3 n=h*h*h*h*vec3(dot(a,hash(i+0.)),dot(b,hash(i+o)),dot(c,hash(i+1.)));\r
    return dot(n,vec3(70.));\r
}
#ifndef RANDOM_SCALE
#ifdef RANDOM_HIGHER_RANGE
#define RANDOM_SCALE vec4(.1031, .1030, .0973, .1099)
#else
#define RANDOM_SCALE vec4(443.897, 441.423, .0973, .1099)
#endif
#endif

#ifndef FNC_RANDOM
#define FNC_RANDOM
float random(in float x) {
#ifdef RANDOM_SINLESS
    x = fract(x * RANDOM_SCALE.x);
    x *= x + 33.33;
    x *= x + x;
    return fract(x);
#else
    return fract(sin(x) * 43758.5453);
#endif
}

float random(in vec2 st) {
#ifdef RANDOM_SINLESS
    vec3 p3  = fract(vec3(st.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 33.33);
    return fract((p3.x + p3.y) * p3.z);
#else
    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
#endif
}

float random(in vec3 pos) {
#ifdef RANDOM_SINLESS
    pos  = fract(pos * RANDOM_SCALE.xyz);
    pos += dot(pos, pos.zyx + 31.32);
    return fract((pos.x + pos.y) * pos.z);
#else
    return fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
#endif
}

float random(in vec4 pos) {
#ifdef RANDOM_SINLESS
    pos = fract(pos * RANDOM_SCALE);
    pos += dot(pos, pos.wzxy + 33.33);
    return fract((pos.x + pos.y) * (pos.z + pos.w));
#else
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return fract(sin(dot_product) * 43758.5453);
#endif
}

vec2 random2(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec2 p) {
    vec3 p3 = fract(p.xyx * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec3 p3) {
    p3 = fract(p3 * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec3 random3(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx); 
}

vec3 random3(vec2 p) {
    vec3 p3 = fract(vec3(p.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yxz + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx);
}

vec3 random3(vec3 p) {
    p = fract(p * RANDOM_SCALE.xyz);
    p += dot(p, p.yxz + 19.19);
    return fract((p.xxy + p.yzz) * p.zyx);
}

vec4 random4(float p) {
    vec4 p4 = fract(p * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);   
}

vec4 random4(vec2 p) {
    vec4 p4 = fract(p.xyxy * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec3 p) {
    vec4 p4 = fract(p.xyzx * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec4 p4) {
    p4 = fract(p4  * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}
#endif
#if !defined(FNC_SATURATE) && !defined(saturate)
#define FNC_SATURATE
#define saturate(V) clamp(V, 0.0, 1.0)
#endif
#ifndef FNC_MAP
#define FNC_MAP
float map(float v, float iMin, float iMax ) { return (v-iMin)/(iMax-iMin); }
vec2 map(vec2 v, vec2 iMin, vec2 iMax ) { return (v-iMin)/(iMax-iMin); }
vec3 map(vec3 v, vec3 iMin, vec3 iMax ) { return (v-iMin)/(iMax-iMin); }
vec4 map(vec4 v, vec4 iMin, vec4 iMax ) { return (v-iMin)/(iMax-iMin); }

float map(in float v, in float iMin, in float iMax, in float oMin, in float oMax) { return oMin + (oMax - oMin) * (v - iMin) / (iMax - iMin); }
vec2 map(in vec2 v, in vec2 iMin, in vec2 iMax, in vec2 oMin, in vec2 oMax) { return oMin + (oMax - oMin) * (v - iMin) / (iMax - iMin); }
vec3 map(in vec3 v, in vec3 iMin, in vec3 iMax, in vec3 oMin, in vec3 oMax) { return oMin + (oMax - oMin) * (v - iMin) / (iMax - iMin); }
vec4 map(in vec4 v, in vec4 iMin, in vec4 iMax, in vec4 oMin, in vec4 oMax) { return oMin + (oMax - oMin) * (v - iMin) / (iMax - iMin); }
#endif
#ifndef EIGHTH_PI
#define EIGHTH_PI 0.39269908169
#endif
#ifndef QTR_PI
#define QTR_PI 0.78539816339
#endif
#ifndef HALF_PI
#define HALF_PI 1.5707963267948966192313216916398
#endif
#ifndef PI
#define PI 3.1415926535897932384626433832795
#endif
#ifndef TWO_PI
#define TWO_PI 6.2831853071795864769252867665590
#endif
#ifndef TAU
#define TAU 6.2831853071795864769252867665590
#endif
#ifndef INV_PI
#define INV_PI 0.31830988618379067153776752674503
#endif
#ifndef INV_SQRT_TAU
#define INV_SQRT_TAU 0.39894228040143267793994605993439  
#endif
#ifndef SQRT_HALF_PI
#define SQRT_HALF_PI 1.25331413732
#endif
#ifndef PHI
#define PHI 1.618033988749894848204586834
#endif
#ifndef EPSILON
#define EPSILON 0.0000001
#endif
#ifndef GOLDEN_RATIO
#define GOLDEN_RATIO 1.6180339887
#endif
#ifndef GOLDEN_RATIO_CONJUGATE 
#define GOLDEN_RATIO_CONJUGATE 0.61803398875
#endif
#ifndef GOLDEN_ANGLE 
#define GOLDEN_ANGLE 2.39996323
#endif
#ifndef DEG2RAD
#define DEG2RAD (PI / 180.0)
#endif
#ifndef RAD2DEG
#define RAD2DEG (180.0 / PI)
#endif

#ifndef FNC_PALETTE
#define FNC_PALETTE
vec3 palette (in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d) { return a + b * cos(TAU * ( c * t + d )); }
vec4 palette (in float t, in vec4 a, in vec4 b, in vec4 c, in vec4 d) { return a + b * cos(TAU * ( c * t + d )); }
#endif

uniform float iTime;
uniform vec3 iResolution;
uniform vec4 iMouse;

varying vec2 vUv;

uniform float uSpeed;
uniform float uOpacity;

vec3 pos2col(vec2 i){
    i+=vec2(9.,0.);
    
    float r=random(i+vec2(12.,2.));
    float g=random(i+vec2(7.,5.));
    float b=random(i);
    
    vec3 col=vec3(r,g,b);
    return col;
}

vec3 colorNoise(vec2 uv){
    vec2 size=vec2(1.);
    vec2 pc=uv*size;
    vec2 base=floor(pc);
    
    vec3 v1=pos2col((base+vec2(0.,0.))/size);
    vec3 v2=pos2col((base+vec2(1.,0.))/size);
    vec3 v3=pos2col((base+vec2(0.,1.))/size);
    vec3 v4=pos2col((base+vec2(1.,1.))/size);
    
    vec2 f=fract(pc);
    
    f=smoothstep(0.,1.,f);
    
    vec3 px1=mix(v1,v2,f.x);
    vec3 px2=mix(v3,v4,f.x);
    vec3 v=mix(px1,px2,f.y);
    return v;
}

void main(){
    vec2 uv=vUv;
    
    vec3 col=vec3(1.);
    
    float mask=1.;
    
    vec2 noiseUv=uv;
    noiseUv.x+=-iTime*.5;
    float noiseValue=noise(noiseUv*vec2(3.,100.));
    mask=noiseValue;
    mask=map(mask,-1.,1.,0.,1.);
    mask=pow(saturate(mask-.1),11.);
    mask=smoothstep(0.,.04,mask);
    
    
    col=colorNoise(noiseUv*vec2(10.,100.));
    col*=vec3(1.5,1.,400.);
    
    mask*=smoothstep(.02,.5,uv.x)*smoothstep(.02,.5,1.-uv.x);
    mask*=smoothstep(.01,.1,uv.y)*smoothstep(.01,.1,1.-uv.y);
    mask*=smoothstep(1.,10.,uSpeed);
    
    gl_FragColor=vec4(col,mask*uOpacity);
}`;class T0 extends Jt{constructor(t){super(t);Y(this,"model");Y(this,"uj");Y(this,"material");this.model=this.base.am.items.sm_speedup;const n=ho(this.model.scene);this.uj=new FC(this.base),this.material=new Ao({vertexShader:x0,fragmentShader:M0,transparent:!0,depthWrite:!1,uniforms:{...this.uj.shadertoyUniforms,uSpeed:{value:this.base.params.speed},uOpacity:{value:this.base.params.speedUpOpacity}}});const i=n[1];i.material=this.material}addExisting(){this.container.add(this.model.scene)}update(){this.material.uniforms.uSpeed.value=this.base.params.speed,this.uj.injectShadertoyUniforms(this.material.uniforms)}}const Q0=QC(),fa=({octave:l=3,frequency:e=2,amplitude:t=.5,lacunarity:n=2,persistance:i=.5}={})=>{let s=0;for(let r=0;r<l;r++){const o=Q0(e,e);s+=o*t,e*=n,t*=i}return s};class D0 extends Jt{constructor(t,n={}){super(t);Y(this,"tweenedPosOffset");Y(this,"intensity");this.intensity=n.intensity??1,this.tweenedPosOffset=new Qe(0,0,0)}update(){const t=this.base.clock.elapsedTime,n=new Qe(fa({frequency:t*.5+Gt.randFloat(-1e4,0),amplitude:2}),fa({frequency:t*.5+Gt.randFloat(-1e4,0),amplitude:2}),fa({frequency:t*.5+Gt.randFloat(-1e4,0),amplitude:2}));n.multiplyScalar(.1*this.intensity),an.to(this.tweenedPosOffset,{x:n.x,y:n.y,z:n.z,duration:1.2}),this.base.camera.position.add(this.tweenedPosOffset)}setIntensity(t){this.intensity=t}}class b0 extends Jt{constructor(t){super(t);Y(this,"model",new Si);Y(this,"realModel");Y(this,"modelParts");Y(this,"mixer");Y(this,"actions",{});Y(this,"currentAction",null);Y(this,"isPaused",!0);this.realModel=this.base.am.items.driving,this.model.add(this.realModel),this.modelParts=ho(this.realModel),this.modelParts.forEach(n=>{if(n instanceof _n&&n.material.isMeshPhongMaterial){const i=new $i({transparent:!0,map:n.material.map||null,color:new be(0)});n.material=i}}),this.model.scale.setScalar(.074),this.model.rotation.y=Math.PI*.5,this.model.position.set(.225,.15,-.4),this.mixer=new Ud(this.model),this.addAction("driving","driving"),this.playAction("driving"),this.mixer.update(1)}addExisting(){this.container.add(this.model)}update(){this.isPaused||this.mixer.update(this.base.clock.deltaTime)}addAction(t,n){var r;const i=((r=this.base.am)==null?void 0:r.items[t]).animations[0],s=this.mixer.clipAction(i);this.actions[n]=s}playAction(t){this.currentAction&&this.currentAction.fadeOut(.5);const n=this.actions[t];return n.weight=1,n.reset().fadeIn(.5).play(),this.currentAction=n,n}setColor(t){this.modelParts.forEach(n=>{n instanceof _n&&n.material.color.set(t)})}pause(){this.isPaused=!0}drive(){this.isPaused=!1}}const nc=pc(),S0=[{name:"bgm",type:"audio",path:"su7/audio/bgm.mp3"},{name:"sm_car",type:"gltfModel",path:"su7/mesh/sm_car.gltf"},{name:"sm_startroom",type:"gltfModel",path:"su7/mesh/sm_startroom.raw.gltf"},{name:"sm_speedup",type:"gltfModel",path:"su7/mesh/sm_speedup.gltf"},{name:"ut_car_body_ao",type:"texture",path:"su7/texture/t_car_body_AO.raw.jpg"},{name:"ut_startroom_ao",type:"texture",path:"su7/texture/t_startroom_ao.raw.jpg"},{name:"ut_startroom_light",type:"texture",path:"su7/texture/t_startroom_light.raw.jpg"},{name:"ut_floor_normal",type:"texture",path:"su7/texture/t_floor_normal.webp"},{name:"ut_floor_roughness",type:"texture",path:"su7/texture/t_floor_roughness.webp"},{name:"ut_env_night",type:"hdrTexture",path:"su7/texture/t_env_night.hdr"},{name:"ut_env_light",type:"hdrTexture",path:"su7/texture/t_env_light.hdr"},{name:"driving",type:"fbxModel",path:"su7/mesh/Driving.fbx"},{name:"decal",type:"texture",path:"su7/texture/decal.png"}];class F0 extends ZC{constructor(t=".container"){super(t,{autoAdaptMobile:!0});Y(this,"dynamicEnv");Y(this,"startRoom");Y(this,"car");Y(this,"furina");Y(this,"speedup");Y(this,"environment");Y(this,"cameraShake");Y(this,"bgm");Y(this,"am");Y(this,"controls");Y(this,"debug");Y(this,"stats");Y(this,"params");Y(this,"t1",an.timeline());Y(this,"t2",an.timeline());Y(this,"t3",an.timeline());Y(this,"t4",an.timeline());Y(this,"t5",an.timeline());Y(this,"t6",an.timeline());Y(this,"t7",an.timeline());Y(this,"t8",an.timeline());Y(this,"t9",an.timeline());window.world=this,this.params={bloomIntensity:1,bloomLuminanceSmoothing:1.6,cameraFov:33.4,cameraPos:{x:0,y:.8,z:-11},cameraShakeIntensity:0,carBodyEnvIntensity:1,disableInteract:!1,envIntensity:0,envWeight:0,floorLerpColor:0,furinaLerpColor:0,isCameraMoving:!1,isRushing:!1,lightAlpha:0,lightIntensity:0,lightOpacity:1,reflectIntensity:0,speed:0,speedUpOpacity:0,isFurina:window.location.hash==="#furina"},this.renderer.toneMapping=Nd,this.scene.background=new be(0);const n=this.camera;n.fov=this.params.cameraFov,n.updateProjectionMatrix();const i=new Qe(this.params.cameraPos.x,this.params.cameraPos.y,this.params.cameraPos.z);n.position.copy(i);const s=new Qe(0,.8,0);n.lookAt(s);const r=new n_(this);r.controls.setTarget(s.x,s.y,s.z),this.controls=r,this.initHelpers(),this.am=new bC(this,S0,{useMeshoptDecoder:!0}),this.am.on("ready",()=>{this.initWorld()}),this.update(()=>{this.params.isCameraMoving?(this.controls.controls.enabled=!1,this.controls.controls.setPosition(this.params.cameraPos.x,this.params.cameraPos.y,this.params.cameraPos.z)):this.controls.controls.enabled=!0})}initWorld(){this.handleAssets(),this.dynamicEnv=new y0(this),this.scene.environment=this.dynamicEnv.envmap,this.dynamicEnv.setWeight(1),this.startRoom=new v0(this),this.startRoom.addExisting(),this.car=new w0(this),this.car.addExisting(),this.params.isFurina&&(this.furina=new b0(this),this.furina.addExisting()),this.speedup=new T0(this),this.speedup.addExisting(),this.environment=new i_(this,{resolution:512,scene:this.scene,options:{minFilter:Hd,anisotropy:0,depthBuffer:!1,generateMipmaps:!0},textureType:An,ignoreObjects:[this.car.model.scene]}),this.cameraShake=new D0(this),this.cameraShake.setIntensity(0),this.bgm=new C0.Howl({src:"su7/audio/bgm.mp3",loop:!0,volume:.5}),this.interactionManager.add(this.car.model.scene),this.car.model.scene.addEventListener("click",()=>{this.rush(),this.bgm.play()}),nc.on("enter",()=>{this.params.disableInteract=!1}),this.enter()}enter(){var s;this.params.disableInteract=!0,this.dynamicEnv.setWeight(0),this.dynamicEnv.setIntensity(0),(s=document.querySelector(".loader-screen"))==null||s.classList.add("hollow"),this.t1.to(this.params.cameraPos,{x:0,y:.8,z:-7,duration:4,ease:"power2.inOut",onStart:()=>{this.params.isCameraMoving=!0},onComplete:()=>{this.params.isCameraMoving=!1,nc.emit("enter")}});const t=new be,n=new be(0),i=new be(16777215);this.t2.to(this.params,{lightAlpha:1,lightIntensity:1,furinaLerpColor:1,delay:1,ease:"power2.inOut",onUpdate:()=>{var r;t.copy(n).lerp(i,this.params.lightAlpha),this.startRoom.lightMat.emissive.set(t),this.startRoom.lightMat.emissiveIntensity=this.params.lightIntensity,(r=this.furina)==null||r.setColor(t)}}),this.t3.to(this.params,{envIntensity:1,duration:4,delay:.5,ease:"power2.inOut",onUpdate:()=>{this.dynamicEnv.setIntensity(this.params.envIntensity)}}).to(this.params,{envWeight:1,duration:4,ease:"power2.inOut",onUpdate:()=>{this.dynamicEnv.setWeight(this.params.envWeight)}},"-=2.5")}async rush(){var r;if(this.params.isRushing){this.rushDone();return}if(this.params.disableInteract)return;this.params.disableInteract=!0,this.clearAllTweens(),(r=this.furina)==null||r.drive(),this.t4.to(this.params,{speed:4,duration:2,ease:"power2.out",onComplete:()=>{this.params.isRushing=!0,this.params.disableInteract=!1}}).to(this.params,{speed:10,duration:4,ease:"power2.out"}),this.t5.to(this.params,{lightOpacity:0,duration:1,ease:"power2.out",onUpdate:()=>{this.startRoom.lightMat.opacity=this.params.lightOpacity}});const t=new be,n=new be(0),i=new be,s=new be(6710886);this.t6.fromTo(this.params,{floorLerpColor:0,furinaLerpColor:0},{floorLerpColor:1,furinaLerpColor:1,duration:4,ease:"none",onUpdate:()=>{var o;t.lerp(n,this.params.floorLerpColor),i.lerp(s,this.params.furinaLerpColor),(o=this.furina)==null||o.setColor(i)}}),this.t7.to(this.params,{envIntensity:.01,duration:1,ease:"power2.out",onUpdate:()=>{this.dynamicEnv.setIntensity(this.params.envIntensity)}}),this.t8.to(this.params,{speedUpOpacity:1,cameraFov:36,duration:2,ease:"power2.out",onUpdate:()=>{this.speedup.material.uniforms.uOpacity.value=this.params.speedUpOpacity;const o=this.camera;o.fov=this.params.cameraFov,o.updateProjectionMatrix()}}),await xC(1e3),this.scene.environment=this.environment.texture,this.t9.to(this.params,{carBodyEnvIntensity:10,cameraShakeIntensity:1,bloomLuminanceSmoothing:.4,bloomIntensity:2,duration:4,ease:"power2.out",onUpdate:()=>{this.car.setBodyEnvmapIntensity(this.params.carBodyEnvIntensity),this.cameraShake.setIntensity(this.params.cameraShakeIntensity)}})}rushDone(){var o;if(this.params.disableInteract)return;this.params.disableInteract=!0,this.clearAllTweens();const t=new be,n=new be("#ffffff"),i=this.camera,s=new be,r=new be("#ffffff");(o=this.furina)==null||o.pause(),this.t4.to(this.params,{speed:0,duration:2,ease:"power2.out",onComplete:()=>{this.params.isRushing=!1,this.params.disableInteract=!1}}),this.t5.to(this.params,{lightOpacity:1,duration:1,ease:"power2.out",onUpdate:()=>{this.startRoom.lightMat.opacity=this.params.lightOpacity}}),this.t6.fromTo(this.params,{floorLerpColor:0,furinaLerpColor:0},{floorLerpColor:1,furinaLerpColor:1,duration:4,ease:"none",onUpdate:()=>{var A;t.lerp(n,this.params.floorLerpColor),s.lerp(r,this.params.furinaLerpColor),(A=this.furina)==null||A.setColor(s)}}),this.t7.to(this.params,{envIntensity:1,duration:1,ease:"power2.out",onUpdate:()=>{this.dynamicEnv.setIntensity(this.params.envIntensity)}}),this.t8.to(this.params,{speedUpOpacity:0,cameraFov:33.4,duration:2,ease:"power2.out",onUpdate:()=>{this.speedup.material.uniforms.uOpacity.value=this.params.speedUpOpacity,i.fov=this.params.cameraFov,i.updateProjectionMatrix()}}),this.t9.to(this.params,{carBodyEnvIntensity:1,cameraShakeIntensity:0,bloomLuminanceSmoothing:1.6,bloomIntensity:1,duration:4,ease:"power2.out",onUpdate:()=>{this.car.setBodyEnvmapIntensity(this.params.carBodyEnvIntensity),this.cameraShake.setIntensity(this.params.cameraShakeIntensity)}}),this.scene.environment=this.dynamicEnv.envmap}handleAssets(){const t=this.am.items.ut_car_body_ao;t.flipY=!1,t.colorSpace=ys,t.minFilter=ir,t.magFilter=ir,t.channel=1;const n=this.am.items.ut_startroom_ao;n.flipY=!1,n.colorSpace=ys,n.channel=1;const i=this.am.items.ut_startroom_light;i.flipY=!1,i.colorSpace=Jd,i.channel=1;const s=this.am.items.ut_floor_normal;s.flipY=!1,s.colorSpace=ys,s.wrapS=qn,s.wrapT=qn;const r=this.am.items.ut_floor_roughness;r.flipY=!1,r.colorSpace=ys,r.wrapS=qn,r.wrapT=qn;const o=this.am.items.decal;o.flipY=!1,o.colorSpace=ys}clearAllTweens(){this.t1.clear(),this.t2.clear(),this.t3.clear(),this.t4.clear(),this.t5.clear(),this.t6.clear(),this.t7.clear(),this.t8.clear(),this.t9.clear()}initHelpers(){new zd(150)}}const R0={class:"container"},N0=Kd({__name:"index",setup(l){return Yd(()=>{new F0(".container"),document.title="SU7 - Three.js"}),(e,t)=>(Xd(),qd("div",R0,t[0]||(t[0]=[Vd('<div class="loader-screen"><div class="loading-container"><div class="loading"><span style="--i:0;">L</span><span style="--i:1;">O</span><span style="--i:2;">A</span><span style="--i:3;">D</span><span style="--i:4;">I</span><span style="--i:5;">N</span><span style="--i:6;">G</span></div></div></div>',1)])))}});export{N0 as default};
