var P=Object.defineProperty;var k=(o,a,h)=>a in o?P(o,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[a]=h;var s=(o,a,h)=>k(o,typeof a!="symbol"?a+"":a,h);import{S as v,P as b,W as y,k as d,f as M,T as W,s as L,g as C,t as R,h as u}from"./three.module-Dp6ZLe64.js";import{g as X}from"./lil-gui.module.min-Vka56b52.js";import{S as Y}from"./stats.module--VATS4Kh.js";import{d as _,r as z,o as B,c as A,f as E}from"./index-CgW45GDr.js";const F=_({__name:"demo5",setup(o){const a=z();class h{constructor(e){s(this,"container");s(this,"scene");s(this,"camera");s(this,"renderer");s(this,"mouseX");s(this,"mouseY");s(this,"windowHalfX");s(this,"windowHalfY");s(this,"materials");s(this,"parameters");s(this,"axesHelper");s(this,"stats");s(this,"gui");s(this,"controls");this.container=e,this.mouseX=0,this.mouseY=0,this.windowHalfX=this.container.clientWidth/2,this.windowHalfY=this.container.clientHeight/2,this.materials=[],this.parameters=[],this.initScene(),this.initCamera(),this.initRenderer(),this.initParticles(),this.initUtils(),this.initEventListeners()}initScene(){this.scene=new v}initCamera(){this.camera=new b(60,this.container.clientWidth/this.container.clientHeight,.1,1e4),this.camera.position.set(30,30,30),this.camera.lookAt(0,0,0)}initRenderer(){this.renderer=new y({antialias:!0}),this.renderer.outputColorSpace=d,this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setAnimationLoop(this.animate.bind(this)),this.container.appendChild(this.renderer.domElement)}initParticles(){const e=new M,i=[],t=n=>{n.colorSpace=d},r=new W;r.setPath("https://static.skyreels.ai/webvideo/img/");const f=r.load("snowflake1.png",t),g=r.load("snowflake2.png",t),H=r.load("snowflake3.png",t),S=r.load("snowflake4.png",t),x=r.load("snowflake5.png",t);for(let n=0;n<1e4;n++){const c=Math.random()*2e3-1e3,m=Math.random()*2e3-1e3,p=Math.random()*2e3-1e3;i.push(c,m,p)}e.setAttribute("position",new L(i,3)),this.parameters=[[[.9,.05,.5],f,10],[[1,.2,.5],g,20],[[.95,.1,.5],H,15],[[.8,0,.5],S,5],[[.85,0,.5],x,8]];for(let n=0;n<this.parameters.length;n++){const c=this.parameters[n][0],m=this.parameters[n][1],p=this.parameters[n][2];this.materials[n]=new C({size:p,map:m,blending:R,depthTest:!1,transparent:!0}),this.materials[n].color.setHSL(c[0],c[1],c[2],d);const l=new u(e,this.materials[n]);l.rotation.x=Math.random()*6,l.rotation.y=Math.random()*6,l.rotation.z=Math.random()*6,this.scene.add(l)}}initUtils(){this.stats=new Y,document.body.appendChild(this.stats.dom),this.gui=new X;const e={texture:!0};this.gui.add(e,"texture").onChange(i=>{for(let t=0;t<this.materials.length;t++)this.materials[t].map=i===!0?this.parameters[t][1]:null,this.materials[t].needsUpdate=!0})}initEventListeners(){window.addEventListener("pointermove",this.onPointerMove.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this))}onWindowResize(){this.windowHalfX=this.container.clientWidth/2,this.windowHalfY=this.container.clientHeight/2,this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)}onPointerMove(e){e.isPrimary!==!1&&(this.mouseX=e.clientX-this.windowHalfX,this.mouseY=e.clientY-this.windowHalfY)}update(){const e=Date.now()*5e-5;this.camera.position.x+=(this.mouseX-this.camera.position.x)*.05,this.camera.position.y+=(-this.mouseY-this.camera.position.y)*.05,this.camera.lookAt(this.scene.position);for(let i=0;i<this.scene.children.length;i++){const t=this.scene.children[i];t instanceof u&&(t.rotation.y=e*(i<4?i+1:-(i+1)))}for(let i=0;i<this.materials.length;i++){const t=this.parameters[i][0],r=360*(t[0]+e)%360/360;this.materials[i].color.setHSL(r,t[1],t[2],d)}this.renderer.render(this.scene,this.camera)}animate(){var e;(e=this.controls)!=null&&e.enableDamping&&this.controls.update(),this.update(),this.stats.update()}}return B(()=>{new h(a.value),document.title="雪花 - Three.js"}),(w,e)=>(E(),A("div",{ref_key:"container",ref:a,class:"container"},null,512))}});export{F as default};
